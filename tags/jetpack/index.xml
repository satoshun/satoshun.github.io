<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>jetpack on stsnãƒ–ãƒ­ã‚°</title>
    <link>https://satoshun.github.io/tags/jetpack/</link>
    <description>Recent content in jetpack on stsnãƒ–ãƒ­ã‚°</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja</language>
    <copyright>Sato Shun</copyright>
    <lastBuildDate>Sun, 12 Jul 2020 05:14:48 +0000</lastBuildDate>
    
	<atom:link href="https://satoshun.github.io/tags/jetpack/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>Jetpack Compose: IOSchedã‚’Jetpack Composeã§æ›¸ã part1</title>
      <link>https://satoshun.github.io/2020/07/compose-iosched-scaffold/</link>
      <pubDate>Sun, 12 Jul 2020 05:14:48 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2020/07/compose-iosched-scaffold/</guid>
      <description>ã“ã®è¨˜äº‹ã§ã¯ã€Jetpack Composeã‚’å­¦ã¶ãŸã‚ã«ã€å…¬å¼ã® IoSched ã®UIã‚’Jetpack Composeã«æ›¸ãæ›ãˆã¦ã„ãè¨˜äº‹ã«ãªã‚Šã¾ã™ã€‚ å®Œå…¨ã«è¦‹ãŸç›®ã‚’åŒä¸€ã«ã™ã‚‹ã¨ã„ã†æ‰€ã¾ã§ã¯ã‚„ã‚‰ãšã«ã€å¤§ä½“ä¸€ç·’ã®è¦‹ãŸç›®ã§å¦¥å”ã™ã‚‹ã®ã§ã”äº†æ‰¿ä¸‹ã•ã„ã€‚
Part1ã§ã¯ã€ãƒ›ãƒ¼ãƒ ç”»é¢ã®Appbarã‚’ä½œã‚‹ã¨ã“ã‚ã¾ã§ã‚’ã‚„ã‚Šã¾ã™ã€‚
ã¾ãŸã€ã“ã®è¨˜äº‹ã®ã‚³ãƒ¼ãƒ‰ã®ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã¯Google I/Oã‚¢ãƒ—ãƒªã¨åŒç­‰ã§ã™ã€‚
Copyright 2014 Google Inc. All rights reserved. Licensed under the Apache License, Version 2.0 (the &amp;quot;License&amp;quot;); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an &amp;quot;AS IS&amp;quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</description>
    </item>
    
    <item>
      <title>Jetpack Compose: PreviewParameterã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ã£ã¦ã„ã‚ã„ã‚ãªãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ä½œã‚‹</title>
      <link>https://satoshun.github.io/2020/07/compose-preview/</link>
      <pubDate>Wed, 08 Jul 2020 11:36:04 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2020/07/compose-preview/</guid>
      <description>ã“ã®è¨˜äº‹ã§ã¯ã€PreviewParameterã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ã£ã¦è¤‡æ•°ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’å‡ºã™æ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚
Previewã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦ Jetpack Composeã§ã¯ã€@Previewã‚’ä½¿ã†ã“ã¨ã§ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’è¡¨ç¤ºã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
ä¾‹ãˆã°ã€TestScreenã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¯æ¬¡ã®ã‚ˆã†ã«å®šç¾©ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
@Composable fun TestScreen( user: User, count: Int ) { ... } @Preview(&amp;#34;test screen&amp;#34;) @Composable fun PreviewTestScreen() { TestScreen(user = User(id = &amp;#34;1&amp;#34;, name = &amp;#34;tom&amp;#34;), count = 10) } ã“ã“ã§ã€ã„ã‚ã„ã‚ãªUserã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’è¡¨ç¤ºã—ãŸã„ã¨ã—ã¾ã™ã€‚æ„šç›´ã«ã‚„ã‚‹ãªã‚‰ã€@Previewã‚’è¤‡æ•°å®šç¾©ã™ã‚‹ã“ã¨ã§ã™ãŒã€@PreviewParameterã‚’ä½¿ã†ã“ã¨ã§ã‚ˆã‚Šã‚¹ãƒãƒ¼ãƒˆã«æ›¸ãã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
å…·ä½“çš„ã«ã¯ã€æ¬¡ã®ã‚ˆã†ã«æ›¸ãã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
class PreviewUserProvider : PreviewParameterProvider&amp;lt;User&amp;gt; { override val values: Sequence&amp;lt;User&amp;gt; get() = sequenceOf( User(id = &amp;#34;1&amp;#34;, name = &amp;#34;tom&amp;#34;), User(id = &amp;#34;2&amp;#34;, name = &amp;#34;ã‚¹ã‚ºã‚­&amp;#34;) ) } @Preview(&amp;#34;test screen parameter&amp;#34;) @Composable fun PreviewParameterTestScreen( @PreviewParameter(PreviewUserProvider::class) user: User ) { TestScreen(user = user, count = 10) } æœ€åˆã«ã€PreviewParameterProviderã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å®Ÿè£…ã—ã¾ã™ã€‚PreviewParameterProviderã§ã¯ã€ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ãŸã„ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ï¼ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼‰ã‚’å®šç¾©ã—ã¦ã‚ã’ã¾ã™ã€‚ å®Ÿè£…ã—ãŸã‚¯ãƒ©ã‚¹ã‚’ @PreviewParameter(PreviewUserProvider::class) ã¨æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’è¤‡æ•°å‡ºã™ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚</description>
    </item>
    
    <item>
      <title>Android: ActivityResultContractã‚’ä½¿ã£ã¦Runtime Permissionsã‚’å®Ÿè£…ã™ã‚‹</title>
      <link>https://satoshun.github.io/2020/06/jetpack-activity-permission-contract/</link>
      <pubDate>Thu, 11 Jun 2020 10:47:24 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2020/06/jetpack-activity-permission-contract/</guid>
      <description>Activity 1.2.0-alpha02ã‹ã‚‰å°å…¥ã•ã‚ŒãŸã€ActivityResultContractã‚’ä½¿ã†ã“ã¨ã§ã€Runtime Permissionsã‚’ã„ã„æ„Ÿã˜ã«å®Ÿè£…ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã«ãªã‚Šã¾ã—ãŸã€‚
ã“ã®è¨˜äº‹ã§ã¯ã€ã©ã®ã‚ˆã†ã«å®Ÿè£…ã™ã‚Œã°è‰¯ã„ã‹ã‚’ç°¡å˜ã«èª¬æ˜ã—ã¾ã™ã€‚
å˜ä¸€ã®Permissonã‚’è¦æ±‚ã™ã‚‹ æ–°ã—ãè¿½åŠ ã•ã‚ŒãŸ registerForActivityResult æ‹¡å¼µé–¢æ•°ã«ã€ActivityResultContracts.RequestPermission()ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€å˜ä¸€ã®Permissionã‚’è¦æ±‚ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
ä¾‹ãˆã°ã€android.permission.ACCESS_FINE_LOCATIONãŒæ¬²ã—ã„æ™‚ã¯ã€æ¬¡ã®ã‚ˆã†ã«æ›¸ãã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
class HogeActivity : AppCompatActivity() { // å®šç¾©å´  private val requestLocation = registerForActivityResult( ActivityResultContracts.RequestPermission(), ACCESS_FINE_LOCATION ) { isGranted -&amp;gt; // Permissionã®å–å¾—ã«æˆåŠŸã—ãŸã‹ã©ã†ã‹ã€Booleanå€¤ã§è¿”ã£ã¦ãã‚‹  Toast.makeText(this@AppActivity, &amp;#34;isGranted $isGranted&amp;#34;, Toast.LENGTH_LONG).show() } private fun hoge() { // å‘¼ã³å‡ºã—å´  requestLocation.launch(Unit) } } è¤‡æ•°ã®Permissonã‚’è¦æ±‚ã™ã‚‹ è¤‡æ•°ã®å ´åˆã¯ã€ActivityResultContracts.RequestMultiplePermissions()ã‚’æŒ‡å®šã—ã¾ã™ã€‚
ä¾‹ãˆã°ã€android.permission.ACCESS_FINE_LOCATIONã€android.permission.READ_EXTERNAL_STORAGEãŒæ¬²ã—ã„æ™‚ã¯ã€æ¬¡ã®ã‚ˆã†ã«æ›¸ãã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
class HogeActivity : AppCompatActivity(R.layout.app_act) { // å®šç¾©å´  private val requestPermissions = registerForActivityResult( ActivityResultContracts.RequestMultiplePermissions(), arrayOf(ACCESS_FINE_LOCATION, READ_EXTERNAL_STORAGE ) { grants -&amp;gt; // Permissionã®å–å¾—ã«æˆåŠŸã—ãŸã‹ã©ã†ã‹ã€Map&amp;lt;String, Boolean&amp;gt;&amp;gt;ã§è¿”ã£ã¦ãã‚‹  Toast.</description>
    </item>
    
    <item>
      <title>Android: ConstraintLayoutã®å­ã«RecyclerViewã‚’é…ç½®ã—ã¦ã€Match Constraintsã‚’è¨­å®šã™ã‚‹ã¨è‰¯ããªã„æŒ™å‹•ã‚’ã™ã‚‹</title>
      <link>https://satoshun.github.io/2020/05/recyclerview-with-match-constraints/</link>
      <pubDate>Fri, 15 May 2020 13:25:48 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2020/05/recyclerview-with-match-constraints/</guid>
      <description>å‚™å¿˜éŒ²ã§ã™ã€‚
æ¬¡ã®ã‚ˆã†ãªãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã¯è‰¯ããªã„ãã¨ã„ã†è©±ã§ã™ã€‚
&amp;lt;androidx.constraintlayout.widget.ConstraintLayout android:layout_width=&amp;#34;match_parent&amp;#34; android:layout_height=&amp;#34;wrap_content&amp;#34;&amp;gt; &amp;lt;androidx.recyclerview.widget.RecyclerView android:id=&amp;#34;@+id/recycler&amp;#34; android:layout_width=&amp;#34;0dp&amp;#34; android:layout_height=&amp;#34;wrap_content&amp;#34; app:layout_constraintEnd_toEndOf=&amp;#34;parent&amp;#34; app:layout_constraintStart_toStartOf=&amp;#34;parent&amp;#34; app:layout_constraintTop_toTopOf=&amp;#34;parent&amp;#34; /&amp;gt; &amp;lt;/androidx.constraintlayout.widget.ConstraintLayout&amp;gt; ä»Šå›ã®ä¾‹ã§ã¯ã€LinearLayoutManagerã‚’LayoutManagerã¨ã—ã¦ä½¿ã£ã¦ã„ã¾ã™ã€‚ä»–ã®LayoutManagerã®å ´åˆã€ã©ã†ã„ã†æŒ™å‹•ã‚’ã™ã‚‹ã‹åˆ†ã‹ã‚Šã¾ã›ã‚“ã€‚ ã¾ãŸã€ConstraintLayout 2.0.0-beta06ã€RecyclerView 1.1.0ã§è©¦ã—ã¦ã„ã¾ã™ã€‚
ã©ã‚“ãªæŒ™å‹•ã‚’ã™ã‚‹ã‹? ã“ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã¯ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãƒ“ãƒ¥ãƒ¼ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã€ã™ã¹ã¦ã®ã‚¢ã‚¤ãƒ†ãƒ ã‚’ãƒã‚¤ãƒ³ãƒ‰ã—ã‚ˆã†ã¨ã—ã¾ã™ã€‚
ä¾‹ãˆã°500å€‹ã®RecyclerViewã‚¢ã‚¤ãƒ†ãƒ ãŒã‚ã£ãŸã¨ãã«ã€ç”»é¢ã«åã¾ã‚‹ã‹ã©ã†ã‹ã«é–¢ã‚ã‚‰ãš500å€‹ã®ãƒã‚¤ãƒ³ãƒ‰ãŒèµ°ã‚Šã¾ã™ã€‚
with(recycler) { // æ¨ªæ–¹å‘ã®LinearLayoutManager  layoutManager = LinearLayoutManager( this@ConstraintMatchConstraintsActivity, RecyclerView.HORIZONTAL, false ) // 500å€‹ã®ã‚¢ã‚¤ãƒ†ãƒ ã‚’ç”Ÿæˆ  adapter = SampleAdapter().apply { submitList((0..500).map { &amp;#34;$index $it&amp;#34; }) } } private class SampleAdapter : ListAdapter&amp;lt;String, RecyclerView.ViewHolder&amp;gt;(...) { ... override fun onBindViewHolder(holder: RecyclerView.ViewHolder, position: Int) { println(getItem(position)) // ã“ã“ãŒã€0 ~ 500ã¾ã§è¡¨ç¤ºã•ã‚Œã‚‹  } } 500å€‹å…¨éƒ¨ã«å¯¾ã—ã¦ã€æœ€åˆã«ãƒã‚¤ãƒ³ãƒ‰ãŒèµ°ã‚‹ã®ã¯éåŠ¹ç‡ãªã®ã§è‰¯ããªã„ã§ã™ğŸ˜‚</description>
    </item>
    
    <item>
      <title>Jetpack Compose: Ambientã‚’ä½¿ã£ã¦ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’æ³¨å…¥ã€å–å¾—ã™ã‚‹</title>
      <link>https://satoshun.github.io/2020/03/compose-ambient/</link>
      <pubDate>Thu, 05 Mar 2020 10:38:47 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2020/03/compose-ambient/</guid>
      <description>ã“ã‚“ã«ã¡ã‚ã£ãµã‚‹ğŸ°
ä»Šå›ã¯ã€Composeã«ã‚ã‚‹Ambientã‚’èª¬æ˜ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚ã“ã®è¨˜äº‹ã¯dev06ã§æ¤œè¨¼ã—ã¦ã„ã¾ã™ã€‚
å‰æãƒ»èª²é¡Œ ä¸€èˆ¬çš„ã«ã€Composableãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ãƒ‡ãƒ¼ã‚¿ã‚’æ¸¡ã™ã¨ãã€é–¢æ•°ã®å¼•æ•°ã‹ã‚‰æ¸¡ã—ã¾ã™ã€‚
@Composable fun MyView(someData: Data) { ... } ã“ã‚ŒãŒã‚·ãƒ³ãƒ—ãƒ« ã‹ã¤ åˆ†ã‹ã‚Šã‚„ã™ã„æ–¹æ³•ã§ã™ã€‚ ã—ã‹ã—ã€ä¸­é–“ã«å¤šãã®Composableãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã‚ã‚‹å ´åˆã€å…¨ã¦ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å¼•æ•°ã§ãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚Šã€ã•ã‚‰ã«æ¸¡ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯å°‘ã€…é¢å€’ã§å†—é•·ã§ã™ã€‚
ã“ã“ã§ã€Ambientã‚’ä½¿ã†ã¨ã™ã£ãã‚Šã¨æ›¸ãã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
Ambientã‚’ä½¿ã† ã¾ãšã€æœ€åˆã«Ambientã®å®šç¾©ã‚’ã—ã¾ã™ã€‚Ambientã®å®šç¾©ã¯ambientOfãƒ¡ã‚½ãƒƒãƒ‰ã‹ã‚‰è¡Œãˆã¾ã™ã€‚
ä»Šå›ã¯ä¾‹ã¨ã—ã¦ã€ExampleViewModelã‚’Ambientã§å®šç¾©ã—ã¦ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰ä½¿ç”¨ã—ã¾ã™ã€‚
ã¾ãšã€å®šç¾©ã‚’è¡Œã„ã¾ã™ã€‚
val exampleViewModelAmbient = ambientOf&amp;lt;ExampleViewModel&amp;gt;() ã“ã‚Œã§å®šç¾©ã¯å®Œäº†ã§ã™ã€‚ambientOfãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã™ã ã‘ã§ã™ã€‚
æ¬¡ã«ã€ã“ã‚Œã‚’ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰ä½¿ã£ã¦ã¿ã¾ã™ã€‚
val exampleViewModelAmbient = ambientOf&amp;lt;ExampleViewModel&amp;gt;() @Composable fun ExampleApp() { val viewModel = ExampleViewModel() Providers(exampleViewModelAmbient provides viewModel) { MyView() } } @Composable private fun MyView() { val viewModel = exampleViewModelAmbient.current ... } ã“ã‚Œã§å®Œäº†ã§ã™ã€‚ã‚³ãƒ¼ãƒ‰ã‚’èª¬æ˜ã—ã¦ãã¾ã™ã€‚
 Providers(exampleViewModelAmbient provides viewModel)
Ambientã«å¯¾ã—ã¦å€¤ã‚’æ³¨å…¥ã—ã¦ã„ã¾ã™ã€‚ã“ã®å ´åˆã€å®šç¾©ã—ãŸexampleViewModelAmbientã«ã€ExampleViewModelã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’æ³¨å…¥ã€ã‚»ãƒƒãƒˆã—ã¦ã„ã¾ã™ã€‚
 val viewModel = exampleViewModelAmbient.current
æ³¨å…¥ã—ãŸå€¤ã¯ .current ã‹ã‚‰å–å¾—ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚ã“ã®å ´åˆã€ä¸Šè¨˜ã§ç”Ÿæˆã—ãŸExampleViewModelã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®å€¤ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚</description>
    </item>
    
    <item>
      <title>Jetpack Compose: Modelã¨state</title>
      <link>https://satoshun.github.io/2020/02/compose-model-state/</link>
      <pubDate>Sat, 29 Feb 2020 23:32:01 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2020/02/compose-model-state/</guid>
      <description>Jetpack Composeã®ãƒ‡ãƒ¼ã‚¿ç›£è¦–æ–¹æ³•ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã™ã€‚
state ã¾ãšã€stateãƒ¡ã‚½ãƒƒãƒ‰ã®ç´¹ä»‹ã‚’ã—ã¾ã™ã€‚
stateãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†ã¨å€¤ã‚’ç›£è¦–ã™ã‚‹ã“ã¨ãŒã§ãã€å€¤ãŒå¤‰æ›´ã•ã‚ŒãŸã¨ãã«è‡ªå‹•ã§å†æ§‹æˆï¼ˆrecompositionï¼‰ã—ã¦ãã‚Œã¾ã™ã€‚
æ¬¡ã®ã‚ˆã†ã«ã€Viewã®çŠ¶æ…‹ã‚’è¡¨ã™ã®ã«ä¾¿åˆ©ã«ä½¿ãˆã¾ã™ã€‚
@Composable fun MyCheckbox() { // åˆæœŸå€¤false  var checked by state { false } Checkbox( checked = checked, onCheckedChange = { // stateã§å®šç¾©ã—ãŸå€¤ã‚’æ›´æ–°ã™ã‚‹ã¨ã€è‡ªå‹•ã§UIã®å†æ§‹æˆï¼ˆrecomposition)ãŒèµ°ã‚‹  checked = it } ) } state { åˆæœŸå€¤ }ã£ã¦æ„Ÿã˜ã§å®šç¾©ã—ã¦ã€ãã®å€¤ã‚’æ›´æ–°ã™ã‚‹ã¨UIã®å†æ§‹æˆã‚’ã—ã¦ãã‚Œã¾ã™ã€‚
ã“ã®ä¾‹ã®å ´åˆã€CheckboxãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã‚‹ã¨ã€checkedã®çŠ¶æ…‹ãŒå¤‰ã‚ã‚Šã€ViewãŒå†æ§‹æˆã•ã‚Œã¾ã™ã€‚
Model æ¬¡ã«Modelã§ã™ã€‚Modelã¯ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚ Modelã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã¤ã‘ãŸã‚¯ãƒ©ã‚¹ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒç›£è¦–å¯¾è±¡ã«ãªã‚Šã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒæ›´æ–°ã•ã‚ŒãŸã¨ãã«è‡ªå‹•ã§å†æ§‹æˆã—ã¦ãã‚Œã¾ã™ã€‚
ä¾‹ãˆã°ã€ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã‚«ã‚¦ãƒ³ãƒˆã‚’ä¿æŒã™ã‚‹Modelã¯æ¬¡ã®ã‚ˆã†ã«ä½œã‚Šã¾ã™ã€‚
@Model class Count( var count: Int = 0 ) @Composable fun MyText() { // Modelã®å®šç¾©ã€‚å¼•æ•°ã‹ã‚‰æ¸¡ã™ã“ã¨ã‚‚ã‚ã‚‹  val count = Count() Ripple(bounded = false) { Clickable(onClick = { // Modelã®å€¤ã‚’æ›´æ–°ã™ã‚‹ã¨ã€è‡ªå‹•ã§å†æ§‹æˆï¼ˆrecomposition)ãŒèµ°ã‚‹  count.</description>
    </item>
    
    <item>
      <title>Android: findViewTreeLifecycleOwnerã§Viewã‹ã‚‰LifecycleOwnerã‚’å–å¾—ã™ã‚‹</title>
      <link>https://satoshun.github.io/2020/02/jetpack-find-view-tree-lifecycle-owner/</link>
      <pubDate>Sun, 23 Feb 2020 01:50:36 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2020/02/jetpack-find-view-tree-lifecycle-owner/</guid>
      <description>lifecycle-2.3.0ã«ã€Viewã‹ã‚‰LifecycleOwnerã‚’å–å¾—ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ãŒè¿½åŠ ã•ã‚Œãã†ãªã®ã§ã€ãã‚Œã®ãƒ¡ãƒ¢ã€‚
ã¾ã 2.3.0-alphaã¯ãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã„ãªã„ã®ã§ã€androidxã®SNAPSHOTã§è©¦ã—ã¾ã™ã€‚ SNAPSHOTã®ä½¿ã„æ–¹ã¯ã€Using AndroidX Snapshot Buildsã‚’å‚è€ƒã«ã—ã¾ã—ãŸã€‚
ä½¿ã„æ–¹ é–¢æ•°ã®å®šç¾©ã¨ä½¿ã„æ–¹ã«ãªã‚Šã¾ã™ã€‚
// é–¢æ•°ã®å®šç¾© fun View.findViewTreeLifecycleOwner(): LifecycleOwner? // ä½¿ã„æ–¹ val owner = view.findViewTreeLifecycleOwner() // ä½¿ã„æ–¹ + Coroutine view.findViewTreeLifecycleOwner()?.lifecycleScope?.launch { ... } Viewã«æ‹¡å¼µé–¢æ•°ãŒå®šç¾©ã•ã‚Œã¦ãŠã‚Šã€ãã“ã‹ã‚‰ä½¿ã†ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
Fragmentã§ç”Ÿæˆã—ãŸViewã‹ã‚‰findViewTreeLifecycleOwnerã‚’ã—ãŸå ´åˆã«ã¯ã€ Fragmentã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãŒå–å¾—å‡ºæ¥ã‚‹ã®ã§ã€é©åˆ‡ãªãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚’ä½¿ã†ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
å†…éƒ¨å®Ÿè£… ã‚·ãƒ³ãƒ—ãƒ«ãªä½œã‚Šã«ãªã£ã¦ãŠã‚Šã€Viewã®ã‚¿ã‚°ã«Activityã‚„Fragmentã®LifecycleOwnerã‚’ç™»éŒ²ã—ã¦ã„ã¾ã™ã€‚
public class ViewTreeLifecycleOwner { public static void set(@NonNull View view, @Nullable LifecycleOwner lifecycleOwner) { view.setTag(R.id.view_tree_lifecycle_owner, lifecycleOwner); } @Nullable public static LifecycleOwner get(@NonNull View view) { LifecycleOwner found = (LifecycleOwner) view.getTag(R.id.view_tree_lifecycle_owner); ... } } ã˜ã‚ƒã‚setã¯ã©ã“ã‹ã‚‰è¡Œã‚ã‚Œã‚‹ã‹ã¨ã„ã†ã¨ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªå´ã§è‡ªå‹•çš„ã«è¡Œã‚ã‚Œã¾ã™ã€‚ãªã®ã§ã€æ˜ç¤ºçš„ã«setã‚’å‘¼ã³å‡ºã™å¿…è¦ã¯ç‰¹ã«ã‚ã‚Šã¾ã›ã‚“ã€‚ å…·ä½“çš„ã«ã¯ã€Fragmentã¨ComponentActivityã‚’ç¶™æ‰¿ã—ã¦ã„ã‚Œã°Viewã‚’ç”Ÿæˆã—ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã€è‡ªå‹•ã§ã‚»ãƒƒãƒˆã—ã¦ãã‚Œã¾ã™ã€‚
ãŸã ã—ã€è©¦ã—ãŸSNAPSHOTã ã¨AppCompatActivityã®ç¶™æ‰¿ã®å ´åˆã€è‡ªå‹•ã§LifecycleOwnerãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã§ã—ãŸã€‚ ç¾çŠ¶ã ã¨ã€AppCompatActivityã®ç¶™æ‰¿ã®å ´åˆã¯æ‰‹å‹•ã§LifecycleOwnerã‚’ç™»éŒ²ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
override fun onCreate(savedInstanceState: Bundle?</description>
    </item>
    
    <item>
      <title>Fragmentã§Viewã®å‚ç…§ã‚’æŒã¤ã¨ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ã™ã‚‹è©±ã¨å®Ÿè£…</title>
      <link>https://satoshun.github.io/2020/01/fragment-view-memory-leak/</link>
      <pubDate>Sat, 18 Jan 2020 13:09:08 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2020/01/fragment-view-memory-leak/</guid>
      <description>View Bindingã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒæ›´æ–°ã•ã‚Œã€onDestroyViewã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ä¿æŒã—ã¦ã„ã‚‹Bindingã®å‚ç…§ã‚’è§£æ”¾ã™ã‚‹ç¯€ãŒè¿½è¨˜ã•ã‚Œã¾ã—ãŸã€‚
Use view binding in fragments
Fragmentè‡ªä½“ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã®ã»ã†ãŒã€Fragmentã®Viewã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚ˆã‚Šé•·ã„ã®ã§ã€Fragmentã§Bindingã®å‚ç…§ã‚’ä¿æŒã™ã‚‹ã¨ãƒªãƒ¼ã‚¯ã—ã¦ã—ã¾ã†ãŸã‚ã§ã™ã€‚
ã“ã®è¨˜äº‹ã§ã¯ã€ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ã‚’ã—ãªã„ãŸã‚ã«ã€ã©ã®ã‚ˆã†ãªå®Ÿè£…ãŒè€ƒãˆã‚‰ã‚Œã‚‹ã‹ã‚’ç´¹ä»‹ã—ã¦ã„ãã¾ã™ã€‚
1. onDestoryViewã§è§£æ”¾ã™ã‚‹ å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«è¼‰ã£ã¦ã„ã‚‹æ–¹æ³•ã§ã™ã€‚
// onCreatedViewã§åˆæœŸåŒ– private var _binding: ResultProfileBinding? = null private val binding get() = _binding!! override fun onCreateView( inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle? ): View? { _binding = ResultProfileBinding.inflate(inflater, container, false) val view = binding.root return view } override fun onDestroyView() { _binding = null } onDestroyViewã§å‚ç…§ã‚’è§£æ”¾ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã¾ã™ã€‚ã‚·ãƒ³ãƒ—ãƒ«ã§ã™ãŒã€å†—é•·ãªã®ã‹ãªã¨æ€ã„ã¾ã™ã€‚
2. AACã‚µãƒ³ãƒ—ãƒ«ã§ä½¿ã£ã¦ã„ã‚‹AutoClearedValueã‚’ä½¿ã† takahiromã•ã‚“ã«Twitterã§æ•™ãˆã¦ã‚‚ã‚‰ã£ãŸã‚“ã§ã™ãŒã€AACã‚µãƒ³ãƒ—ãƒ«ã§ã¯Delegationã‚’ä½¿ã£ã¦ã€è‡ªå‹•ã§å‚ç…§ã‚’è§£æ”¾ã—ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚
 DroiKaigiã§ã¯ã€Adapterã¨ã‹æŒã¡ãŸã„å ´åˆã‚‚ã‚ã‚‹ã®ã§ã€AACã®ã‚µãƒ³ãƒ—ãƒ«ã«ã‚ã‚‹AutoCleardValueã«ã—ã¦ã¿ã¾ã—ãŸ https://t.co/IUNmeQLzfB
&amp;mdash; takahirom (@new_runnable) January 17, 2020   æ¬¡ã®ã‚ˆã†ã«ä½¿ã„ã¾ã™ã€‚</description>
    </item>
    
    <item>
      <title>ãƒ¡ãƒ¢ Android: Navigation Component &#43; Toolbar(ActionBar)å‘¨ã‚Šã®ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚“ã§è¦‹ã‚‹</title>
      <link>https://satoshun.github.io/2019/11/navigation-toolbar-internal-code/</link>
      <pubDate>Sat, 30 Nov 2019 06:14:19 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2019/11/navigation-toolbar-internal-code/</guid>
      <description>Navigation Component + Toolbarã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æŒ™å‹•ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸã‹ã£ãŸã®ã§ã€ãã®å‘¨è¾ºã®ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚“ã§ã¿ãŸãƒ¡ãƒ¢ãƒ–ãƒ­ã‚°ã«ãªã‚Šã¾ã™ã€‚
ã“ã®è¨˜äº‹ã®ã‚³ãƒ¼ãƒ‰ã¯ã€æ¬¡ã®ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã«å¾“ã„ã¾ã™ã€‚
/* * Copyright 2018 The Android Open Source Project * * Licensed under the Apache License, Version 2.0 (the &amp;#34;License&amp;#34;); * you may not use this file except in compliance with the License. * You may obtain a copy of the License at * * http://www.apache.org/licenses/LICENSE-2.0 * * Unless required by applicable law or agreed to in writing, software * distributed under the License is distributed on an &amp;#34;AS IS&amp;#34; BASIS, * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</description>
    </item>
    
    <item>
      <title>Android: Navigationã®dialogã‚¿ã‚°å‘¨ã‚Šã®ã‚³ãƒ¼ãƒ‰ã¡ã‚‡ã£ã¨èª­ã‚“ã§ã¿ãŸ</title>
      <link>https://satoshun.github.io/2019/11/navigation-dialog-internal-code/</link>
      <pubDate>Sat, 09 Nov 2019 06:23:13 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2019/11/navigation-dialog-internal-code/</guid>
      <description>Navigation Component 2.1.0ã‹ã‚‰dialogã‚¿ã‚°ãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚ ã©ã‚“ãªæ„Ÿã˜ã§å‡¦ç†ã‚’ã—ã¦ã„ã‚‹ã®ã‹æ°—ã«ãªã£ãŸã®ã§ã€ã–ã£ãã‚Šã¨ãƒ¡ãƒ¢æ›¸ãã€‚
1. abstract Navigatorã‚¯ãƒ©ã‚¹ ã“ã®ã‚¯ãƒ©ã‚¹ã¯æœ€çµ‚çš„ã«ã©ã®ã‚ˆã†ã«ã€å¯¾è±¡ã‚¯ãƒ©ã‚¹ã‚’navigateã•ã‚Œã‚‹ã‹ã‚’æ±ºã‚ã‚‹ã‚¯ãƒ©ã‚¹ã§ã™ã€‚ Activityãªã‚‰ã€ActivityNavigatorã€‚Fragmentãªã‚‰FragmentNavigatorãŒä½¿ã‚ã‚Œã¾ã™ã€‚ dialogã®å ´åˆã¯ã€DialogFragmentNavigatorçµŒç”±ã§dialogãŒç™ºç«ã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚
2. NavInlaterã§dialogã‚¿ã‚°ã®å ´åˆã€DialogFragmentNavigatorã‚’ä½¿ã†ã‚ˆã†ã«ã—ã¦ã„ã‚‹ NavInflaterã¯å˜ç´”ãªXMLãƒ‘ãƒ¼ã‚µãƒ¼ã«ãªã£ã¦ã„ã¾ã™ã€‚&amp;lt;dialog &amp;hellip;&amp;gt; ã‚’ç™ºè¦‹ã—ãŸã‚‰ã€DialogFragmentNavigatorã‹ã‚‰NavDestinationã‚’ä½œæˆã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚ ã“ã®NavDestinationã¯å®Ÿéš›ã«ã‚³ãƒ¼ãƒ«ã•ã‚Œã‚‹ã¨ãã«ã€DialogFragmentNavigatorã‚’å‘¼ã³å‡ºã™ã‚ˆã†ãªä»•çµ„ã¿ãªã£ã¦ã„ã¾ã™ã€‚
3. DialogFragmentNavigatorã®ä¸­èº« ä¸€éƒ¨åˆ†ã‚’æŠœç²‹ã—ã¾ã™ã€‚
/* * Copyright 2019 The Android Open Source Project * * Licensed under the Apache License, Version 2.0 (the &amp;#34;License&amp;#34;); * you may not use this file except in compliance with the License. * You may obtain a copy of the License at * * http://www.apache.org/licenses/LICENSE-2.0 * * Unless required by applicable law or agreed to in writing, software * distributed under the License is distributed on an &amp;#34;AS IS&amp;#34; BASIS, * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</description>
    </item>
    
    <item>
      <title>ViewPager2ã§è¦ç´ ã‚’ãƒ«ãƒ¼ãƒ—ã•ã›ã‚‹</title>
      <link>https://satoshun.github.io/2019/10/viewpager2-loop/</link>
      <pubDate>Sun, 13 Oct 2019 05:23:44 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2019/10/viewpager2-loop/</guid>
      <description>ViewPager2ã§è¦ç´ ã‚’ãƒ«ãƒ¼ãƒ—ã•ã›ã‚‹æ–¹æ³•ã®ç´¹ä»‹ã§ã™ã€‚ã„ã‚ã‚†ã‚‹å¾ªç’°ãƒªã‚¹ãƒˆã§ã™ã€‚
ViewPager2ã§ã¯RecyclerViewã‚’ä½¿ã†ã“ã¨ãŒå‡ºæ¥ã‚‹ã®ã§ã€RecyclerViewã¨åŒã˜ã‚ˆã†ãªå®Ÿè£…ã§å®Ÿç¾ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
æœ€çµ‚çš„ã«ã“ã‚“ãªã®ãŒä½œã‚Œã¾ã™ã€‚ï¼ˆaã€bã€cã®è¦ç´ ã§ãƒ«ãƒ¼ãƒ—ã—ã¦ã„ã‚‹ï¼‰
  ä»Šå›ã®æ¤œè¨¼ã«ç”¨ã„ãŸã‚³ãƒ¼ãƒ‰ã¯ã€satoshun/ViewPager2ã«ã‚ã‚Šã¾ã™ğŸ˜ƒ
ã§ã¯ã€ã‚³ãƒ¼ãƒ‰ã‚’èª¬æ˜ã—ã¦ã„ãã¾ã™ã€‚ä»Šå›ã¯ã€1ã¤ã®ViewTypeã‚’æ‰±ã„ã¾ã™ã€‚
å®Ÿéš›ã®ã‚³ãƒ¼ãƒ‰ ã¾ãšã€RecyclerView.Adapterã®ã‚µã‚¤ã‚ºã‚’æ±ºã‚ã‚‹getItemCountãƒ¡ã‚½ãƒƒãƒ‰ã®å®Ÿè£…ã§ã™ã€‚ é™ã‚Šãªãå¤§ãã„å€¤ã€Int.MAX_VALUEã‚’è¿”ã—ã¾ã™ã€‚
override fun getItemCount(): Int = Int.MAX_VALUE æ¬¡ã«ã€onBindViewHolderãƒ¡ã‚½ãƒƒãƒ‰ã‚’æ¬¡ã®ã‚ˆã†ã«å®Ÿè£…ã—ã¾ã™ã€‚
private val itemData: List&amp;lt;Data&amp;gt; override fun onBindViewHolder(holder: InfiniteViewHolder, position: Int) { val data = itemData[position % itemData.size] ... } itemDataã«ã¯Viewã®ç”Ÿæˆã«å¿…è¦ãªå®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿ãŒå…¥ã£ã¦ã„ã¾ã™ã€‚position % itemData.sizeã¨indexã‚’å–ã‚‹ã“ã¨ã§ã€ãƒ«ãƒ¼ãƒ—ä¸­ã®ã©ã“ã®ä½ç½®ã«ã„ã‚‹ã‹ã‚’ç‰¹å®šã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
æœ€çµ‚çš„ãªã€RecyclerView.Adapterã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ï¼ˆonCreateViewHolderãƒ¡ã‚½ãƒƒãƒ‰ã¯é‡è¦ã§ãªã„ã®ã§ã€çœç•¥ã—ã¦ã„ã¾ã™ï¼‰
class InfiniteAdapter( private val itemData: List&amp;lt;Data&amp;gt; ) : RecyclerView.Adapter&amp;lt;InfiniteViewHolder&amp;gt;() { override fun getItemCount(): Int = Int.MAX_VALUE override fun onCreateViewHolder(parent: ViewGroup, viewType: Int) = ... override fun onBindViewHolder(holder: InfiniteViewHolder, position: Int) { val data = itemData[position % itemData.</description>
    </item>
    
    <item>
      <title>ViewPager2ã§ã‚«ãƒ«ãƒ¼ã‚»ãƒ«ã£ã½ã„ã‚‚ã®ã‚’å®Ÿè£…ã™ã‚‹</title>
      <link>https://satoshun.github.io/2019/08/viewpager2-like-a-carousel/</link>
      <pubDate>Thu, 29 Aug 2019 13:29:06 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2019/08/viewpager2-like-a-carousel/</guid>
      <description>æ¨ªã®ã‚¢ã‚¤ãƒ†ãƒ ã‚’ãƒãƒ©è¦‹ã›ã™ã‚‹ç”»é¢ã‚’ViewPager2ã§æ›¸ã‘ã‚‹ã‚ˆã£ã¦è©±ã§ã™ã€‚
æœ€çµ‚çš„ã«ã“ã‚“ãªã®ãŒä½œã‚Œã¾ã™ã€‚
  ã§ã¯ã€ã‚³ãƒ¼ãƒ‰ã‚’èª¬æ˜ã—ã¦ã„ãã¾ã™ã€‚
1. æ¨ªã®ã‚¢ã‚¤ãƒ†ãƒ ã‚’ãƒãƒ©è¦‹ã›ã™ã‚‹ ã¾ãšã€ViewPager2ã‚’Layoutå†…ã«å®šç¾©ã—ã¾ã™ã€‚
&amp;lt;androidx.viewpager2.widget.ViewPager2 android:id=&amp;#34;@+id/viewpager&amp;#34; android:layout_width=&amp;#34;match_parent&amp;#34; android:layout_height=&amp;#34;200dp&amp;#34; android:orientation=&amp;#34;horizontal&amp;#34; /&amp;gt; æ¬¡ã«ã€æ¨ªã®ã‚¢ã‚¤ãƒ†ãƒ ã‚’ã©ã‚Œã ã‘ãƒãƒ©è¦‹ã›ã‚‹ã‹ã‚’å®šç¾©ã—ã¾ã™ã€‚
&amp;lt;dimen name=&amp;#34;offset&amp;#34;&amp;gt;32dp&amp;lt;/dimen&amp;gt; æ¬¡ã«ã€å„ã‚¢ã‚¤ãƒ†ãƒ é–“ã«ã©ã‚Œã ã‘ã®ãƒãƒ¼ã‚¸ãƒ³ã‚’ã¤ã‘ã‚‹ã‹ã‚’å®šç¾©ã—ã¾ã™ã€‚
&amp;lt;dimen name=&amp;#34;page_margin&amp;#34;&amp;gt;16dp&amp;lt;/dimen&amp;gt; æ¬¡ã«ã€ViewPager2å†…ã§ä½¿ã†ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã®Viewã«marginLeftã€Rightã‚’ã‚»ãƒƒãƒˆã—ã¾ã™ã€‚
&amp;lt;com.google.android.material.card.MaterialCardView android:layout_width=&amp;#34;match_parent&amp;#34; android:layout_height=&amp;#34;match_parent&amp;#34; android:layout_marginLeft=&amp;#34;48dp&amp;#34; // ã“ã‚Œã¯ã€offset + page_marginã®å€¤ android:layout_marginRight=&amp;#34;48dp&amp;#34; app:cardCornerRadius=&amp;#34;16dp&amp;#34;&amp;gt; ... marginã«ã¯å‰ã§å®šç¾©ã—ãŸoffsetã€page_marginã‚’è¶³ã—åˆã‚ã›ãŸã‚‚ã®ã‚’æŒ‡å®šã—ã¾ã™ã€‚
ãã—ã¦ã€æœ€å¾Œã«PageTransformerã‚’è¨­å®šã—ã¾ã™ã€‚
viewpager.offscreenPageLimit = 2 // ã“ã‚Œã¯å·¦å³ã®ã‚¢ã‚¤ãƒ†ãƒ ã‚’æç”»ã™ã‚‹ãŸã‚ã«å¿…è¦  val pageMarginPx = root.context.resources.getDimensionPixelOffset(R.dimen.page_margin) val offsetPx = root.context.resources.getDimensionPixelOffset(R.dimen.offset) viewpager.setPageTransformer { page, position -&amp;gt; val offset = position * (2 * offsetPx + pageMarginPx) page.translationX = -offset } PageTransformerã¯ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã«å¿œã˜ã¦ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã•ã‚Œã‚‹é–¢æ•°ã«ãªã‚Šã¾ã™ã€‚ ã“ã®ä¸­ã§ã€translationXã‚’positionã®å€¤ã«å¿œã˜ã¦å‹•ã‹ã™ã“ã¨ã§ã€å·¦å³ã®ã‚¢ã‚¤ãƒ†ãƒ ã®ãƒãƒ©è¦‹ã›ã‚’å®Ÿç¾å‡ºæ¥ã¾ã™ã€‚
2. ã•ã‚‰ã«Scaleã‚‚å¤‰æ›´ã™ã‚‹ å‰è¿°ã—ãŸãƒãƒ©è¦‹ã›PageTransformerã«åŠ ãˆã€Scaleç”¨ã®PageTransformerã‚‚ä½œã‚Šã¾ã™ã€‚</description>
    </item>
    
    <item>
      <title>Android: RestrictToã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®IDEä¸Šã§ã®æŒ¯ã‚‹èˆã„</title>
      <link>https://satoshun.github.io/2019/07/jetpack-annotation-restrict-to/</link>
      <pubDate>Wed, 03 Jul 2019 12:30:11 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2019/07/jetpack-annotation-restrict-to/</guid>
      <description>androidx.annotation:annotationã«ã¯ã€RestrictToã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚¯ãƒ©ã‚¹ãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚ ã“ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã¯æ¬¡ã®ç”¨é€”ã‚’æŒã¡ã¾ã™ã€‚
 Denotes that the annotated element should only be accessed from within a specific scope (as defined by Scope).
 æŒ‡å®šã—ãŸScopeä»¥å¤–ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’åˆ¶é™ã™ã‚‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚
ã“ã®è¨˜äº‹ã§ã¯ã€ã“ã®RestrictToã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãŒã¤ã„ãŸã‚¯ãƒ©ã‚¹ã«æ§˜ã€…ãªå ´æ‰€ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã¨ãã«ã€ã©ã®ã‚ˆã†ã«IDEä¸Šã§è­¦å‘ŠãŒå‡ºã‚‹ã‹ã«ã¤ã„ã¦è¦‹ã¦ã„ãã¾ã™ã€‚
ã¾ãŸã€Android Studio 3.5.0-beta05ã§æ¤œè¨¼ã—ã¾ã—ãŸã€‚
ã“ã®è¨˜äº‹å†…ã«å‡ºã¦ãã‚‹RestrictToé–¢é€£ã®ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã«å¾“ã„ã¾ã™ã€‚
/* * Copyright (C) 2016 The Android Open Source Project * * Licensed under the Apache License, Version 2.0 (the &amp;#34;License&amp;#34;); * you may not use this file except in compliance with the License. * You may obtain a copy of the License at * * http://www.</description>
    </item>
    
    <item>
      <title>ViewModel SavedState &#43; Dagger</title>
      <link>https://satoshun.github.io/2019/05/viewmodel-savedstate-dagger/</link>
      <pubDate>Sat, 25 May 2019 10:38:15 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2019/05/viewmodel-savedstate-dagger/</guid>
      <description>ViewModel + SavedStateã§Daggerã‚’ä½¿ã†æ–¹æ³•ã‚’è€ƒãˆã¦ã¿ã¾ã—ãŸã€‚
å‰æçŸ¥è­˜ãƒ»èª²é¡Œ SavedStateã‚’ä½¿ã†å ´åˆã€ViewModelã«SavedStateHandleã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’æ¸¡ã•ãªã‘ã‚Œã°ã„ã‘ã¾ã›ã‚“ã€‚
class MyViewModel( private val state: SavedStateHandle ) : ViewModel() { ... } SavedStateHandleã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œã‚‹ãŸã‚ã«ã€SavedStateVMFactoryã‚‚ã—ãã¯ã€AbstractSavedStateVMFactoryã‚’ä½¿ã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ç”Ÿæˆã—ãŸã„ViewModelã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã®å¼•æ•°ãŒSavedStateHandleã®ã¿ãªã‚‰ã€SavedStateVMFactoryã‚’ä½¿ã„ã¾ã™ã€‚
// thisã¯FragmentActivity ViewModelProvider(this, MyViewModel(this)) .get(MyViewModel::class.java) ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã®å¼•æ•°ãŒSavedStateHandleä»¥å¤–ã«ã‚‚ã‚ã‚‹ãªã‚‰ã€AbstractSavedStateVMFactoryã‚’æ‹¡å¼µã—ã¾ã™ã€‚
class TestViewModel( private val state: SavedStateHandle, private val name: String ) : ViewModel() class TestViewModelFactory( owner: SavedStateRegistryOwner, defaultArgs: Bundle? = null ) : AbstractSavedStateVMFactory(owner, defaultArgs) { override fun &amp;lt;T : ViewModel&amp;gt; create( key: String, modelClass: Class&amp;lt;T&amp;gt;, handle: SavedStateHandle ): T { return TestViewModel(handle, &amp;#34;test&amp;#34;) as T } } // ä»¥ä¸‹ã€ç”Ÿæˆã‚³ãƒ¼ãƒ‰ ViewModelProvider(this, TestViewModelFactory(this)) .</description>
    </item>
    
    <item>
      <title>é›‘ãƒ¡ãƒ¢: ViewModel SavedStateã®ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°</title>
      <link>https://satoshun.github.io/2019/05/viewmodel-savedstate/</link>
      <pubDate>Tue, 21 May 2019 23:59:53 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2019/05/viewmodel-savedstate/</guid>
      <description>ViewModelã®SavedStateãŒã©ã®ã‚ˆã†ã«å®Ÿç¾ã—ã¦ã„ã‚‹ã®ã‹ã€å†…éƒ¨ã§ã©ã®ã‚ˆã†ã«å‹•ä½œã—ã¦ã„ã‚‹ã®ã‹æ°—ã«ãªã£ãŸã®ã§ã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚“ã§ã¿ã¾ã—ãŸã€‚
ã“ã®è¨˜äº‹ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯å…¨ã¦ã€ä¸‹è¨˜ã®ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã«å¾“ã„ã¾ã™ã€‚
/* * Copyright 2019 The Android Open Source Project * * Licensed under the Apache License, Version 2.0 (the &amp;#34;License&amp;#34;); * you may not use this file except in compliance with the License. * You may obtain a copy of the License at * * http://www.apache.org/licenses/LICENSE-2.0 * * Unless required by applicable law or agreed to in writing, software * distributed under the License is distributed on an &amp;#34;AS IS&amp;#34; BASIS, * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</description>
    </item>
    
    <item>
      <title>ViewPager2 with TabLayout</title>
      <link>https://satoshun.github.io/2019/05/viewpager2-with-tablayout/</link>
      <pubDate>Fri, 17 May 2019 04:08:42 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2019/05/viewpager2-with-tablayout/</guid>
      <description>Material Componentsã§ViewPager2 + TabLayoutã®ã‚³ãƒ¼ãƒ‰ãŒå…¥ã£ãŸã®ã§ãã‚Œã®ç´¹ä»‹ã€‚ã¾ã alphaã¸ã®ãƒªãƒªãƒ¼ã‚¹ã‚‚ã•ã‚Œã¦ã„ãªã„ã®ã§ã€APIã¯å¤§ããå¤‰ã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ãŠãã‚‰ã1.1.0-alpha07ã«å…¥ã£ã¦ãã‚‹ã¨æ€ã„ã¾ã™ã€‚
TabLayoutã¯ViewPagerã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã—ãŸãŒã€ãã‚ŒãŒViewPager2ã«ã‚‚æ¥ãŸã£ã¦æ„Ÿã˜ã§ã™ã€‚
ä½¿ã„æ–¹ æ–°ã—ãè¿½åŠ ã•ã‚ŒãŸTabLayoutMediatorã‚’ä½¿ã„ã¾ã™ã€‚
ã¾ãšã€TabLayoutMediatorã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã—ã¾ã™ã€‚
val viewPager: ViewPager2 = findViewById(R.id.viewpager) val tabLayout: TabLayout = findViewById(R.id.tab) val mediator = TabLayoutMediator(tabLayout, viewPager) { tab: TabLayout.Tab, position: Int -&amp;gt; tab.text = &amp;#34;test $position&amp;#34; // ã‚¿ãƒ–ã«ã‚¿ã‚¤ãƒˆãƒ«ã‚’ã‚»ãƒƒãƒˆ } ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã«ã¯ã€TabLayoutã€ViewPager2ã€OnConfigureTabCallbackã‚’æ¸¡ã—ã¾ã™ã€‚ OnConfigureTabCallbackã¯ã€tabã¨positionã‚’å—ã‘å–ã‚Šã€tabã«å¯¾ã—ã¦ã€ã‚¿ã‚¤ãƒˆãƒ«ã‚’ã‚»ãƒƒãƒˆã—ã¾ã™ã€‚ ViewPagerã®PageAdapterã¨ã¯é•ã„ã€RecyclerViewã®Adapterã‹ã‚‰ã¯ã‚¿ã‚¤ãƒˆãƒ«ã‚’å–å¾—ã§ããªã„ã®ã§ã€ã“ã®ã‚ˆã†ãªå¤‰æ›´ã«ãªã£ãŸã¨æ€ã‚ã‚Œã¾ã™ã€‚
æœ€å¾Œã«attaché–¢æ•°ã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚
mediator.attach() ã“ã‚Œã§ã€ViewPager2 + TabLayoutã‚’å®Ÿç¾ã§ãã¾ã™ã€‚ã¨ã¦ã‚‚ç°¡å˜ï¼ï¼
ã¾ã¨ã‚  ViewPager2ã‚‚ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ãŒæ•´ã„ã¤ã¤ã‚ã‚‹ğŸ˜Š ä»Šå›è©¦ã—ãŸã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯ satoshun-android-example/ViewPager2ã«ã‚ã‚Šã¾ã™ğŸ˜ƒ  </description>
    </item>
    
    <item>
      <title>Data Binding 3.5ã¨3.6ã®ã¾ã¨ã‚/æ„Ÿæƒ³</title>
      <link>https://satoshun.github.io/2019/05/databinding-3dot5/</link>
      <pubDate>Thu, 16 May 2019 00:33:48 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2019/05/databinding-3dot5/</guid>
      <description>Google I/O 2019ã§DataBindingã«ã¤ã„ã¦å°‘ã—è©±ã•ã‚Œã¦ã„ãŸã®ã§æ„Ÿæƒ³ã¨ã¾ã¨ã‚ã‚’ã€‚ å‹•ç”»ã ã¨ã“ã“ã‚‰ã¸ã‚“ã«ãªã‚Šã¾ã™ã€‚
æ”¹å–„ç³» ãƒ“ãƒ«ãƒ‰ã®é«˜é€ŸåŒ–!  20%ãã‚‰ã„ãƒ“ãƒ«ãƒ‰ãŒæ—©ããªã£ãŸ distributed build cacheå¯¾å¿œ Incremental annotation processingå¯¾å¿œ  android.databinding.incremental=true ã‚’è¨­å®šã«ã™ã‚‹ã¨ä½¿ãˆã¾ã™    Android Studioã¨ã®é€£æºå¼·åŒ–!!  Live Class Generation  XMLã‚’å¤‰æ›´ã—ãŸã‚‰ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã›ãšã¨ã‚‚ã‚¯ãƒ©ã‚¹ã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹   ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ç³»  ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã®å¤‰æ›´ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ãªã©ã‚’ã—ãŸã¨ãã«ã€XMLã€ã‚³ãƒ¼ãƒ‰ã®ä¸¡æ–¹ã«åæ˜ ã•ã‚Œã‚‹    Errorãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æ”¹å–„!!!  DataBindingç”¨ã®ã‚¨ãƒ©ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒå‡ºæ¥ãŸã“ã¨ã§ã€ã©ã“ã§ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸã‹ç‰¹å®šã—ã‚„ã™ããªã£ãŸ    æ–°è¦ç³» View Binding ç°¡æ˜“ç‰ˆData Bindingã®ã‚ˆã†ãªç«‹ã¡ä½ç½®ã§ã€findViewByIdã‚’çœç•¥ + ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚»ãƒ¼ãƒ• + ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚’é«˜é€Ÿã«ã™ã‚‹ã“ã¨ã‚’ç›®çš„ã«ä½œã‚‰ã‚Œã¾ã—ãŸã€‚3.6ã§å…¥ã‚‹ã¿ãŸã„ã§ã™ã€‚
  Data Bindingã¨æ¯”è¼ƒã—ãŸã¨ãã®ã€ãƒ¡ãƒªãƒƒãƒˆã€ãƒ‡ãƒ¡ãƒªãƒƒãƒˆä»¥ä¸‹ã«ãªã‚Šã¾ã™ã€‚ï¼ˆãŸã ã—ã€ã¾ã alphaã‚‚å‡ºã¦ã„ãªã„æ®µéšãªã®ã§I/Oå‹•ç”»ã‹ã‚‰è¦‹ã‚‹é™ã‚Šã®æ„Ÿæƒ³ã§ã™ï¼‰
ãƒ¡ãƒªãƒƒãƒˆ  ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãŒæ—©ããªã‚‹  Data Bindingã‚ˆã‚Šæ©Ÿèƒ½ãŒå°‘ãªããªã‚‹ã®ã§ãã‚Œã¯ãã†   &amp;lt;layout&amp;gt;ã§å›²ã†å¿…è¦ãŒãªããªã£ãŸ  ã“ã‚Œå€‹äººçš„ã«ã¯å¥½ãã§ãªã‹ã£ãŸã®ã§å¬‰ã—ã„ã€‚ãƒã‚¹ãƒˆãŒæ¸›ã‚‹    ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ  &amp;lt;data&amp;gt;ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒãªããªã‚‹  ãƒ¢ãƒ‡ãƒ«ã®å€¤ã¨Viewã®ãƒãƒƒãƒ”ãƒ³ã‚°ã¯ã‚³ãƒ¼ãƒ‰å´ã§ã™ã‚‹ã“ã¨ã«ãªã‚Šãã†   å¤šåˆ†BindingAdapterã¯ä½¿ãˆãªã„  ã“ã‚Œã‚‚ã‚³ãƒ¼ãƒ‰å´ã§ã™ã‚‹ã“ã¨ã«ãªã‚Šãã†   åŒæ–¹å‘ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã¨ã‹ä½¿ãˆãªã„  ãŠãã‚‰ããªã‚“ã§ã™ã‘ã©ã€Data Bindingã€View Bindingã¯1ã¤ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«æ··åœ¨ã•ã›ã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹ã®ã§ã€åŸºæœ¬View Bindingã§ã€åŒæ–¹å‘ä½¿ã„ãŸã„ã¨ãã¯Data Bindingã¿ãŸã„ãªä½¿ã„æ–¹ã‚‚å‡ºæ¥ã‚‹ã¯ãšã§ã™ã€‚</description>
    </item>
    
    <item>
      <title>CameraX: CameraViewè§¦ã£ã¦ã¿ãŸ</title>
      <link>https://satoshun.github.io/2019/05/camerax-camera-view/</link>
      <pubDate>Mon, 06 May 2019 05:47:14 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2019/05/camerax-camera-view/</guid>
      <description>CameraXã®ã‚³ãƒ¼ãƒ‰ãŒå…¬é–‹ã•ã‚Œã¦ã„ãŸã®ã§ã€ãã®ä¸­ã«ã‚ã£ãŸCameraViewã‚’è§¦ã£ã¦ã¿ã¾ã—ãŸã€‚ã¾ã ã€alphaã§ã‚ã‚‹ã“ã¨ã‹ã‚‰APIã¯å¤§ããå¤‰ã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚
å†…éƒ¨ã®å®Ÿè£…ã§ã‚ã£ãŸã‚Šã€ç´°ã‹ã„éƒ¨åˆ†ã¯psideã•ã‚“ã®ã€ŒCameraXã®ã‚³ãƒ¼ãƒ‰ãŒããŸã®ã§æ°—åˆã„å…¥ã‚Œã¦èª­ã‚“ã§ã¿ãŸã€ãŒè©³ã—ã„ã§ã™ã€‚
ç’°å¢ƒæ§‹ç¯‰ CameraViewã¯ã¾ã å…¬é–‹ã•ã‚Œã¦ã„ãªã„ãŸã‚ã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ãƒ“ãƒ«ãƒ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã¾ãŸã€è¨­å®šã§publishãƒ•ãƒ©ã‚°ãŒfalseã«ãªã£ã¦ã„ã‚‹ã®ã§ã€trueã«ã—ã¦ãƒ“ãƒ«ãƒ‰ã—ã¾ã™ã€‚
 androidx { name = &amp;quot;Jetpack Camera View Library&amp;quot; - publish = false + publish = true mavenVersion = LibraryVersions.CAMERA mavenGroup = LibraryGroups.CAMERA inceptionYear = &amp;quot;2019&amp;quot; } ä½¿ã„æ–¹ CameraViewã¯æ™®é€šã®Viewã®ã‚ˆã†ã«ä½¿ã†ã“ã¨ãŒã§ãã¾ã™ã€‚
&amp;lt;androidx.constraintlayout.widget.ConstraintLayout ...&amp;gt; &amp;lt;androidx.camera.view.CameraView android:layout_width=&amp;#34;0dp&amp;#34; android:layout_height=&amp;#34;0dp&amp;#34; app:layout_constraintBottom_toBottomOf=&amp;#34;parent&amp;#34; app:layout_constraintEnd_toEndOf=&amp;#34;parent&amp;#34; app:layout_constraintStart_toStartOf=&amp;#34;parent&amp;#34; app:layout_constraintTop_toTopOf=&amp;#34;parent&amp;#34; /&amp;gt; &amp;lt;/androidx.constraintlayout.widget.ConstraintLayout&amp;gt; æ¬¡ã«åˆæœŸåŒ–ã‚’ã—ã¾ã™ã€‚
cameraView.bindToLifecycle(this) // thisã¯LifecycleOwner LifecycleOwnerã¨CameraViewã‚’çµã³ã¤ã‘ã‚‹ã“ã¨ã§Lifecycleã«åˆã‚ã›ã¦è‡ªå‹•ã§ãƒªã‚½ãƒ¼ã‚¹ã‚’èª¿æ•´ã—ã¦ãã‚Œã¾ã™ã€‚ CameraViewã¯Lifecycle-Aware Componentã¨ãªã£ã¦ã„ã¾ã™ã€‚éå¸¸ã«æ‰±ã„ã‚„ã™ãã†ã§ã™ã€‚
ã“ã‚Œã ã‘ã§ã‚«ãƒ¡ãƒ©æ©Ÿèƒ½ãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼ã¨ã¦ã‚‚ç°¡å˜ï¼!
ä»¥ä¸‹ã€CameraViewã§ç¾çŠ¶ä½¿ãˆã‚‹APIã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã™ã€‚
CameraViewã§ä½¿ãˆã‚‹APIé” ãƒ¢ãƒ¼ãƒ‰ã®å¤‰æ›´ CameraViewã§ã¯æ¬¡ã®3ã¤ã®ãƒ¢ãƒ¼ãƒ‰ãŒã‚ã‚Šã¾ã™ã€‚
 Image: å†™çœŸã‚’å–ã‚‹ Video: ãƒ“ãƒ‡ã‚ªã‚’å–ã‚‹ Mixed: ä¸¡æ–¹ã€‚ãŸã ã—ã€å‹•ã‹ãªã„ç«¯æœ«ã‚‚ã‚ã‚‹ã‚‰ã—ã„  æ¬¡ã®ã‚ˆã†ã«ä½¿ã„ã¾ã™ã€‚
// Image cameraView.captureMode = CameraView.CaptureMode.IMAGE cameraView.</description>
    </item>
    
    <item>
      <title>DataBindingã¨Activityã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ Layout IdæŒ‡å®šã‚’ä¸€ç·’ã«ä½¿ã†</title>
      <link>https://satoshun.github.io/2019/04/jetpack-coroutine-support/</link>
      <pubDate>Thu, 04 Apr 2019 00:46:00 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2019/04/jetpack-coroutine-support/</guid>
      <description>Jetpackã®Activityã¨Fragmentã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã«ã€Layout IdãŒæŒ‡å®šã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚
 Activity Version 1.0.0-alpha06 Fragment Version 1.1.0-alpha06  ã“ã‚Œã¯ã€æ¬¡ã®ã‚ˆã†ã«ä½¿ã†ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
class MainActivity : AppCompatActivity(R.layout.main_act) class MainFragment : Fragment(R.layout.main_frag) Activityã®å ´åˆã¯ã€setConentViewãŒã€‚Fragmentã®å ´åˆã¯onCreateViewãŒãã‚Œãã‚Œçœç•¥ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
ã“ã“ã‹ã‚‰ãŒæœ¬é¡Œã§ã™ã€‚ã“ã‚Œã‚’DataBindingã¨ä¸€ç·’ã«ä½¿ã†ãªã‚‰ã€æ¬¡ã®ã‚ˆã†ã«ãªã‚‹ã‹ãªã¨æ€ã„ã¾ã™ã€‚
Activityã®å ´åˆ ã¾ãšã¯Actvityã®ä¾‹ã§ã™ã€‚
// æ‹¡å¼µé–¢æ•°ã‚’å®šç¾©ã—ã¦ãŠã fun &amp;lt;T : ViewDataBinding&amp;gt; ComponentActivity.bindView(): T = DataBindingUtil.bind(getContentView())!! private fun Activity.getContentView(): View = findViewById&amp;lt;ViewGroup&amp;gt;(android.R.id.content)[0] // MainActivity.kt class MainActivity : AppCompatActivity(R.layout.main_act) { private lateinit var binding: MainActBinding override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) binding = bindView() ... } } ã¾ãŸã€Activityã®å ´åˆã«é™ã‚Šã€by lazyã¨çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚
class MainActivity : AppCompatActivity(R.layout.main_act) { private val binding by lazy { bindView&amp;lt;MainActBinding&amp;gt;() } override fun onCreate(savedInstanceState: Bundle?</description>
    </item>
    
    <item>
      <title>Android: Jetpackã®Coroutine Supportã«ã¤ã„ã¦</title>
      <link>https://satoshun.github.io/2019/03/jetpack-coroutine-support/</link>
      <pubDate>Sun, 10 Mar 2019 10:14:21 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2019/03/jetpack-coroutine-support/</guid>
      <description>Jetpackã®ã„ãã¤ã‹ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã¯ã€Kotlin Coroutineã®ã‚µãƒãƒ¼ãƒˆãŒå…¥ã£ã¦ã„ã¾ã™ãŒã€ ã©ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§å¯¾å¿œãŒé€²ã‚“ã§ã„ã‚‹ã‹æ°—ã«ãªã£ãŸã®ã§ã€è»½ãã¾ã¨ã‚ã¾ã™ã€‚ä½¿ã„æ–¹ã«ã¤ã„ã¦ã¯è¨€åŠã—ã¾ã›ã‚“ã€‚
ä»¥ä¸‹ã€2019å¹´3æœˆ10æ—¥ 2019å¹´3æœˆ11æ—¥ã®èª¿æŸ»çµæœã«ãªã‚Šã¾ã™ã€‚ ã¾ãŸã€ã“ã‚Œã‚‰ã¯ã€supportãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰å–ã£ã¦ããŸã®ã§ã€ç¾åœ¨ãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹ã¯ä¸æ˜ã§ã™ã€‚
Lifecycle
// Lifecycleã«å¾“ã†CoroutineScopeã®ç”Ÿæˆ val Lifecycle.coroutineScope: CoroutineScope LifecycleOwner
// LifecycleOwnerã«å¾“ã†CoroutineScopeã®ç”Ÿæˆ val LifecycleOwner.lifecycleScope: CoroutineScope ViewModel
// ViewModelã«å¾“ã†CoroutineScopeã®ç”Ÿæˆ val ViewModel.viewModelScope: CoroutineScope WorkManager
abstract class CoroutineWorker( appContext: Context, params: WorkerParameters ) : ListenableWorker(appContext, params) { // suspendãƒ¡ã‚½ãƒƒãƒ‰ã§å®šç¾©ã•ã‚ŒãŸ  abstract suspend fun doWork(): Result } Room
// Daoå†…ã§suspendãƒ¡ã‚½ãƒƒãƒ‰ãŒä½¿ãˆã‚‹ @Dao interface HogesDao { @Insert suspend fun add(hoge: Hoge) @Query(&amp;#34;SELECT * FROM hoge WHERE id = :id&amp;#34;) suspend fun get(id: String): Hoge .</description>
    </item>
    
    <item>
      <title>Robolectric &#43; Jetpackã§Activityã®onActivityResultãƒ¡ã‚½ãƒƒãƒ‰ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹</title>
      <link>https://satoshun.github.io/2019/02/androidx-onactivityresult-testing/</link>
      <pubDate>Sat, 23 Feb 2019 02:47:59 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2019/02/androidx-onactivityresult-testing/</guid>
      <description>Robolectric4.xã‹ã‚‰ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆç’°å¢ƒã§ã€android testã¨ï¼ˆã»ã¼?ï¼‰åŒã˜ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’å‹•ã‹ã™ã“ã¨ãŒå¯èƒ½ã«ãªã‚Šã¾ã—ãŸã€‚ ã¾ã ã€å®Œå…¨ã«äº’æ›æ€§ãŒã‚ã‚‹ã¨ã¯ã„ãˆã¾ã›ã‚“ãŒã€Espressoãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒå‹•ãã€AndroidJUnit4ãƒ©ãƒ³ãƒŠãƒ¼ãŒä½¿ãˆã‚‹ãªã©ã€ã‹ãªã‚Šã®éƒ¨åˆ†ãŒå…±é€šåŒ–å‡ºæ¥ã¾ã™ã€‚
ã“ã®è¨˜äº‹ã§ã¯ã€ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã§Activity.onActivityResultã®ãƒ†ã‚¹ãƒˆã‚’ã©ã“ã¾ã§android testã®ã‚ˆã†ã«æ›¸ã‘ã‚‹ã‹ã‚’æ¤œè¨¼ã—ã¾ã™ã€‚
ãƒ†ã‚¹ãƒˆå¯¾è±¡ã‚³ãƒ¼ãƒ‰ ã¾ãšæœ€åˆã«ã€ãƒ†ã‚¹ãƒˆå¯¾è±¡ã‚³ãƒ¼ãƒ‰ã¯æ¬¡ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚
class MainActivity : AppCompatActivity() { ... override fun onCreate(savedInstanceState: Bundle?) { ... button.setOnClickListener { startActivityForResult( Intent(this, Sub2Activity::class.java).apply { putExtra(&amp;#34;fuga&amp;#34;, &amp;#34;hoge&amp;#34;) }, 1 ) } } override fun onActivityResult( requestCode: Int, resultCode: Int, data: Intent? ) { super.onActivityResult(requestCode, resultCode, data) if (requestCode == 1) { if (resultCode == Activity.RESULT_OK) { val value = data!!.getIntExtra(&amp;#34;test&amp;#34;, -1) button.text = value.toString() } } } } class Sub2Activity : AppCompatActivity() { override fun onCreate(savedInstanceState: Bundle?</description>
    </item>
    
    <item>
      <title>Fluxã®Dispatcherã‚’Roomã®in memoryã§å®Ÿè£…ã™ã‚‹ã®ã¯ã€å†—é•·ãªã‚³ãƒ¼ãƒ‰ãŒå¤šããªã‚‹ã®ã§è‰¯ããªã„</title>
      <link>https://satoshun.github.io/2019/01/room-with-flux/</link>
      <pubDate>Thu, 24 Jan 2019 00:43:33 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2019/01/room-with-flux/</guid>
      <description>Fluxã®Dispatcherã‚’Room in memoryã§å®Ÿè£…ã™ã‚Œã°æœ€é«˜ãªã®ã§ã¯?ã¨æ€ã„ã€ã¡ã‚‡ã£ã¨è©¦ã—ã¦ã¿ã¾ã—ãŸã€‚
çµè«–ã‹ã‚‰ç”³ã—ã¾ã™ã¨å†—é•·ãªã‚³ãƒ¼ãƒ‰ãŒå¤šãã€è‰¯ããªã„ã¨æ„Ÿã˜ã¾ã—ãŸã€‚EventBusã‚„ã€ä»–ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã£ã¦å®Ÿè£…ã—ãŸã»ã†ãŒè‰¯ã„ã¨æ€ã„ã¾ã™ğŸ˜‚
ã¾ãŸã€ã‚ªãƒªã‚¸ãƒŠãƒ«Fluxã¯ã€ŒDispatcherãŒã‚¢ãƒ—ãƒªå†…ã§1ã¤ã ã‘å­˜åœ¨ã™ã‚‹ã€ã¨ã„ã†åŸå‰‡ãŒã‚ã£ãŸã¨æ€ã„ã¾ã™ãŒã€ãã‚Œã‚’ç ´ã£ã¦ã„ã¾ã™ã€‚Fluxã§ã™ã‚‰ãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚
Room in memory? Roomã§ã¯in memoryã§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚æ­£ç¢ºã«è¨€ãˆã°ã€SQLiteã®æ©Ÿèƒ½ã‚’Roomã®APIã¨ã—ã¦é–‹æ”¾ã—ã¦ã„ã¾ã™ã€‚
ä½¿ã„æ–¹ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
Room .inMemoryDatabaseBuilder(context, MyDatabase::class.java) .build() in memoryã‚’ä½¿ã†ç†ç”±ã¨ã—ã¦ã¯ã€
 ãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒã™ã‚‹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ°¸ç¶šåŒ–ã™ã‚‹å¿…è¦ã¯ãªã„ã ã‚ã† ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãŒå¿…è¦ãªã„  ã«ãªã‚Šã¾ã™ã€‚
å®Ÿè£…ã«å…¥ã£ã¦ã„ã ã§ã¯ã€å®Ÿè£…ã®èª¬æ˜ã‚’ã—ã¦ã„ãã¾ã™ã€‚
ã¾ãšã¯Actionã‚’Roomã®Entityã¨ã—ã¦å®šç¾©ã—ã¾ã™ã€‚
sealed class AuthorAction @Entity(tableName = &amp;#34;author1&amp;#34;) data class Author1( @PrimaryKey val _id: Long = 0, // always 0  val name: String, val age: Int ) : AuthorAction() @Entity(tableName = &amp;#34;author2&amp;#34;) data class Author2( @PrimaryKey val _id: Long = 0, // always 0  val name: String, val age: Int ) : AuthorAction() Primary keyã¯å¸¸ã«ä¸€å®šã«ã—ã¦ã€ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¯0 or 1ã¤ã—ã‹å­˜åœ¨ã—ãªã„ã‚ˆã†ã«ã—ã¦ãŠãã¾ã™ã€‚ä»®ã«ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®å±¥æ­´ãŒæ¬²ã—ã„ãªã‚‰ã€@PrimaryKey(autoGenerate = true)ã‚’ä½¿ã£ã¦ã‚‚è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚</description>
    </item>
    
    <item>
      <title>Fragmentã¨getViewLifecycleã®è©±</title>
      <link>https://satoshun.github.io/2018/12/view_lifecycle/</link>
      <pubDate>Fri, 21 Dec 2018 07:08:34 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2018/12/view_lifecycle/</guid>
      <description>ã“ã®è¨˜äº‹ã§ã¯Fragmentã§LiveDataã«Observerã‚’ç™»éŒ²ã™ã‚‹ã¨ãã¯Fragment#getViewLifecycleã‚’ä½¿ã†ã¨è‰¯ã„ã¨ã„ã†è©±ã‚’ã—ã¾ã™ã€‚
ã¾ãšã€Fragmentã®ãŠãŠã¾ã‹ãªãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã¯æ¬¡ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚
 onAttach onCreate  onCreateView onViewCreated  &amp;hellip;   onDestoryView   onDestroy onDetach  ã“ã“ã§é‡è¦ãªã®ã¯ã€onDestroyãŒå‘¼ã°ã‚Œã‚‹ã“ã¨ãªãã€è¤‡æ•°å›onCreateViewãŒå‘¼ã°ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ç‚¹ã§ã™ã€‚
ä¾‹ãˆã°ã€æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã¯é–“é•ã£ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚
class MainFragment: Fragment() { ... override fun onViewCreated(view: View, savedInstanceState: Bundle?) { super.onViewCreated(view, savedInstanceState) viewModel.data.observe(this, Observer { ... }) } } ãªãœãªã‚‰ã€LiveDataã«æ¸¡ã—ãŸthisï¼ˆLifecycleOwnerï¼‰ã¯ã€è‡ªèº«ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã«é§†å‹•ã™ã‚‹ãŸã‚ã§ã™ã€‚ ã“ã®ObserverãŒé–‹æ”¾ã•ã‚Œã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¯ã€Fragment#onDestroyãŒã‚³ãƒ¼ãƒ«ã•ã‚ŒãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã«ãªã‚Šã¾ã™ã€‚ ã—ã‹ã—å‰è¿°ã—ãŸã¨ãŠã‚Šã€Fragment#onDestroyãŒã‚³ãƒ¼ãƒ«ã•ã‚Œãšã«ã€è¤‡æ•°å›onCreateViewãŒã‚³ãƒ¼ãƒ«ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€å‰ã®ObserverãŒé–‹æ”¾ã•ã‚Œãšã«æ®‹ã£ã¦ã—ã¾ã„ã¾ã™ã€‚
å‰è¿°ã®ã‚³ãƒ¼ãƒ‰ã®Observerã¯Fragmentæœ¬ä½“ã®Lifecycleã«é§†å‹•ã•ã‚Œã‚‹ã®ã§ã¯ãªãã€Fragmentã®Viewã«é§†å‹•ã™ã‚‹ãŸã‚ã€ã“ã®å•é¡ŒãŒèµ·ã“ã‚Šã¾ã™ã€‚ ã‚ˆã£ã¦ã€Fragmentã«ã¯Viewç”¨ã®LifecycleãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚ãã‚ŒãŒã€Fragment#getViewLifecycleã§ã™ã€‚
å‰è¿°ã®ã‚³ãƒ¼ãƒ‰ã¯æ¬¡ã®ã‚ˆã†ã«æ›¸ãã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
class MainFragment: Fragment() { ... override fun onViewCreated(view: View, savedInstanceState: Bundle?) { super.onViewCreated(view, savedInstanceState) // Viewã®LifecycleOwnerã‚’æ¸¡ã™  viewModel.data.observe(viewLifecycleOwner, Observer { ... }) } } ã“ã®ã‚ˆã†ã«æ›¸ãã“ã¨ã§ã€ObserverãŒViewã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã«é§†å‹•ã™ã‚‹ãŸã‚ã€è¤‡æ•°ã®ObserverãŒç™»éŒ²ã•ã‚Œã‚‹å•é¡Œã‚’å›é¿ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ï¼ï¼</description>
    </item>
    
    <item>
      <title>Dagger &#43; ViewModelã®åŸºæœ¬ç·¨ &#43; å®Ÿä¾‹ç·¨</title>
      <link>https://satoshun.github.io/2018/12/dagger_with_viewmodel/</link>
      <pubDate>Wed, 19 Dec 2018 09:59:20 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2018/12/dagger_with_viewmodel/</guid>
      <description>ã“ã®è¨˜äº‹ã¯Daggerã¨Jetpackã®ViewModelã‚’ã‚ã‚‹ç¨‹åº¦çŸ¥ã£ã¦ã„ã‚‹å‰æã§é€²ã‚“ã§ã„ãã¾ã™ğŸ˜ƒ
åŸºæœ¬ç·¨ ä¸€ç·’ã«Dagger + ViewModelã‚’ä½¿ã†ã®ã¯ãƒ„ãƒ©ãƒŸãŒã‚ã‚Šã¾ã™ã€‚ãã‚Œã¯ã€ViewModelã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ç”Ÿæˆã¯ViewModelProviderã‚’ä»‹ã—ã¦è¡Œã†å¿…è¦ãŒã‚ã‚‹ãŸã‚ã§ã™ã€‚
ä¾‹ãˆã°ã€æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã¯é–“é•ã£ã¦ã„ã¾ã™ã€‚
class MainViewModel @Inject constructor(...): ViewModel() class MainActivity { @Inject lateinit var viewModel: MainViewModel ... } ã“ã®æ›¸ãæ–¹ã ã¨MainViewModelã¯Daggerå†…ã§è‡ªå‹•çš„ã«ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ç”Ÿæˆã•ã‚Œã¦ã—ã¾ã†ã®ã§ã€ViewModelProviderã‚’ä»‹ã—ã¦ãã‚Œã¾ã›ã‚“ã€‚ã‚ˆã£ã¦æ¬¡ã®ã‚ˆã†ã«æ›¸ãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
class MainViewModel(...): ViewModel() @Module class MainActivityModule { @Provides fun provideMainViewModel(...) : MainViewModel { // ViewModelProviderã‚’ä½¿ã£ã¦ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã™ã‚‹  return ViewModelProviders.of(...).get(MainViewModel::class.java) } } class MainActivity { @Inject lateinit var viewModel: MainViewModel ... } @Providesã‚’ä½¿ã„ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ç”Ÿæˆã®æ–¹æ³•ã‚’æ˜ç¤ºçš„ã«è¨˜è¿°ã—ã¾ã™ã€‚ã“ã‚Œã§ã€ViewModelProviderã‚’ä»‹ã—ã¦MainViewModelã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã‚’ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
ã¾ãŸã€ViewModelã‚’ç›´æ¥æ³¨å…¥ã›ãšã«ã€ViewModelProvider.Factoryã‚’æ³¨å…¥ã—ã€ViewModelã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ç”Ÿæˆã¯Activityï¼ˆor Fragmentï¼‰ã«ä»»ã›ã‚‹æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚ ã“ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ã¨ãã¯ã€activity-ktxï¼ˆor fragment-ktxï¼‰ã«è¿½åŠ ã•ã‚ŒãŸæ‹¡å¼µé–¢æ•°ã¨çµ„ã¿åˆã‚ã›ã‚‹ã¨ã„ã„æ„Ÿã˜ã«æ›¸ã‘ã¾ã™ã€‚
class MainViewModel(...): ViewModel() or class MainViewModel @Inject constructor(...): ViewModel() @Module class MainActivityModule { @Provides fun provideViewModelFactory(.</description>
    </item>
    
    <item>
      <title>Data Bindingã®ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ãŒ3.4.0-alpha07ã‹ã‚‰è¦‹ã‚„ã™ããªã‚‹</title>
      <link>https://satoshun.github.io/2018/12/databinding_decrease_error_log/</link>
      <pubDate>Fri, 07 Dec 2018 00:00:00 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2018/12/databinding_decrease_error_log/</guid>
      <description>Data Bindingã¨Dagger2ãªã©ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ç³»ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’çµ„ã‚ã›ã¦ä½¿ã†ã¨ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ãŒè†¨å¤§ã«ãªã‚‹å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚
ãã‚ŒãŒ3.4.0-alpha07ä»¥é™ã§æ”¹å–„ã•ã‚Œã‚‹è¦‹è¾¼ã¿ã§ã™ğŸ‰
è©³ç´°ã¯ã“ã“ã«ã‚ã‚Šã¾ã™ã€‚https://issuetracker.google.com/issues/116541301
ã“ã®è¨˜äº‹ã§ã¯ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’ãƒ™ãƒ¼ã‚¹ã«ã€ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã®å¤‰åŒ–ãŒã©ã®ã‚ˆã†ã«å¤‰ã‚ã£ãŸã‹ã‚’ç´¹ä»‹ã—ã€å®Ÿéš›ã«ã‚¢ãƒ—ãƒªå´ã®ã‚³ãƒ¼ãƒ‰ã‚’ã©ã®ã‚ˆã†ã«å¤‰æ›´ã™ã‚‹ã‹ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚
ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯ã“ã“ã«ã‚ã‚Šã¾ã™ğŸ˜ƒ
ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã®å¤‰åŒ– ã¾ãšã©ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ãŒå‡ºåŠ›ã•ã‚Œã‚‹ã‹ã‚’è¦‹ã¦ã„ãã¾ã™ã€‚ é©å½“ã«ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’ä¿®æ­£ã—ã€Daggerå‘¨ã‚Šã®ã‚³ãƒ¼ãƒ‰ã§ã‚¨ãƒ©ãƒ¼ã‚’å‡ºã—ã¦ç¢ºèªã—ã¦ã¿ã¾ã™ã€‚
ã¾ãšã¯Data Binding 3.2.1ã‹ã‚‰ã€‚
&amp;gt; Task :app:kaptGenerateStubsDebugKotlin e: /Users/stsn/git/github.com/satoshun-android-example/DataBindingApiDeprecateExample/app/build/generated/data_binding_base_class_source_out/debug/dataBindingGenBaseClassesDebug/out/com/github/satoshun/example/sample/databinding/MainAct79Binding.java:17: error: cannot find symbol protected MainAct79Binding(DataBindingComponent _bindingComponent, View _root, ^ symbol: class DataBindingComponent location: class MainAct79Binding e: /Users/stsn/git/github.com/satoshun-android-example/DataBindingApiDeprecateExample/app/build/generated/data_binding_base_class_source_out/debug/dataBindingGenBaseClassesDebug/out/com/github/satoshun/example/sample/databinding/MainAct79Binding.java:31: error: cannot find symbol boolean attachToRoot, @Nullable DataBindingComponent component) { ^ ... ... ... Data Bindingå‘¨ã‚Šã®ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ãŒç„¡é™ã«å‡ºã¾ã™ã€‚æ‚²ã—ã„ğŸ˜‚
æ¬¡ã«3.4.0-alpha07ã§ã™ã€‚
&amp;gt; Task :app:kaptGenerateStubsDebugKotlin e: /Users/stsn/git/github.com/satoshun-android-example/DataBindingApiDeprecateExample/app/build/tmp/kapt3/stubs/debug/com/github/satoshun/example/sample/MainActivityBuilder.java:6: error: incompatible types: NonExistentClass cannot be converted to Annotation @error.NonExistentClass() ã¡ã‚ƒã‚“ã¨å•é¡ŒãŒã‚ã‚‹ã‚³ãƒ¼ãƒ‰ç®‡æ‰€ã®ã¿ã§ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ãŒå‡ºã¾ã—ãŸï¼ï¼Data Bindingå‘¨ã‚Šã®ã‚¨ãƒ©ãƒ¼ã¯å‡ºã¦ã„ã¾ã›ã‚“ï¼ï¼å¬‰ã—ã„ğŸ˜ƒ
ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã®å¯¾å¿œ ã“ã‚Œã«ä¼´ã„ã€ä¸€éƒ¨APIãŒdeprecatedã«ãªã‚Šã¾ã™ã€‚ä¾‹ãˆã°ã€main_act.</description>
    </item>
    
    <item>
      <title>MutableãªLiveDataã‚’ç‰¹å®šã®ã‚¯ãƒ©ã‚¹å¤–ã‹ã‚‰æ›´æ–°ã§ããªãã™ã‚‹</title>
      <link>https://satoshun.github.io/2018/12/livedata_helper/</link>
      <pubDate>Sat, 01 Dec 2018 00:00:00 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2018/12/livedata_helper/</guid>
      <description>LiveDataã®å€¤ã‚’æ›´æ–°ã—ãŸã„æ™‚ã€MutableLiveDataã‚’ä½¿ã†ã®ãŒä¸€èˆ¬çš„ã ã¨æ€ã„ã¾ã™ã€‚
class MainViewModel { val hoge = MutableLiveData&amp;lt;Int&amp;gt;() } ã“ã®æ›¸ãæ–¹ã ã¨ã€å¤–ã®ã‚¯ãƒ©ã‚¹ã‹ã‚‰å€¤ã‚’æ›´æ–°ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚
val viewModel = MainViewModel() // ok viewModel.hoge.postValue(10000) å¤–ã®ã‚¯ãƒ©ã‚¹ã‹ã‚‰ã¯æ›´æ–°å‡ºæ¥ãªã„ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã«ã¯LiveDataã«å‹å¤‰æ›ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ä¾‹ãˆã°æ¬¡ã®ã‚ˆã†ã«æ›¸ãã¾ã™ã€‚
class MainViewModel { private val _hoge = MutableLiveData&amp;lt;Int&amp;gt;() val hoge: LiveData&amp;lt;Int&amp;gt; = _hoge // ã“ã“ã§LiveDataã«å‹å¤‰æ› } ã“ã†ã™ã‚‹ã“ã¨ã§ã€å¤–ã®ã‚¯ãƒ©ã‚¹ã‹ã‚‰ã¯MutableLiveDataãŒç›´æ¥è¦‹ãˆãªããªã‚Šã€æ˜ç¤ºçš„ã«å‹å¤‰æ›ã‚’ã—ãªã„é™ã‚ŠLiveDataã®å€¤ã‚’æ›´æ–°ã§ããªããªã‚Šã¾ã™ã€‚
ãŸã ã“ã®æ›¸ãæ–¹ã¯ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å®šç¾©ãŒå¢—ãˆã‚‹ã®ã§ã¨ã¦ã‚‚ã‚ã‚“ã©ãã•ã„ã§ã™ã€‚ ãªã®ã§ã€ãã‚Œã®è§£æ±ºç­–ã‚’ä»¥ä¸‹ã§ç´¹ä»‹ã—ã¾ã™ã€‚
ãã®1 ã¾ãšã‚³ãƒ¼ãƒ‰ã‚’ã®ã›ã¾ã™ã€‚
abstract class ViewModel2 { protected fun &amp;lt;T&amp;gt; ViewModelLiveData2&amp;lt;T&amp;gt;.postValue(value: T) { postValue(value) } protected fun &amp;lt;T&amp;gt; ViewModelLiveData2&amp;lt;T&amp;gt;.setValue(value: T) { setValue(value) } } // ViewModel2ã¨åŒã˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«å®šç¾© public class ViewModelLiveData2&amp;lt;T&amp;gt; extends LiveData&amp;lt;T&amp;gt; { @Override protected void postValue(T value) { super.</description>
    </item>
    
    <item>
      <title>Unitãƒ†ã‚¹ãƒˆã§ViewModelã®onClearedã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹</title>
      <link>https://satoshun.github.io/2018/10/unittest-viewodel_oncleared/</link>
      <pubDate>Sun, 14 Oct 2018 00:00:00 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2018/10/unittest-viewodel_oncleared/</guid>
      <description>ãµã¨AACã®ViewModelã®onClearedãƒ¡ã‚½ãƒƒãƒ‰ã‚’ãƒ†ã‚¹ãƒˆã—ãŸããªã£ãŸã®ã§ã€ 3ã¤ã®ã‚„ã‚Šã‹ãŸã‚’ç´¹ä»‹ã—ã¾ã™ã€‚
ç’°å¢ƒã¯
&amp;quot;junit:junit:4.12&amp;quot; &amp;quot;androidx.test:rules:1.1.1&amp;quot; &amp;quot;androidx.test:runner:1.1.1&amp;quot; &amp;quot;androidx.test.ext:junit:1.1.0&amp;quot; &amp;quot;com.nhaarman:mockito-kotlin-kt1.1:1.5.0&amp;quot; &amp;quot;org.robolectric:robolectric:4.1&amp;quot; ã«ãªã‚Šã¾ã™ã€‚
ã¾ãŸã€ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯ satoshun-android-example/Testsã«ã‚ã‚‹ã®ã§ã€å‚è€ƒã—ã¦ãã ã•ã„ğŸ˜Š
1. ViewModelStoreã‚’ä½¿ã† ViewModelProviders.of(activity).get(class)ã‹ã‚‰ViewModelã‚’å–å¾—ã—ãŸã¨ãã«ã€å–å¾—ã—ãŸViewModelã¯ViewModelStoreã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã¾ã™ã€‚ã“ã®ViewModelStoreã¯FragmentActivityã‹ã‚‰å–å¾—ã§ãã‚‹ã®ã§ã€æ¬¡ã®ã‚ˆã†ã«æ›¸ãã“ã¨ã§ViewModelã®onClearedã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
@RunWith(AndroidJUnit4::class) class BaseViewModelTest { @get:Rule val activityRule = ActivityTestRule(FragmentActivity::class.java) @Test fun `dispose a coroutine when finished lifecycle of ViewModel`() { activityRule.activity.viewModelStore.clear() // ViewModelãŒé–‹æ”¾ã•ã‚Œã‚‹  } } ã“ã®ãƒ†ã‚¹ãƒˆã¯ã‚³ãƒ¼ãƒ‰çš„ã«ã¯ç°¡å˜ã§ã™ãŒã€ViewModelStoreãŒViewModelã‚’ç®¡ç†ã—ã¦ã„ã‚‹ã“ã¨ã‚’çŸ¥ã£ã¦ã„ã‚‹ã€å†…éƒ¨å®Ÿè£…ã®è©³ç´°ã¾ã§çŸ¥ã£ã¦ã„ã‚‹ãŸã‚ã€ãƒ†ã‚¹ãƒˆã¨ã—ã¦ãµã•ã‚ã—ããªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚
ãªã®ã§ã€ç´ ç›´ã«onDestroyã‚’ã‚³ãƒ¼ãƒ«ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚‚æ›¸ã„ã¦ã¿ã¾ã™ã€‚
2. Instrumentation.callActivityOnDestroyã‚’ä½¿ã† Instrumentationã‚¯ãƒ©ã‚¹ã‚’ä½¿ã†ã“ã¨ã§Activityã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚ Instrumentationã¯InstrumentationRegistryã‚¯ãƒ©ã‚¹ã‹ã‚‰å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã€æ¬¡ã®ã‚ˆã†ã«æ›¸ãã“ã¨ã§ã€onDestroyã‚’ã‚³ãƒ¼ãƒ«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
@Test fun `dispose a coroutine when finished lifecycle of ViewModel 2`() { // onDestroyãŒã‚³ãƒ¼ãƒ«ã•ã‚ŒViewModelãŒé–‹æ”¾ã•ã‚Œã‚‹  InstrumentationRegistry.getInstrumentation().callActivityOnDestroy(activityRule.activity) } Activityã®onDestroyãŒã‚³ãƒ¼ãƒ«ã•ã‚Œã€ViewModelã®onClearedã‚‚ã‚³ãƒ¼ãƒ«ã•ã‚Œã¾ã™ï¼
ä»¥ä¸‹è¿½è¨˜
3. ActivityScenarioã‚’ä½¿ã† æ–°ã—ãè¿½åŠ ã•ã‚ŒãŸActivityScenarioã‚’ä½¿ã†ã¨ã‚ˆã‚Šã™ã£ãã‚Šã¨onDestroyã‚’è¡¨ç¾ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
@Test fun `dispose a coroutine when finished lifecycle of ViewModel 3`() { val scenario = ActivityScenario.</description>
    </item>
    
    <item>
      <title>Android: Navigationã®safeargs Gradle pluginã ã‘ã‚’ä½¿ã£ã¦ã‚‚ã„ã„ã‹ã‚‚ã—ã‚Œãªã„</title>
      <link>https://satoshun.github.io/2018/05/navigation-only_use_safe_args/</link>
      <pubDate>Sun, 20 May 2018 00:00:00 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2018/05/navigation-only_use_safe_args/</guid>
      <description>Google I/O 2018ã§JetpackãŒç™»å ´ã—ã€æ–°ãŸã«Navigationãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒå°å…¥ã•ã‚Œã¾ã—ãŸã€‚ ã–ã£ãã‚Šã¨èª¬æ˜ã™ã‚‹ã¨ã€ç”»é¢ã®é·ç§»ã®å®Ÿè£…ã‚’åŠ©ã‘ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ãªã£ã¦ã„ã¾ã™ã€‚å®Ÿè£…çš„ã«ã¯ã€FragmentTransactionã‚’ç›´æ¥ã„ã˜ã‚‹ã“ã¨ãŒãªããªã‚‹ã¨ã„ã£ãŸãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚Šã¾ã™ã€‚
ã“ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æ©Ÿèƒ½ã«ã€safeargsã¨ã„ã†ã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚ŒãŒä¾¿åˆ©ã§ã€æœ€åˆã¯ã“ã®æ©Ÿèƒ½ã ã‘ã‚’ä½¿ã†ã®ã‚‚ã„ã„ã®ã§ã¯? ã¨æ€ã£ã¦ã„ã‚‹ã®ã§ãã®ç´¹ä»‹ã§ã™ã€‚
safeargsã‚’ä½¿ã£ã¦ã¿ã‚‹ ä¸€èˆ¬çš„ã«Fragmentã«é©å½“ãªå€¤ã‚’æ¸¡ã™ã¨ãã¯Bundleã‚’é€šã—ã¦æ¸¡ã—ã¾ã™ã€‚
// å‘¼ã³å‡ºã—å´ val bundle = Bundle() bundle.putInt(&amp;#34;step&amp;#34;, 10) // å‘¼ã³å‡ºã•ã‚Œå´ val step = arguments?.getInt(&amp;#34;step&amp;#34;) ã“ã‚Œã®å•é¡Œç‚¹ã¨ã—ã¦ã¯ã€typesafeã§ç„¡ã„ã¨ã“ã‚ã§ã™ã€‚ä¾‹ãˆã°ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ãªã©ã§ã€ç‰‡æ–¹ã®æ–‡å­—åˆ—ã‚’&amp;quot;step2&amp;quot;ã«ã—ã¦ã—ã¾ã†ã¨ã€ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚
ã“ã‚Œã‚’è§£æ±ºã«ã™ã‚‹ãŸã‚ã«Navigationã§ã¯safe argsã¨ã„ã†æ©Ÿèƒ½ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚ ã“ã‚Œã¯ã€DataBindingã®ã‚ˆã†ã«ã€ã‚¯ãƒ©ã‚¹ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ã§typesafeã‚’å®Ÿç¾ã—ã¾ã™ã€‚
&amp;lt;navigation xmlns:android=&amp;#34;http://schemas.android.com/apk/res/android&amp;#34; xmlns:app=&amp;#34;http://schemas.android.com/apk/res-auto&amp;#34; xmlns:tools=&amp;#34;http://schemas.android.com/tools&amp;#34;&amp;gt; &amp;lt;fragment android:name=&amp;#34;com.example.android.codelabs.navigation.HogeFragment&amp;#34; android:label=&amp;#34;Hoge&amp;#34;&amp;gt; &amp;lt;argument android:name=&amp;#34;step&amp;#34; app:type=&amp;#34;integer&amp;#34; android:defaultValue=&amp;#34;1&amp;#34;/&amp;gt; &amp;lt;/fragment&amp;gt; &amp;lt;/navigation&amp;gt; ã¨navigationã‚’è¨˜è¿°ã™ã‚‹ã¨ã€
public class HogeFragmentArgs { private int step = 1; private HogeFragmentArgs() { } public static HogeFragmentArgs fromBundle(Bundle bundle) { HogeFragmentArgs result = new HogeFragmentArgs(); if (bundle.containsKey(&amp;#34;step&amp;#34;)) { result.step = bundle.getInt(&amp;#34;step&amp;#34;); } return result; } public int getStep() { return step; } public Bundle toBundle() { Bundle __outBundle = new Bundle(); __outBundle.</description>
    </item>
    
    <item>
      <title>Android: æ‹¡å¼µé–¢æ•°ã§LiveDataã®Single Eventã‚’æ‰±ã†</title>
      <link>https://satoshun.github.io/2018/05/singlelivedata/</link>
      <pubDate>Sat, 19 May 2018 00:00:00 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2018/05/singlelivedata/</guid>
      <description>LiveDataã¯æœ€æ–°ã®å€¤ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã™ã‚‹ãŸã‚ã€ã‚¨ãƒ©ãƒ¼å€¤ã®å–æ‰±ãªã©ã«å›°ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ é©å½“ãªã‚¯ãƒ©ã‚¹ã‚’ä½œã‚‹ã®ã‚‚ã„ã„ã®ã§ã™ãŒã€æ‹¡å¼µé–¢æ•°ã§è¡¨ç¾ã™ã‚‹ã“ã¨ã‚‚å‡ºæ¥ã‚‹ã®ã§ãã®ç´¹ä»‹ã§ã™ã€‚
å®šç¾©ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
fun &amp;lt;T&amp;gt; singleLiveData(): MutableLiveData&amp;lt;T&amp;gt; { // skipç”¨ã®åˆæœŸå€¤ã‚’å…¥ã‚Œã¦ãŠã  return MutableLiveData&amp;lt;T&amp;gt;().also { it.value = null } } fun &amp;lt;T&amp;gt; LiveData&amp;lt;T&amp;gt;.observeSingle(owner: LifecycleOwner, observer: ((T?) -&amp;gt; Unit)) { // æœ€åˆã®å€¤ã¯å¸¸ã«skipã™ã‚‹ã“ã¨ã§ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ç„¡è¦–ã™ã‚‹  val firstIgnore = AtomicBoolean(true) this.observe(owner, Observer { if (firstIgnore.getAndSet(false)) return@Observer observer(it) }) } ä½¿ã†æ™‚ã¯ã“ã‚“ãªæ„Ÿã˜ã§ä½¿ã„ã¾ã™ã€‚
// TestViewModel.kt class TestViewModel: ViewModel() { val errorEvent = singleLiveData&amp;lt;String&amp;gt;() } // TestActivity.kt testViewModel = ViewModelProviders.of(this).get(TestViewModel::class.java) testViewModel.errorEvent.observeSingle(activity) { Log.d(&amp;#34;one&amp;#34;, it.toString()) } ãƒ¡ãƒªãƒƒãƒˆã¯ã‚µãƒ–ã‚¯ãƒ©ã‚¹ã‚’ä½œã‚‰ãšã«æ¸ˆã‚€ã¨ã“ã‚ã§ã™ã€‚
å‚è€ƒ  https://github.com/googlesamples/android-architecture/blob/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/SingleLiveEvent.java https://medium.</description>
    </item>
    
    <item>
      <title>LiveDataã®postValueã¯å…¨ã¦æµã‚Œã¦ãã‚‹ã¨ã¯é™ã‚‰ãªã„</title>
      <link>https://satoshun.github.io/2017/12/livedata-postvalue-unsafe/</link>
      <pubDate>Wed, 06 Dec 2017 00:00:00 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2017/12/livedata-postvalue-unsafe/</guid>
      <description>çµè«–  LiveData.postValueã‚’çŸ­ã„é–“ã«è¤‡æ•°å›ã‚³ãƒ¼ãƒ«ã™ã‚‹ã¨æœ€å¾Œã®å€¤ã—ã‹Obseverã«æµã‚Œã¦ã“ãªã„ã“ã¨ãŒã‚ã‚‹  èƒŒæ™¯ RxJavaã®Subjectã®ä»£æ›¿ã¨ã—ã¦MutableLiveData(postValueã¨setValueãŒpublicã«ãªã£ã¦ã„ã‚‹)ã‚’ä½¿ã£ã¦ã„ã‚‹éƒ¨åˆ†ãŒã‚ã‚Šã€çŸ­ã„é–“ã«2å›ã‚³ãƒ¼ãƒ«ã•ã‚ŒãŸã¨ãã€å…¨ã¦ã®å€¤ãŒæµã‚Œã¦æ¬²ã—ã‹ã£ãŸãŒä½•æ•…ã‹1å›ã—ã‹å©ã‹ã‚Œã¦ã„ãªã‹ã£ãŸã€‚ ã©ã“ã«åŸå› ãŒã‚ã‚‹ã‹èª¿æŸ»ã—ãŸã¨ã“ã‚ã€ã©ã†ã‚‚postValueãƒ¡ã‚½ãƒƒãƒ‰ã®ä»•æ§˜(LiveDataã‚¯ãƒ©ã‚¹å…¨ä½“ã®ä»•æ§˜?)çš„ã«çŸ­ã„é–“ã«è¤‡æ•°å›ã‚³ãƒ¼ãƒ«ã•ã‚ŒãŸå ´åˆã¯ã€æœ€å¾Œã«postValueã—ãŸå€¤ã®ã¿ã‚’postã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ãŸã€‚
å®Ÿè£…è©³ç´° LiveDataã®postValueã®ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™(v1.0.0)
protected void postValue(T value) { boolean postTask; synchronized (mDataLock) { postTask = mPendingData == NOT_SET; mPendingData = value; } if (!postTask) { return; } ArchTaskExecutor.getInstance().postToMainThread(mPostValueRunnable); } postValueãƒ¡ã‚½ãƒƒãƒ‰ã§ã¯
  mPendingDataãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«Observerã«æ¸¡ã™ãƒ‡ãƒ¼ã‚¿ã‚’ã‚»ãƒƒãƒˆã™ã‚‹   ãƒ¡ã‚¤ãƒ³ã‚¹ãƒ¬ãƒƒãƒ‰ã§mPostValueRunnableã‚’å®Ÿè¡Œã™ã‚‹ (ãŸã ã—mPendingDataã«ã¾ã ä»¥å‰ã®ãƒ‡ãƒ¼ã‚¿ãŒæ®‹ã£ã¦ã„ãŸã‚‰ã€ä»¥å‰ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°ã™ã‚‹)  ã¨ã„ã£ãŸã“ã¨ã‚’ã‚„ã£ã¦ã„ã¾ã™ã€‚
ã“ã®ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦åˆ†ã‹ã‚‹é€šã‚Šã€å‰ã«ã‚»ãƒƒãƒˆã—ãŸmPendingDataãŒObserverã«æ¸¡ã•ã‚Œã‚‹å‰ã«ã€æ–°ã—ã„å€¤ã§ä¸Šæ›¸ãã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚ ã‚ˆã£ã¦ã€çŸ­ã„é–“ã«è¤‡æ•°å›ã®postValueã‚’ã‚³ãƒ¼ãƒ«ã™ã‚‹ã¨æœ€å¾Œã®å€¤ã®ã¿ã—ã‹Observerã«æµã‚Œã¦ã“ãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚
ã¾ã¨ã‚  RxJavaã®Subjectã®ã‚ˆã†ã«ã€å…¨ã¦ã®å€¤ã‚’æµã™å‹•ä½œã‚’æ„å›³ã—ã¦ã„ã‚‹ã¨ãƒãƒã‚‹ ãã‚‚ãã‚‚LiveDataã¯æœ€æ–°ã®Viewã®çŠ¶æ…‹ã‚’ä¿æŒã™ã‚‹ç”¨é€”ã ã¨æ€ã†ã®ã§ã€çŸ­ã„é–“ã«è¤‡æ•°å›ã‚³ãƒ¼ãƒ«ã•ã‚ŒãŸã‚‰ã€æœ€å¾Œã®å€¤ã®ã¿ã‚’æµã™ã®ã¯æ­£ã—ã„ã€‚LiveDataã¯æ‚ªããªã„ã€‚æ‚ªã„ã®ã¯ä¿ºã€‚  </description>
    </item>
    
    <item>
      <title>Android: Roomã«ãŠã‘ã‚‹ãƒ‡ãƒ¼ã‚¿å¤‰æ›´é€šçŸ¥ã®ä»•çµ„ã¿ã«ã¤ã„ã¦(InvalidationTracker)</title>
      <link>https://satoshun.github.io/2017/11/jetpack-room-invalidationtracker/</link>
      <pubDate>Sun, 26 Nov 2017 00:00:00 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2017/11/jetpack-room-invalidationtracker/</guid>
      <description>ã“ã‚“ã«ã¡ã¯Ê•â€¢Ó«Ì«Í¡â€¢Ê”
ã“ã®è¨˜äº‹ã§ã¯ã©ã®ã‚ˆã†ã«ã—ã¦RoomãŒãƒ†ãƒ¼ãƒ–ãƒ«ã®å¤‰æ›´ã‚’æ¤œçŸ¥ã—ã€LiveDataãªã©ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã®å¤‰æ›´ã‚’ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ¼ã«é€šçŸ¥ã—ã¦ã„ã‚‹ã‹ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚
å‰ç½®ã/å‰æçŸ¥è­˜ Roomã¯GoogleãŒæä¾›ã—ã¦ã„ã‚‹SQLiteã‚’ã„ã„æ„Ÿã˜ã«æ‰±ã†ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚
Roomã«ã¯Dao(Data access object)ã¨å‘¼ã°ã‚Œã‚‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹/æŠ½è±¡ã‚¯ãƒ©ã‚¹ãŒã‚ã‚Šã€ãã“ã‚’èµ·ç‚¹ã«ã‚¯ã‚¨ãƒªã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
@Dao interface UserDao { @Query(&amp;#34;SELECT * FROM users&amp;#34;) fun getUsers(): Flowable&amp;lt;List&amp;lt;User&amp;gt;&amp;gt; } è¿”ã‚Šå€¤ã¨ã—ã¦ã€observableãƒ‡ãƒ¼ã‚¿å‹ã‚’å–ã‚‹ã“ã¨ãŒã§ãã€Roomã§ã¯LiveDataã¨RxJava2ã®å‹(Flowableã¨ã‹)ãªã©ã®observableå‹ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚
ãã—ã¦ã€LiveDataã¾ãŸã¯Flowableã§è¿”ã‚Šå€¤ã‚’å®šç¾©ã™ã‚‹ã¨å¯¾è±¡ã®ãƒ†ãƒ¼ãƒ–ãƒ«ãŒInsertãªã©ã§å¤‰æ›´ã•ã‚ŒãŸã¨ãã«ã€å¤‰æ›´é€šçŸ¥ã‚’å—ã‘å–ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
// ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã®ã‚³ãƒ¼ãƒ‰ userDao.getUsers() .subscribeOn(Schedulers.io) .subscribe { println(it) // ã“ã“ãŒå¯¾è±¡ã®ãƒ†ãƒ¼ãƒ–ãƒ«ãŒå¤‰æ›´ã•ã‚Œã‚‹ãŸã³ã«è©•ä¾¡ã•ã‚Œã‚‹ã€‚  } ãƒ†ãƒ¼ãƒ–ãƒ«ã®å¤‰æ›´æ¤œçŸ¥ã¯Roomã®å†…éƒ¨ã‚¯ãƒ©ã‚¹ã®InvalidationTrackerã‚¯ãƒ©ã‚¹ã§è¡Œã£ã¦ã„ã¾ã™ã€‚ ã“ã‚Œã‹ã‚‰InvalidationTrackerã®å†…éƒ¨å®Ÿè£…ã‚’è¦‹ã¦ã„ãã¾ã™ã€‚
InvalidationTrackerã®æµã‚Œ  InvalidationTracker#startTrackingTableãƒ¡ã‚½ãƒƒãƒ‰ã§Trigger(SQL)ã‚’ç”Ÿæˆ obsevableãŒç”Ÿæˆã•ã‚ŒãŸã‚‰ã€å¯¾å¿œã™ã‚‹InvalidationTracker.Observer(å¤‰æ›´é€šçŸ¥ç”¨ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯)ã‚’InvalidationTrackerã«ç™»éŒ² RoomData#endTransactionã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§å„ãƒ†ãƒ¼ãƒ–ãƒ«ãŒæ›´æ–°ã•ã‚ŒãŸã‹ã‚’ç¢ºèª ãƒ†ãƒ¼ãƒ–ãƒ«ãŒæ›´æ–°ã•ã‚Œã¦ã„ãŸã‚‰å¤‰æ›´é€šçŸ¥ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’å®Ÿè¡Œ  ã¨ã„ã†ã®ãŒå¤§ã¾ã‹ãªæµã‚Œã«ãªã‚Šã¾ã™ã€‚2ã¯observer(å¤‰æ›´é€šçŸ¥ç”¨ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯)ã‚’ç™»éŒ²ã™ã‚‹ã ã‘ã€4ã¯ç™»éŒ²ã—ãŸã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã«ãƒ‡ãƒ¼ã‚¿ã‚’æµã™ã ã‘ã§ã™ã€‚ãªã®ã§1, 3ã«ã¤ã„ã¦è©³ã—ãè¦‹ã¦ã„ãã¾ã™ã€‚
InvalidationTracker#startTrackingTableãƒ¡ã‚½ãƒƒãƒ‰ã«ã‚ˆã‚ŠTriggerã‚’ç”Ÿæˆã™ã‚‹ æœ€åˆã«å„ãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç®¡ç†ã™ã‚‹ room_table_modification_logãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚
CREATE TEMP TABLE room_table_modification_log ( version INTEGER PRIMARY KEY AUTOINCREMENT, table_id INTEGER ) ã“ã®ã‚¯ã‚¨ãƒªã®æ„å‘³ã™ã‚‹ã“ã¨ã¯ã€ãƒ†ãƒ¼ãƒ–ãƒ«æ“ä½œãŒã‚ã£ãŸã¨ãã«ã€å¯¾è±¡ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã®versionã‚’æ›´æ–°ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã§ã€versionå¤‰æ›´ã•ã‚Œã¦ã„ãŸã‚‰æ›´æ–°ã‚’æ¤œçŸ¥ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚ã“ã®versionã‚’æ›´æ–°ã™ã‚‹ãŸã‚ã«Roomã§ã¯SQLã«ã‚ã‚‹æ©Ÿèƒ½ã®1ã¤Triggerã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚å…·ä½“çš„ã«ã¯æ¬¡ã®Triggerã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚
CREATE TEMP TRIGGER IF NOT EXISTS room_table_modification_trigger_users_UPDATE AFTER UPDATE ON users BEGIN INSERT OR REPLACE INTO room_table_modification_log VALUES (null, 0); # 0ã¯table_id END ã“ã‚Œã¯ä¸€è¦‹è¤‡é›‘ã«è¦‹ãˆã¾ã™ãŒã‚‚ã®ã™ã”ã„å˜ç´”ã§ã€usersãƒ†ãƒ¼ãƒ–ãƒ«ãŒUPDATEã•ã‚ŒãŸã‚‰ä¸Šè¨˜ã®ã‚¯ã‚¨ãƒªãŒãƒ•ãƒƒã‚¯ã•ã‚Œã¦å®Ÿè¡Œã•ã‚Œã‚‹ã ã‘ã§ã™ã€‚ä¸Šã®ã‚¯ã‚¨ãƒªINSERT OR REPLACE INTO room_table_modification_log VALUES (null, 0); ã¯ room_table_modification_logãƒ†ãƒ¼ãƒ–ãƒ«ã«æœ€æ–°ã®id + 1ã®rowã‚’è¿½åŠ /æ›´æ–°ã™ã‚‹ã‚‚ã®ã«ãªã‚Šã¾ã™ã€‚</description>
    </item>
    
  </channel>
</rss>