<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Unittest on stsnãƒ–ãƒ­ã‚°</title>
    <link>https://satoshun.github.io/tags/unittest/</link>
    <description>Recent content in Unittest on stsnãƒ–ãƒ­ã‚°</description>
    <generator>Hugo</generator>
    <language>ja</language>
    <copyright>Sato Shun</copyright>
    <lastBuildDate>Wed, 26 Dec 2018 03:06:20 +0000</lastBuildDate>
    <atom:link href="https://satoshun.github.io/tags/unittest/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Unitãƒ†ã‚¹ãƒˆã§ViewModelã®onClearedã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹</title>
      <link>https://satoshun.github.io/2018/10/unittest-viewodel_oncleared/</link>
      <pubDate>Sun, 14 Oct 2018 00:00:00 +0000</pubDate>
      <guid>https://satoshun.github.io/2018/10/unittest-viewodel_oncleared/</guid>
      <description>&lt;p&gt;ãµã¨AACã®&lt;a href=&#34;https://developer.android.com/reference/androidx/lifecycle/ViewModel&#34;&gt;ViewModel&lt;/a&gt;ã®onClearedãƒ¡ã‚½ãƒƒãƒ‰ã‚’ãƒ†ã‚¹ãƒˆã—ãŸããªã£ãŸã®ã§ã€ 3ã¤ã®ã‚„ã‚Šã‹ãŸã‚’ç´¹ä»‹ã—ã¾ã™ã€‚&lt;/p&gt;&#xA;&lt;p&gt;ç’°å¢ƒã¯&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;&amp;#34;junit:junit:4.12&amp;#34;&#xA;&amp;#34;androidx.test:rules:1.1.1&amp;#34;&#xA;&amp;#34;androidx.test:runner:1.1.1&amp;#34;&#xA;&amp;#34;androidx.test.ext:junit:1.1.0&amp;#34;&#xA;&amp;#34;com.nhaarman:mockito-kotlin-kt1.1:1.5.0&amp;#34;&#xA;&amp;#34;org.robolectric:robolectric:4.1&amp;#34;&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;&#xA;&lt;p&gt;ã¾ãŸã€ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯ &lt;a href=&#34;https://github.com/satoshun-android-example/Tests&#34;&gt;satoshun-android-example/Tests&lt;/a&gt;ã«ã‚ã‚‹ã®ã§ã€å‚è€ƒã—ã¦ãã ã•ã„ğŸ˜Š&lt;/p&gt;&#xA;&lt;h3 id=&#34;1-viewmodelstoreã‚’ä½¿ã†&#34;&gt;1. ViewModelStoreã‚’ä½¿ã†&lt;/h3&gt;&#xA;&lt;p&gt;&lt;code&gt;ViewModelProviders.of(activity).get(class)&lt;/code&gt;ã‹ã‚‰ViewModelã‚’å–å¾—ã—ãŸã¨ãã«ã€å–å¾—ã—ãŸViewModelã¯&lt;a href=&#34;https://developer.android.com/reference/androidx/lifecycle/ViewModelStore&#34;&gt;ViewModelStore&lt;/a&gt;ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã¾ã™ã€‚ã“ã®ViewModelStoreã¯FragmentActivityã‹ã‚‰å–å¾—ã§ãã‚‹ã®ã§ã€æ¬¡ã®ã‚ˆã†ã«æ›¸ãã“ã¨ã§ViewModelã®onClearedã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-kotlin&#34; data-lang=&#34;kotlin&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;@RunWith&lt;/span&gt;(AndroidJUnit4&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;BaseViewModelTest&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;@get&lt;/span&gt;:Rule &lt;span style=&#34;color:#66d9ef&#34;&gt;val&lt;/span&gt; activityRule = ActivityTestRule(FragmentActivity&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt;.java)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;@Test&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;fun&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;`dispose a coroutine when finished lifecycle of ViewModel`&lt;/span&gt;() {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    activityRule.activity.viewModelStore.clear() &lt;span style=&#34;color:#75715e&#34;&gt;// ViewModelãŒé–‹æ”¾ã•ã‚Œã‚‹&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pr</description>
    </item>
  </channel>
</rss>
