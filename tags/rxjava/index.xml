<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>rxjava on stsnãƒ–ãƒ­ã‚°</title>
    <link>https://satoshun.github.io/tags/rxjava/</link>
    <description>Recent content in rxjava on stsnãƒ–ãƒ­ã‚°</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja</language>
    <copyright>Sato Shun</copyright>
    <lastBuildDate>Mon, 24 Jun 2019 13:52:14 +0000</lastBuildDate><atom:link href="https://satoshun.github.io/tags/rxjava/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>RxJava 3.xã®é–‹ç™ºãŒæœ¬æ ¼çš„ã«å§‹ã¾ã‚Šã¾ã—ãŸ</title>
      <link>https://satoshun.github.io/2019/06/rxjava3-preview/</link>
      <pubDate>Mon, 24 Jun 2019 13:52:14 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2019/06/rxjava3-preview/</guid>
      <description>ç¾çŠ¶ã§ã®å·®ç•°ã‚’ã¾ã¨ã‚ã¦ãŠãã¾ã™ã€‚
RxJava2ã¨ã®å·®ç•° READMEã‹ã‚‰ README.md
RxJava2 ã¨ã®å·®åˆ†ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚
fixed API mistakes and many limits of RxJava 2 RxJava2ã®ã„ãã¤ã‹ã®APIã®ãƒŸã‚¹ã€åˆ¶é™ã‚’ç›´ã—ã¦ã„ã‚‹ intended to be a replacement for RxJava 2 with relatively few binary incompatible changes APIã«å¤šå°‘ã®å¤‰æ›´ãŒã‚ã‚Šã€ãƒã‚¤ãƒŠãƒªäº’æ›ãŒãªã„ test and diagnostic support via test schedulers, test consumers and plugin hooks ãƒ†ã‚¹ãƒˆã®ã‚µãƒãƒ¼ãƒˆã®å……å®Ÿ 3.x different docsã‹ã‚‰ 3.x different docs
asãƒ¡ã‚½ãƒƒãƒ‰ã¨toãƒ¡ã‚½ãƒƒãƒ‰ toãƒ¡ã‚½ãƒƒãƒ‰ã¯Functionå‹ã‚’å¼•æ•°ã‹ã‚‰å–ã£ã¦ã„ãŸã€‚ã—ã‹ã—ã€ã‚ã‚‰ã‚†ã‚‹Reactiveå‹ã§Functionå‹ã‚’å—ã‘å–ã£ã¦ã„ãŸã®ã§ã€å…±é€šã®Converterã‚’ä½œã‚‹ã“ã¨ãŒå‡ºæ¥ãªã‹ã£ãŸã€‚
// Obsevable.java public final &amp;lt;R&amp;gt; R to(Function&amp;lt;? super Observable&amp;lt;T&amp;gt;, R&amp;gt; converter) // Single.java public final &amp;lt;R&amp;gt; R to(Function&amp;lt;? super Single&amp;lt;T&amp;gt;, R&amp;gt; convert åŒã˜Functionå‹ã‚’å¼•æ•°ã«å–ã‚‹ã®ã§ã€å…±é€šã®ã‚¯ãƒ©ã‚¹ã‚’ä½œã‚‹ã“ã¨ãŒå‡ºæ¥ãªã„ã€‚</description>
    </item>
    
    <item>
      <title>Kotlin: Coroutineã§RxJavaã®zipã£ã½ã„ã‚‚ã®ã‚’è¡¨ç¾ã™ã‚‹</title>
      <link>https://satoshun.github.io/2019/03/coroutine-catalog-zip/</link>
      <pubDate>Sun, 17 Mar 2019 05:17:23 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2019/03/coroutine-catalog-zip/</guid>
      <description>Coroutineã§éåŒæœŸå‡¦ç†ã‚’ä¸¦åˆ—ã«å‡¦ç†ã—ãŸã„ã¨ã—ã¾ã™ã€‚ä¾‹å¤–ã‚’è€ƒæ…®ã—ãªã„ãªã‚‰å˜ç´”ã«asyncã§åŒ…ã‚ã°è‰¯ã„ã§ã™ã€‚
launch { val task1 = async { MainService.task1() } val task2 = async { MainService.task2() } println(&amp;#34;${task1.await()}\n${task2.await()}&amp;#34;) } asyncã§åŒ…ã‚€ã“ã¨ã§ã€ä¸¦åˆ—ã«å‡¦ç†ã‚’ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
æ¬¡ã«ã€å„éåŒæœŸå‡¦ç†ãŒä¾‹å¤–ã‚’åãå ´åˆã‚’è€ƒãˆã¦ã¿ã¾ã™ã€‚ãã®å ´åˆã¯ã€å‘¼ã³å‡ºã—å…ƒã§runCatchingã‚’ä½¿ã„ã¾ã™ã€‚
launch { val task1 = async { runCatching { MainService.task1() } } val task2 = async { runCatching { MainService.task2() } } val result1 = task1.await() val result2 = task2.await() println(&amp;#34;$result1\n&amp;#34; + &amp;#34;$result2\n&amp;#34;) } runCatchingã‚’ä½¿ã†ã“ã¨ã§ã€å‘¼ã³å‡ºã—å…ˆã§ä¾‹å¤–ãŒèµ·ã“ã£ãŸã¨ã—ã¦ã‚‚ã€å‡¦ç†ã‚’ç¶™ç¶šã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
ã¾ãŸã€æ¬¡ã®ã‚ˆã†ã«æ›¸ãã“ã¨ã¯å‡ºæ¥ã¾ã›ã‚“ã€‚
launch { val task1 = async { MainService.task1() } val task2 = async { MainService.</description>
    </item>
    
    <item>
      <title>RxAndroidã«Pull Requestã‚’å‡ºã—ãŸè©±</title>
      <link>https://satoshun.github.io/2019/03/rx-android-pull-request/</link>
      <pubDate>Sat, 02 Mar 2019 13:21:05 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2019/03/rx-android-pull-request/</guid>
      <description>RxAndroidã«Issueã‚’ç«‹ã¦ã¦ã€PRã‚’å‡ºã—ãŸè©±ã§ã™ã€‚åºƒãä½¿ã‚ã‚Œã¦ã„ã‚‹OSSãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å¯¾ã—ã¦ã€Issueã‚’ç«‹ã¦ã¦ã€ãƒ†ã‚¹ãƒˆã‚‚ã‚»ãƒƒãƒˆã§PRã‚’å‡ºã—ãŸã“ã¨ãŒãªã‹ã£ãŸã®ã§ã€ãã‚Œã®è¨˜å¿µè¨˜äº‹ã«ãªã‚Šã¾ã™ã€‚
Issueã®å†…å®¹ å®Ÿéš›ã®Issueã¯ HandlerScheduler.scheduleDirect supports async option? ã«ãªã‚Šã¾ã™ã€‚
Issueã®æ¦‚è¦ã¯ã€RxAndroidã¯2.1.0ã§async messageã«å¯¾å¿œã—ã¾ã—ãŸã€‚ã—ã‹ã—ã€ã“ã‚Œã¯Worker.scheduleã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰ã®ã¿ã®ã‚µãƒãƒ¼ãƒˆã§ã—ãŸã€‚RxJavaã§ã¯Scheduler.scheduleDirectã§ã‚‚ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã•ã‚Œã‚‹ã®ã§ã€ã“ã¡ã‚‰ã‚‚å¯¾å¿œã—ãŸã»ã†ãŒè‰¯ã„ã®ã§ã¯ï¼Ÿã¨æ€ã„Issueã‚’ç«‹ã¦ã¾ã—ãŸã€‚
ãã‚‚ãã‚‚ã“ã®å•é¡Œã«æ°—ã¥ã„ãŸãã£ã‹ã‘ RxAndroidãŒ2.1.0ã§async messageã«å¯¾å¿œã—ãŸæ™‚ã«ã€ã‚µãƒ³ãƒ—ãƒ«ã§åŠ¹æœã‚’æ¸¬å®šã—ãŸã¨ã“ã‚ã€ã„ãã¤ã‹ã®ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ã§ã¯ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®å‘ä¸ŠãŒè¦‹ã‚‰ã‚Œãªã„ã“ã¨ã«æ°—ã¥ãã¾ã—ãŸã€‚ã“ã®ã¨ãã¯ã€ã‚µãƒ³ãƒ—ãƒ«ãŒæ‚ªã„ã®ã‹ã€ãã‚Œã¨ã‚‚ç’°å¢ƒãŒãŠã‹ã—ã„ã®ã‹ã€ã¾ãŸã¾ãŸã“ã‚ŒãŒæ„å›³ã—ãŸæŒ™å‹•ãªã®ã‹ãŒåˆ†ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ã¨ã‚Šã‚ãˆãšã€è‡ªåˆ†ã®ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚’ã—ã¦ã„ã‚‹todoistã«ã€Œè‰¯ãåˆ†ã‹ã‚‰ãªã„ã‘ã©ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒå‘ä¸Šã—ãªã„ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒã‚ã‚‹ã€ã¿ãŸã„ãªã‚¿ã‚¹ã‚¯ã‚’ä½œã£ã¦ã€ã‚ã¨ã§èª¿ã¹ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚
èª¿ã¹æ–¹ ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã™ã‚‹ã‚ã‘ã§ã‚‚ãªã„ã®ã§ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒå‘ä¸Šã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã€å‘ä¸Šã—ãªã„ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã•ã‚Œã‹ãŸã«é•ã„ãŒãªã„ã‹ã‚’ãƒ‡ãƒãƒƒã‚¬ãƒ¼ã‚’ä½¿ã„ã€åœ°é“ã«ã‚³ãƒ¼ãƒ‰ã‚’è¿½ã„ã‹ã‘ã¾ã—ãŸã€‚
çµæœã€Observable.observeOnã§ã¯Worker.scheduleãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚¿ã‚¹ã‚¯ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã‚’ã—ã€Maybe.observeOnã§ã¯Scheduler.scheduleDirectãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã™ã‚‹é•ã„ãŒã‚ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã—ãŸã€‚å¾Œã¯ã€ãã‚Œãã‚Œã®ãƒ‘ã‚¹ã§ã®async messageã®æŒ™å‹•ã®é•ã„ã‚’ç‰¹å®šã—ã€ä¿®æ­£ã™ã‚‹ã ã‘ã§ã™ã€‚
ãã®ä»–ãƒ»æ„Ÿæƒ³ Jakeã•ã‚“ã¨Zacã•ã‚“ã«ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ã—ã¦ã‚‚ã‚‰ã£ãŸ äºŒäººã®ã‚³ãƒ¼ãƒ‰ã¯è‰¯ãèª­ã‚“ã§ã„ã¦ã€å°Šæ•¬ã—ã¦ã„ã‚‹Androidã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãªã®ã§ã€ãã®2äººã«ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ã—ã¦ã‚‚ã‚‰ãˆãŸã®ã¯å¬‰ã—ã‹ã£ãŸã§ã™ğŸ˜ƒ</description>
    </item>
    
    <item>
      <title>RxAndroidã®asyncãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è©¦ã—ã¦ã¿ãŸ</title>
      <link>https://satoshun.github.io/2018/08/rx-android-async-parameter/</link>
      <pubDate>Tue, 21 Aug 2018 00:00:00 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2018/08/rx-android-async-parameter/</guid>
      <description>RxAndroid 2.1.0ã§æ–°ã—ãasyncãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚ã“ã‚Œã¯Message#setAsynchronousã‚’ä½¿ã†ã“ã¨ã§ã€UIã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Šã‚’ç‹™ã£ãŸæ©Ÿèƒ½ã§ã™ã€‚ ä¸‹ã®ãƒªãƒ³ã‚¯ã«è©³ç´°ãªå†…å®¹ãŒæ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚
RxAndroidâ€™s New Async API
ã“ã®è¨˜äº‹ã§ã¯ã€asyncãŒfalseã®å ´åˆã¨trueã®å ´åˆã§ã©ã‚Œãã‚‰ã„ã®å·®ãŒå‡ºã‚‹ã‹ã‚’æ¤œè¨¼ã—ã¦ã¿ã¾ã—ãŸã€‚
æ¤œè¨¼ã«ä½¿ç”¨ã—ãŸã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ä»¥ä¸‹ã«ãªã‚Šã¾ã™ã€‚ https://github.com/satoshun-android-example/RxAndroidExample
ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‹ã„ã¤ã¾ã‚“ã§èª¬æ˜ã—ã¾ã™ã€‚
ã¾ãš2ã¤ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ã‚’ä½œæˆã—ã€
private val mainScheduler = AndroidSchedulers.from(Looper.getMainLooper(), false) private val asyncMainScheduler = AndroidSchedulers.from(Looper.getMainLooper(), true) ä½œã£ãŸã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ã‚’ä½¿ã£ãŸã‚¹ãƒˆãƒªãƒ¼ãƒ ã§å®Ÿè¡Œå®Œäº†æ™‚é–“ã«å·®ãŒå‡ºã‚‹ã‹ã‚’è©¦ã—ã¦ã¿ã¾ã—ãŸã€‚
// asyncãŒfalseã®å ´åˆ Observable .fromCallable { System.currentTimeMillis() } .delay(index, TimeUnit.MILLISECONDS) .observeOn(mainScheduler) .subscribe(...) // asyncãŒtrueã®å ´åˆ Observable .fromCallable { System.currentTimeMillis() } .delay(index, TimeUnit.MILLISECONDS) .observeOn(asyncMainScheduler) .subscribe(...) ãƒ•ãƒ«ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã«ãªã‚Šã¾ã™ã€‚ https://github.com/satoshun-android-example/RxAndroidExample/blob/master/app/src/main/java/com/github/satoshun/example/rxandroidexample/MainActivity.kt
çµæœã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚
// API27 ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ main=130988ms, async=126713msã€€// forã§500å›ãƒ«ãƒ¼ãƒ—ã•ã›ãŸå®Ÿè¡Œæ™‚é–“ã®ç·å’Œ main=130857ms, async=126582ms main=131401ms, async=126909ms main=130763ms, async=126504ms main=132758ms, async=127972ms // API21 ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ main=129869ms, async=125795ms main=130050ms, async=125888ms main=129935ms, async=125853ms main=129908ms, async=125838ms main=129927ms, async=125824ms asyncãŒtrueã®å ´åˆã€æ˜ã‚‰ã‹ã«å®Ÿè¡Œå®Œäº†æ™‚é–“ãŒçŸ­ããªã‚Šã¾ã—ãŸã€‚å°å…¥ã™ã‚‹ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚Šãã†ã§ã™ã€‚</description>
    </item>
    
    <item>
      <title>RxJava: as, toã®é•ã„ã«ã¤ã„ã¦</title>
      <link>https://satoshun.github.io/2017/12/rx-as-to-operator/</link>
      <pubDate>Sat, 23 Dec 2017 00:00:00 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2017/12/rx-as-to-operator/</guid>
      <description>RxJavaã§observableå‹(Flowableã€Observableãªã©)ã‚’ä»–ã®å‹ã«å¤‰æ›ã—ãŸã„ã¨ãã«ã¯ã€toã¾ãŸã¯asã‚’ä½¿ã„ã¾ã™ã€‚
ã“ã®è¨˜äº‹ã§ã¯ãã‚Œãã‚Œã®é•ã„ã‚’èª¬æ˜ã—ã¾ã™ã€‚
toã«ã¤ã„ã¦ toã®ã‚·ã‚°ãƒ‹ãƒãƒ£ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
&amp;lt;R&amp;gt; R to(Function&amp;lt;? super Flowable&amp;lt;T&amp;gt;, R&amp;gt; converter) &amp;lt;R&amp;gt; R to(Function&amp;lt;? super Observable&amp;lt;T&amp;gt;, R&amp;gt; converter) &amp;lt;R&amp;gt; R to(Function&amp;lt;? super Maybe&amp;lt;T&amp;gt;, R&amp;gt; convert) &amp;lt;R&amp;gt; R to(Function&amp;lt;? super Single&amp;lt;T&amp;gt;, R&amp;gt; convert) &amp;lt;U&amp;gt; U to(Function&amp;lt;? super Completable, U&amp;gt; converter) public interface Function&amp;lt;T, R&amp;gt; { R apply(@NonNull T t) throws Exception; } ãã‚Œãã‚Œconverterã‚’Functionã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã§æŒ‡å®šã§ãã€upstream(ã‚ªãƒªã‚¸ãƒŠãƒ«ã®Observable)ã‚’ä»»æ„ã®å‹ã«å¤‰æ›ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
asã«ã¤ã„ã¦ asã®ã‚·ã‚°ãƒ‹ãƒãƒ£ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
&amp;lt;R&amp;gt; R as(@NonNull FlowableConverter&amp;lt;T, ? extends R&amp;gt; converter) &amp;lt;R&amp;gt; R as(@NonNull ObservableConverter&amp;lt;T, ? extends R&amp;gt; converter) &amp;lt;R&amp;gt; R as(@NonNull MaybeConverter&amp;lt;T, ?</description>
    </item>
    
    <item>
      <title>Android: RxJava &#43; OkHttpã‚’ä½¿ã£ã¦401ã®å‡¦ç†ã‚’ã„ã„æ„Ÿã˜ã«ã™ã‚‹</title>
      <link>https://satoshun.github.io/2017/08/rx-okhttp-401/</link>
      <pubDate>Thu, 10 Aug 2017 00:00:00 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2017/08/rx-okhttp-401/</guid>
      <description>(ã“ã®è¨˜äº‹ã¯RxJavaã¨OkHttpã‚’çŸ¥ã£ã¦ã„ã‚‹å‰æã§é€²ã‚ã¦ã„ãã¾ã™ã€‚ã¾ãŸã“ã®è¨˜äº‹ã¯RxJavaã™ã”ãƒ¼ã„ã—ãŸã„ã ã‘ã®è¨˜äº‹ã§ã™ã€‚401ã®ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ã¨ã“ã‚ã¯ã€RxJavaã‚’ä½¿ã„ãŸã„ã ã‘ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã¨ã„ã†ã‹1ä¾‹ã«ãªã‚Šã¾ã™ã€‚)
ã“ã®è¨˜äº‹ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯ ã“ã“(Github)ã«ã‚ã‚Šã¾ã™ã€‚
APIå‘¨ã‚Šã®é–‹ç™ºã‚’ã—ã¦ã„ã¦ã€401ã®ã¨ãã®å‡¦ç†ã‚’ã©ã†ã™ã‚‹ã‹ã¨ã„ã†æ°¸é ã®èª²é¡ŒãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚ ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§é ‘å¼µã‚‹ã¨ã—ãŸã‚‰ä»¥ä¸‹ã®æ„Ÿã˜ã«ãªã‚‹ã‹ãªã¨æ€ã„ã¾ã™ã€‚
OkHttpã®Authenticatorã‚’ä½¿ã„ã€ãã“ã§401ã®ã¨ãã®ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’ã™ã‚‹ã€‚å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ãƒªãƒ³ã‚¯ OkHttpã®Interceptorã‚’ä½¿ã„ã€ãã“ã§401ã®ã¨ãã®ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’ã™ã‚‹ã€‚å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ãƒªãƒ³ã‚¯ å„å‡¦ç†(ä¾‹ãˆã°RxJavaã®Transformerã¨ã‹)ã«401ç”¨ã®å‡¦ç†ã‚’åŸ‹ã‚è¾¼ã‚“ã§ã€retryã‚’æ›ã‘ã‚‹ã€‚ ãªã©ãŒã‚ã‚‹ã‹ãªã¨(OkHttpã€RxJavaã‚’ä½¿ã†ã“ã¨ã‚’å‰æã¨ã™ã‚‹)
ã“ã®ãƒ–ãƒ­ã‚°ã§ã¯OkHttpã®Authenticatorã‚’ä½¿ã†æ–¹æ³•ã§401ã®å‡¦ç†ã‚’ã„ã„æ„Ÿã˜ã«ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚
ã¾ãŸrefresh tokenã¯éåŒæœŸã€APIãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒå¿…è¦ã§ã‚ã‚‹ã¨ã—ã¾ã™ã€‚æ“¬ä¼¼ã‚³ãƒ¼ãƒ‰ã¯ã“ã‚“ãªæ„Ÿã˜ã§ã™ã€‚
fun refreshToken(): Observable&amp;lt;String&amp;gt; { return Observable.just(Credentials.basic(&amp;#34;sato&amp;#34;, &amp;#34;passwordhoge&amp;#34;)) .doOnNext { println(&amp;#34;GET credential: $it&amp;#34;) } // Logå‡ºåŠ› .delay(2000, TimeUnit.MILLISECONDS) } æ™‚é–“ãŒæ›ã‹ã‚‹ã‚“ã ãªã‚ãã‚‰ã„ã«æ€ã£ã¦ä¸‹ã•ã„ã€‚
401ã®å‡¦ç†ã‚’æ›¸ã„ã¦ã„ã OkHttpã®Authenticatorã¯401ã®ã¨ãã«ãƒ•ãƒƒã‚¯ã•ã‚Œã¾ã™ã€‚ãªã®ã§ã“ã®ä¸­ã§401ãªã‚‰refresh tokenã‚’ã—ã€çµæœã‚’authorization headerã«ã‚»ãƒƒãƒˆã—ã¦å†ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã™ã‚Œã°è‰¯ã•ãã†ã§ã™ã€‚
ãŸã ã“ã“ã§1ã¤å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚ãã‚Œã¯ã€APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯ä¸¦åˆ—ã«è¡Œã‚ã‚Œã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚ã¨ã„ã†ã“ã¨ã¯ã€ä½•ã‚‚è€ƒãˆãªã„ã¨refresh tokenãŒè¤‡æ•°å›å©ã‹ã‚Œã¦ã—ã¾ã„ã¾ã™ã€‚ãªã®ã§refresh tokenã‚’ã—ã¦ã„ã‚‹ã¨ãã¯ã€å¾Œç¶šã®401ã¯ãã‚Œã‚’å¾…ã¤ã‚ˆã†ã«ã—ãªã„ã¨ã„ã‘ã¾ã›ã‚“ã€‚
æ„šç›´ã«è¡¨ç¾ã™ã‚‹ãªã‚‰ã€refresh tokenã‚’ã—ã¦ã„ã¾ã™ã‚ˆãƒ•ãƒ©ã‚°ã‚’ã©ã“ã‹ã«ç«‹ã¦ã¦ãŠã„ã¦ã€ãã‚ŒãŒtrueãªã‚‰å¾…ã¤ã€‚falseãªã‚‰refersh tokenã‚’ã—ã¦ã€çµæœã‚’å¾…ã¤ã¨ã„ã£ãŸå‡¦ç†ã«ãªã‚Šã¾ã™ã€‚ ä¸¦åˆ—ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒè¡Œã‚ã‚Œã‚‹ã¨ã—ãŸã‚‰ã€ãƒãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ã‹ã‚‰ã‚³ãƒ¼ãƒ«ã•ã‚Œã‚‹ã®ã§synchorizeãªã©ã®åˆ¶å¾¡ã‚’ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã€ã‚ã£ã¡ã‚ƒãƒ ã‚ºã„ã€‚
RxJavaã‚’ä½¿ã£ã¦ã¿ã‚‹ ä¸Šè¨˜ã®ç¸›ã‚Šã‚’RxJavaã®publish + refCountã‚’ä½¿ã†ã¨ã‚ã£ã¡ã‚ƒã„ã„æ„Ÿã˜ã«è¡¨ç¾ã§ãã¾ã™ã€‚
private val authenticator: Authenticator = object : Authenticator { // ã“ã“ãŒãƒã‚¤ãƒ³ãƒˆã€‚publishã¨refCountã‚’ä½¿ã†ã€‚ private val tokenStream = refreshToken().publish().refCount() // ã“ã‚Œã ã¨é§„ç›® // private val tokenStream = refreshToken() // ã“ã“ã¯ä¸¦åˆ—ã«å‘¼ã°ã‚Œã‚‹ override fun authenticate(route: Route, response: Response): Request?</description>
    </item>
    
    <item>
      <title>RxJava multicastã«ã¤ã„ã¦</title>
      <link>https://satoshun.github.io/2017/05/rx-multicast/</link>
      <pubDate>Thu, 04 May 2017 00:00:00 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2017/05/rx-multicast/</guid>
      <description>RxJavaã«ã¯, streamä¸Šã®ã‚¢ã‚¤ãƒ†ãƒ ã‚’è¤‡æ•°ã®Subscriberã«æ¸¡ã›ã‚‹multicast(å†åˆ©ç”¨ã®ã‚ˆã†ãªæ„Ÿã˜)ã®æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™. multicastã¯ä¸»ã«ã€Œã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¨ã—ã¦ä½¿ã†ã€, ã‚¤ãƒ™ãƒ³ãƒˆã‚’ãŒç™ºç«ã—ãŸã¨ãã«è¤‡æ•°ã§å‡¦ç†ã‚’ãŠã“ãªã†ã€ ã¨ã—ã¦ä½¿ã„ã¾ã™.
RxJavaã§ã¯2ã¤ã®æ–¹æ³•ã§multicastã‚’å®Ÿç¾ã—ã¾ã™.
publishã‚’ä½¿ã„, ConnectableObservableã‚’ä½œã‚‹ Subjectã‚’ä½¿ã† ã¾ãŸ, RxJava2ã ã¨FlowableãŒã‚ã‚Šã¾ã™ãŒ, Flowableã®å ´åˆã¯ Processorã‚’ä½¿ã„ã¾ã™.
èª¬æ˜ã ã‘ã ã¨åˆ†ã‹ã‚Šã«ãã„ã®ã§, ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚‚åˆã‚ã›ã¦ã©ã†ã.
ConnectableObservable Subject ConnectableObservableã«ã¤ã„ã¦ ConnectableObservableã¯publishãŒã‚³ãƒ¼ãƒ«ã•ã‚ŒãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ç”Ÿæˆã•ã‚Œã¾ã™. ã“ã“ãŒStreamã®é–‹å§‹åœ°ç‚¹, å†åˆ©ç”¨ã™ã‚‹åœ°ç‚¹ã«ãªã‚Šã¾ã™. ãªã®ã§, mapã‚„filterãªã©, å…±é€šã®å‡¦ç†ãŒã‚ã‚‹ã®ãªã‚‰, publishã®Upstreamã«æ›¸ã„ã¦å…±é€šåŒ–ã—ãŸã»ã†ãŒåŠ¹ç‡ãŒè‰¯ã„ã§ã™.
ConnectableObservableã¯connectãƒ¡ã‚½ãƒƒãƒ‰ãŒã‚³ãƒ¼ãƒ«ã•ã‚ŒãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§, Streamã®é–‹å§‹ã‚’ã—ã¾ã™. å¾“æ¥ã¯Subscriberã‚’ç™»éŒ²ã—ãŸ(subscribeãƒ¡ã‚½ãƒƒãƒ‰ã‚’ã‚³ãƒ¼ãƒ«ã—ãŸ)ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãªã®ã§, æ³¨æ„ãŒå¿…è¦ã§ã™.
ãã—ã¦, publish + connectã‚’çµ„ã¿ã‚ã›ã‚‹ã“ã¨ã§1ã¤ã®Streamã«å¯¾ã—ã¦è¤‡æ•°ã®Subscriberã‚’ç™»éŒ²ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™.
(source: https://github.com/ReactiveX/RxJava/wiki/Connectable-Observable-Operators)
ä»–ã«ã‚‚, shareã‚„refcountãŒã‚ã‚Šã¾ã™ãŒ, åŸºæœ¬çš„ãªè€ƒãˆæ–¹ã¯å¤‰ã‚ã‚Šã¾ã›ã‚“.
Subjectã‚’ä½¿ã† Subjectã¯, Observableã¨Observerã®æ©Ÿèƒ½ã‚’åŒæ™‚ã«ä½¿ã†ã“ã¨ãŒã§ãã‚‹å®Ÿè£…ã§ã™. 1ä¾‹ã¨ã—ã¦ã¯, Observerã®æ©Ÿèƒ½ã‚’ä½¿ã„, è¤‡æ•°ã®Observableã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—, Observableã®æ©Ÿèƒ½ã‚’ä½¿ã„ãã®ãƒ‡ãƒ¼ã‚¿ã‚’Observerã«æ¸¡ã™, ã„ã‚ã‚†ã‚‹Bridgeã®ã‚ˆã†ãªäº‹ãŒã§ãã¾ã™.
BehaviorSubject, ReplaySubjectãªã©ã®ãƒãƒ©ã‚¨ãƒ†ã‚£ãŒã‚ã‚‹ã®ã§, å¿…è¦ã«å¿œã˜ã¦ä½¿ã„åˆ†ã‘ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™. (https://github.com/ReactiveX/RxJava/wiki/subject)
ã¾ã¨ã‚ multicastã‚’ä¸Šæ‰‹ã«ä½¿ã„ã“ãªã™ã“ã¨ã§, ãƒ‡ãƒ¼ã‚¿ã®å–å¾—å›æ•°ã‚’æ¸›ã‚‰ã—, ã‚¢ãƒ—ãƒªãŒãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«å„ªã‚ŒãŸæ§‹é€ ã«ãªã‚‹ã“ã¨ãŒæœŸå¾…ã§ãã¾ã™. ãã®ãŸã‚ã«ã¯, ã©ã“ã«multicastã‚’å…¥ã‚Œã‚‹ã‹, ã©ã“ã‹ã‚‰ConnectableObservableã«ã™ã‚‹ã‹(publishã‚’ã‚³ãƒ¼ãƒ«ã™ã‚‹ã‹)ã‚’æ±ºå®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™. ã‚¢ãƒ—ãƒªã”ã¨ã«é©åˆ‡ãªãƒã‚¤ãƒ³ãƒˆ, æ›¸ãæ–¹ã¯ç•°ãªã‚‹ã¨æ€ã†ã®ã§, ã‚µãƒ³ãƒ—ãƒ«ã‚’å‚è€ƒã«é ‚ã‘ãŸã‚‰å¹¸ã„ã§ã™.
Happy RxJava2 life!!
å‚è€ƒ Multicasting in RxJava RxJava </description>
    </item>
    
    <item>
      <title>RxJava ä¸¦è¡Œã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã—ã¦, ãƒªã‚¯ã‚¨ã‚¹ãƒˆã—ãŸé †ç•ªã§å€¤ã‚’å—ã‘å–ã‚‹</title>
      <link>https://satoshun.github.io/2017/05/rx-concateager-parallel-request/</link>
      <pubDate>Thu, 04 May 2017 00:00:00 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2017/05/rx-concateager-parallel-request/</guid>
      <description>çµè«– concatEagerã‚’ä½¿ã† concat, concatEager RxJavaã«ã¯concatEagerã¨, concatã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã™. ä¼¼ãŸåå‰ã§ã™ãŒ, æŒ¯ã‚‹èˆã„ã¯ç•°ãªã‚Šã¾ã™. concatEagerã¯concatã¨é•ã„, ä¸¦åˆ—ã«Observableã¯å‡¦ç†ã™ã‚‹ã‘ã©, è¿”ã—ã¦ãã‚‹é †ç•ªã¯ä¿è¨¼ã•ã‚Œã¦ã„ã¾ã™
concat: ç›´åˆ—ã«Observableã‚’å‡¦ç†ã—, è¿”ã—ã¦ãã‚‹é †ç•ªã¯ä¿è¨¼ã•ã‚Œã¦ã„ã‚‹ concatEager: ä¸¦åˆ—ã«Observableã‚’å‡¦ç†ã—, è¿”ã—ã¦ãã‚‹é †ç•ªã¯ä¿è¨¼ã•ã‚Œã¦ã„ã‚‹ ã‚³ãƒ¼ãƒ‰ã§èª¬æ˜ã™ã‚‹ã¨,
// o1 ----&amp;gt; | // o2 |------&amp;gt;| // | | // s ------o1------o2 Observable.concat(o1, o2) .subscribe(); // o1 -----------&amp;gt;| // o2 --&amp;gt;---------|-| // | | // s ------------o1-o2 Observable.concatEager(o1, o2) .subscribe(); ã¿ãŸã„ãªæ„Ÿã˜ã«ãªã‚Šã¾ã™. ç¹°ã‚Šè¿”ã—ã«ãªã‚Šã¾ã™ãŒ ,concatEagerã¯åŒæ™‚ã«ä¸ãˆãŸObservableã‚’è§£é‡ˆã—, é †ç•ªã‚’å®ˆã£ã¦ãã‚Œã¾ã™.</description>
    </item>
    
    <item>
      <title>RxJava: AutoDisposeã§è‡ªå‹•çš„ã«disposeã™ã‚‹</title>
      <link>https://satoshun.github.io/2017/05/rx-autodispose/</link>
      <pubDate>Thu, 04 May 2017 00:00:00 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2017/05/rx-autodispose/</guid>
      <description>éåŒæœŸå‡¦ç†ã‚’é–‹å§‹ã—ãŸå¾Œã«, Activityã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãªã©ã«é€£å‹•ã—ã¦éåŒæœŸå‡¦ç†ã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™.
RxJavaã§ã¯, Disposableã‹ã‚‰ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã®å‡¦ç†ã‚’è¡Œã„ã¾ã™.
Disposable d; public void onCreate() { d = myObservable .map(a -&amp;gt; b) .subscribe(); } public void onPause() { d.dispose(); } ã“ã®ã‚³ãƒ¼ãƒ‰ã ã¨, ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®å®šç¾©ã¨, ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã®ã‚³ãƒ¼ãƒ‰ãŒé›¢ã‚Œéãã¦ã„ã‚‹ãŸã‚, å¯èª­æ€§ãŒä½ã„ã§ã™.
AutoDisposeã‚’ä½¿ã†ã“ã¨ã§, ã‚³ãƒ¼ãƒ‰é›¢ã‚Œã™ãå•é¡Œã‚’è§£æ±ºã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™.
public void onCreate() { myObservable .to(new ObservableScoper&amp;lt;&amp;gt;(this)) .subscribe(); } ã“ã®ã‚ˆã†ãªæ„Ÿã˜ã§, ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®å®šç¾©ã®ä¸­ã«AutoDisposeãŒæä¾›ã—ã¦ã„ã‚‹Scoperã‚’åŸ‹ã‚è¾¼ã‚€ã“ã¨ã§è‡ªå‹•çš„ã«disposeã—ã¦ãã‚Œã¾ã™.
ã¾ãŸ, Scoperã¯, ã‚«ã‚¹ã‚¿ãƒ ã§æŸ”è»Ÿã«å®šç¾©ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™. ä¾‹ãˆã°,
Activityã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ« Fragmentã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ« RecyclerViewã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ« ãªã©, ã“ã¡ã‚‰å´ã§å®Ÿè£…ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™(å®Ÿè£…ã®æ‰‹é–“ã¯å°‘ã—æ›ã‹ã‚Šã¾ã™)
ã“ã‚Œã§, Disposableã‚’ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã§å‘¼ã³å‡ºã™ã“ã¨ã‹ã‚‰è§£æ”¾ã•ã‚Œã¾ã™!
Error Proneã¨çµ„ã¿åˆã‚ã›ã‚‹ã¨æœ€å¼· ã¨ã¯ã„ãˆ, ãã‚‚ãã‚‚Scopeã‚’ã‚¹ãƒˆãƒªãƒ¼ãƒ ã«åŸ‹ã‚è¾¼ã‚€ã®ã‚’å¿˜ã‚Œã‚‹å•é¡ŒãŒã‚ã‚Šã¾ã™(ã ã£ã¦äººé–“ã ã‚‚ã®)
ãã“ã§, GoogleãŒå‡ºã—ãŸError Proneã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§åŸ‹ã‚è¾¼ã‚€ã®ã‚’å¿˜ã‚Œã‚‹å•é¡Œã‚’è§£æ±ºå‡ºæ¥ã¾ã™.
Error Proneã¯Javaã®é–“é•ã£ãŸä½¿ã„æ–¹ã‚’æ•™ãˆã¦ãã‚Œã‚‹ Linterã®ã‚ˆã†ãªã‚‚ã®ã§ã™. ã“ã‚Œã‚’ä½¿ã†ã¨,
public void onCreate() { myObservable .map(a -&amp;gt; b) .</description>
    </item>
    
    <item>
      <title>RxJava: Connectable Observableã«ã¤ã„ã¦</title>
      <link>https://satoshun.github.io/2017/05/rx-connectable-observable/</link>
      <pubDate>Thu, 04 May 2017 00:00:00 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2017/05/rx-connectable-observable/</guid>
      <description>çµè«– åŒã˜Streamã‚’è¤‡æ•°ã®Observerã§æ‰±ã„ãŸã„ã¨ãã¯Connectable Observableã‚’ä½¿ã† åŠ¹ç‡çš„!! Connectable Observableã¯subscribeã‚’ã‚³ãƒ¼ãƒ«ã—ã¦ã‚‚, StreamãŒé–‹å§‹ã—ãªã„ connectãƒ¡ã‚½ãƒƒãƒ‰ã‚’ã‚³ãƒ¼ãƒ«ã—ãŸæ™‚ã«, StreamãŒé–‹å§‹ã™ã‚‹ åŸºæœ¬çš„ãªä½¿ã„æ–¹ åŒã˜ãƒ‡ãƒ¼ã‚¿ã‚’å¿…è¦ã¨ã—ã¦ã„ã‚‹ObserverãŒã‚ã‚‹ã¨ã—ã¾ã™. ã“ã‚Œã‚’å˜ç´”ã«æ›¸ãã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™.
Obervable&amp;lt;User&amp;gt; getUsers() { return Observalbe.just(User1, User2, User3);} Obervable&amp;lt;User&amp;gt; users = getUsers(); users.subscribe(o1); users.subscribe(o2); users.subscribe(o3); ã“ã‚Œã ã¨, subscribeã•ã‚Œã‚‹ãŸã³ã«æ–°ã—ã„StreamãŒä½œã‚‰ã‚Œã¦ã—ã¾ã„ã¾ã™. ä¸Šã®ä¾‹ã ã¨3ã¤ã®ç‹¬ç«‹ã—ãŸObservableãŒä½œæˆã•ã‚Œã¦ã—ã¾ã„, éå¸¸ã«åŠ¹ç‡ãŒæ‚ªã„ã§ã™.
Connectable Observableã‚’ä½¿ã†ã“ã¨ã§, 1ã¤ã®Streamã‹ã‚‰subscribeã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™.
ConnectableObservable&amp;lt;User&amp;gt; users = getUsers().publish(); users.subscribe(o1); users.subscribe(o2); users.subscribe(o3); users.connect(); // é‡è¦!! publishã‚ªãƒšãƒ¬ãƒ¼ã‚¿ã‚’é©ç”¨ã™ã‚‹ã“ã¨ã§, Connectable Observableã«å¤‰æ›å‡ºæ¥ã¾ã™. ãã—ã¦, Connectable Observableã«å¯¾ã—ã¦Observerã‚’subscribeã—, æœ€å¾Œã«connectã‚’ã‚³ãƒ¼ãƒ«ã™ã‚‹ã“ã¨ã§, å…±é€šã®Streamã‹ã‚‰subscribeã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™.
æµã‚Œã¨ã—ã¦ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™.
publishã‚’ã‚³ãƒ¼ãƒ«ã™ã‚‹ã¨, Connectable ObservableãŒä½œæˆå‡ºæ¥ã‚‹ Connectable Observableã‚’ã„ãã¤ã‹ã®Observerã§subscribeã™ã‚‹ ã“ã“ã§ã¯Streamã¯é–‹å§‹ã•ã‚Œãš, ç™»éŒ²ã®ã¿ã•ã‚Œã‚‹ æœ€å¾Œã«connectã‚’ã‚³ãƒ¼ãƒ«ã™ã‚‹ StreamãŒé–‹å§‹ã•ã‚Œã‚‹. ç™»éŒ²ã—ãŸObserverã«å¯¾ã—ã¦å…±é€šã®å€¤ãŒemitã•ã‚Œã¦ã„ã ã“ã‚ŒãŒåŸºæœ¬çš„ãªConnectable Observableã®ä½¿ã„æ–¹ã«ãªã‚Šã¾ã™.
ã¾ã¨ã‚ publish + connectã¯, Connectable Observableã®ä¸­ã§ã‚‚ä¸€ç•ªãƒãƒ”ãƒ¥ãƒ©ãƒ¼ãªã‚‚ã®ã§ã™. RxJavaã«ã¯ä»–ã«ã‚‚, replayã‚„cacheã¨ã„ã£ãŸConnectable Observableã®ãƒ•ã‚¡ãƒŸãƒªãƒ¼APIãŒã‚ã‚Šã¾ã™.</description>
    </item>
    
    <item>
      <title>RxJava: Subjectã§onErrorã‚’å–ã‚Šæ‰±ã†æ™‚</title>
      <link>https://satoshun.github.io/2017/05/rx-subject-materialize/</link>
      <pubDate>Thu, 04 May 2017 00:00:00 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2017/05/rx-subject-materialize/</guid>
      <description>çµè«– materialize, dematerializeã‚’ä½¿ã†. èƒŒæ™¯ onErrorã‚’Subjectã«æµã™ã¨, Subjectã¯disposeçŠ¶æ…‹ã«ãªã‚‹ãŸã‚, ã“ã‚Œä»¥é™ã®Eventã‚’æµã™ã“ã¨ãŒå‡ºæ¥ãªããªã‚Šã¾ã™.
sub.subscribe( v -&amp;gt; Log.d(&amp;#34;onNext&amp;#34;, String.valueOf(v)), e -&amp;gt; Log.d(&amp;#34;onError&amp;#34;, e.getMessage())); sub.onNext(v1); sub.onNext(v2); sub.onError(e1); sub.onNext(v3); // ignore sub.onNext(v4); // ignore ã“ã‚Œã ã¨, SubjectãŒã“ã‚Œä»¥é™ã«å€¤ã‚’å—ã‘ä»˜ã‘ãªã„ãŸã‚ä¸ä¾¿ã«ãªã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™.(ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹æ¬¡ç¬¬)
materialize + dematerializeã‚ªãƒšãƒ¬ãƒ¼ã‚¿ã‚’ä½¿ã†ã¨, ã“ã®å•é¡Œã‚’è§£æ±ºå‡ºæ¥ã¾ã™.
Observable.create((ObservableOnSubscribe&amp;lt;String&amp;gt;) e -&amp;gt; { e.onNext(&amp;#34;1&amp;#34;); e.onNext(&amp;#34;2&amp;#34;); e.onError(new RuntimeException(&amp;#34;e1&amp;#34;)); }).materialize().subscribe(sub::onNext); Observable.create((ObservableOnSubscribe&amp;lt;String&amp;gt;) e -&amp;gt; { e.onNext(&amp;#34;3&amp;#34;); e.onNext(&amp;#34;4&amp;#34;); e.onError(new RuntimeException(&amp;#34;e2&amp;#34;)); }).materialize().subscribe(sub::onNext); materialize ã‚’ä½¿ã„, Errorã‚¤ãƒ™ãƒ³ãƒˆã‚’Nextã‚¤ãƒ™ãƒ³ãƒˆã«å¤‰æ›ã—ã¾ã™
ãã—ã¦, Subscribeã™ã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§, dematerializeã§Nextã‚¤ãƒ™ãƒ³ãƒˆã‚’Errorã‚¤ãƒ™ãƒ³ãƒˆã«æˆ»ã—ã¾ã™.
sub.dematerialize().subscribe( v -&amp;gt; Log.d(&amp;#34;onNext&amp;#34;, String.valueOf(v)), e -&amp;gt; Log.d(&amp;#34;onError&amp;#34;, e.getMessage())); ã“ã†ã™ã‚‹ã“ã¨ã§, Subjectã‚’disposeçŠ¶æ…‹ã«ã›ãšã«, Observerã§onErrorã‚¤ãƒ™ãƒ³ãƒˆã‚’å‡¦ç†ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™.
å‚ç…§ ReactiveX - Materialize &amp;amp; Dematerialize operators </description>
    </item>
    
    <item>
      <title>Android: Fragmentã‚’ä½¿ã£ã¦ã€ç”»é¢ã®å‘ãã®å¤‰æ›´æ™‚ã«ãƒ‡ãƒ¼ã‚¿ã‚’ä¿æŒã™ã‚‹</title>
      <link>https://satoshun.github.io/2016/10/android-orientation-data/</link>
      <pubDate>Sun, 09 Oct 2016 00:00:00 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2016/10/android-orientation-data/</guid>
      <description>onSaveInstanceState, onRestoreInstanceStateã‚’ä½¿ã†æ–¹æ³•ã‚‚ã‚ã‚Šã¾ã™ãŒ, ä»Šå›ã¯Fragmentã‚’ä½¿ã†æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™.
ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯ https://github.com/satoshun-example/AndroidRetainData ã«ã‚ã‚Šã¾ã™.
ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã¯ã‚³ã‚¹ãƒˆãŒæ›ã‹ã‚‹ã®ã§, 1åº¦ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ãŸã‚‰, ç”»é¢å›è»¢ã§ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ãŒå†ç”Ÿæˆã•ã‚ŒãŸã¨ã—ã¦ã‚‚ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã„ã¾ã‚ã—ãŸã„, ã¨ã„ã†ã‚±ãƒ¼ã‚¹ãŒã‚ã‚‹ã¨ã—ã¾ã™.
ã‚„ã‚Šæ–¹ ã¾ãš, ãƒ‡ãƒ¼ã‚¿ã‚’ä¿æŒã™ã‚‹Fragmentã‚’å®šç¾©ã—ã¾ã™.
æœ€åˆã«onCreateã§, setRetainInstance(true)ã‚’ã‚³ãƒ¼ãƒ«ã—ã¾ã™.
@Override public void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setRetainInstance(true); refresh(); } æ¬¡ã«, refreshã§ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¾ã™. ã“ã“ã§ã¯RxJava2 + Retrofitã‚’ä½¿ã£ã¦ã„ã¾ã™.
void refresh() { disposables.clear(); disposables.add(provideGithubAPI() .getRepositories(&amp;#34;satoshun&amp;#34;) .subscribeOn(Schedulers.computation()) .observeOn(AndroidSchedulers.mainThread()) .subscribe( data -&amp;gt; subject.onNext(data), e -&amp;gt; subject.onError(e))); } APIã‚³ãƒ¼ãƒ«ã‚’ã—ã¦, å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’BehaviorSubject(subject)ã«ä¸ãˆã¾ã™.
æœ€å¾Œã«observableãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®šç¾©ã—, ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹(subject)ã‚’ä»–ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹å‡ºæ¥ã‚‹ã‚ˆã†ã«ã—ã¾ã™.
Observable&amp;lt;List&amp;lt;Repo&amp;gt;&amp;gt; observable() { return subject; } Fragmentã®ãƒ•ãƒ«ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯ã“ã“ã«ã‚ã‚Šã¾ã™.
æ¬¡ã«, Activityã®æº–å‚™ã‚’ã—ã¾ã™. Activityã®onCreateã§ãƒ‡ãƒ¼ã‚¿Fragmentã‚’ä½¿ã†ã‚ˆã†ã«ã™ã‚‹ã ã‘ã§ã™.
@Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); dataFrag = (RetainFragment) getSupportFragmentManager().</description>
    </item>
    
  </channel>
</rss>
