<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Bom on stsnブログ</title>
    <link>https://satoshun.github.io/tags/bom/</link>
    <description>Recent content in Bom on stsnブログ</description>
    <generator>Hugo</generator>
    <language>ja</language>
    <copyright>Sato Shun</copyright>
    <lastBuildDate>Tue, 18 Feb 2020 13:08:10 +0000</lastBuildDate>
    <atom:link href="https://satoshun.github.io/tags/bom/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Gradle: BOMを使って依存を指定する</title>
      <link>https://satoshun.github.io/2020/02/gradle-bom-android/</link>
      <pubDate>Tue, 18 Feb 2020 13:08:10 +0000</pubDate>
      <guid>https://satoshun.github.io/2020/02/gradle-bom-android/</guid>
      <description>&lt;p&gt;Gradleの5から、Bill Of Materials(BOM)が使えるようになりました。これが、結構いいものだと思ったので紹介します。&lt;/p&gt;&#xA;&lt;p&gt;ついでに&lt;a href=&#34;https://dependabot.com/&#34;&gt;dependabot&lt;/a&gt;の話もちょっとします。&lt;/p&gt;&#xA;&lt;h2 id=&#34;bom&#34;&gt;BOM?&lt;/h2&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://docs.gradle.org/5.0/userguide/managing_transitive_dependencies.html#sec:bom_import&#34;&gt;BOM&lt;/a&gt;を使うことで、 複数のライブラリのバージョンを省略することが出来ます。&lt;/p&gt;&#xA;&lt;p&gt;ドキュメントの例にはspring-bootが挙げられています。&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-groovy&#34; data-lang=&#34;groovy&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;dependencies &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// import a BOM&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  implementation &lt;span style=&#34;color:#a6e22e&#34;&gt;platform&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;org.springframework.boot:spring-boot-dependencies:1.5.8.RELEASE&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// define dependencies without versions&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  implementation &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;com.google.code.gson:gson&amp;#39;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  implementation &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;dom4j:dom4j&amp;#39;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;gson、dom4jのバージョンを省略していることが分かると思います。&lt;/p&gt;&#xA;&lt;p&gt;Androidでよく使うライブラリでBOMに対応しているライブラリには、例えば次があります。&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://square.github.io/okhttp/&#34;&gt;OkHttp&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://github.com/Kotlin/kotlinx.coroutines&#34;&gt;Kotlin Coroutine&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://firebase.google.com/docs/android/setup#firebase-bom&#34;&gt;Firebase&lt;/a&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;例えば、OkHttpならこんな感じで書けます。&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-groovy&#34; data-lang=&#34;groovy&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;dependencies &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   implementation &lt;span style=&#34;color:#a6e22e&#34;&gt;platform&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;com.squareup.okhttp3:okhttp-bom:4.4.0&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   implementation &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;com.squareup.okhttp3:okhttp&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   implementation &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;com.squareup.okhttp3:logging-interceptor&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;BOMを使うことで、関連ライブラリをまとめてアップデートすることが出来るのでとても便利です。&lt;/p&gt;&#xA;&lt;h2 id=&#34;dependabot&#34;&gt;dependabot?&lt;/h2&gt;&#xA;&lt;p&gt;直接はBOMに関係ないんですけど、最近、&lt;a href=&#34;https://dependabot.com/&#34;&gt;dependabot&lt;/a&gt;が便利だと自分の中で話題になっていて、これはライブラリのアップデートを自動でやってくれるbotになります。&lt;/p&gt;&#xA;&lt;p&gt;例えば、こんな感じのPRを作ってくれます。&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/satoshun-android-example/dependabot/pull/4&#34;&gt;Bump versions.retrofit from 2.7.0 to 2.7.1&lt;/a&gt;&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;figure&gt;&lt;img src=&#34;https://satoshun.github.io/blog/gradle/dependabot-pr.png&#34;&gt;&#xA;&lt;/figure&gt;&#xA;&#xA;&lt;hr&gt;&#xA;&lt;p&gt;それでdependabotって、&lt;code&gt;versions.retrofit = &#39;2.7.1&#39;&lt;/code&gt;って感じで、変数で定義すると検知できないって思っていたんですけど、&#xA;いろいろ試してみたら、普通に出来ました:D&lt;/p&gt;&#xA;&lt;p&gt;BOMとdependabotは相性いいぞ！！って書こうと思ったんですけど、変数の場合でもアップデートを検知してくれたので、特に関係なかったです😅&lt;/p&gt;&#xA;&lt;p&gt;とはいえ、わざわざ自前で変数定義する必要はなくなるので、BOMは便利です！&lt;/p&gt;&#xA;&lt;h2 id=&#34;まとめ&#34;&gt;まとめ&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;BOMはいいぞ〜&lt;/li&gt;&#xA;&lt;li&gt;dependabotはいいぞ〜&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
  </channel>
</rss>
