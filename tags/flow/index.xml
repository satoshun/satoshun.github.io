<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>flow on stsnãƒ–ãƒ­ã‚°</title>
    <link>https://satoshun.github.io/tags/flow/</link>
    <description>Recent content in flow on stsnãƒ–ãƒ­ã‚°</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja</language>
    <copyright>Sato Shun</copyright>
    <lastBuildDate>Mon, 13 Jan 2020 11:47:10 +0000</lastBuildDate>
    
	<atom:link href="https://satoshun.github.io/tags/flow/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>Kotlin: Flowã®flowOnã‚ªãƒšãƒ¬ãƒ¼ã‚¿ã®æŒ™å‹•</title>
      <link>https://satoshun.github.io/2020/01/coroutine-flowon/</link>
      <pubDate>Mon, 13 Jan 2020 11:47:10 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2020/01/coroutine-flowon/</guid>
      <description>Coroutineã®Flowã«ã¯flowOnã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãŒå®šç¾©ã•ã‚Œã¦ãŠã‚Šã€å®Ÿè¡Œã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
ã“ã®è¨˜äº‹ã¯RxJava2ã®subscribeOnã¨ã®æŒ™å‹•ã®é•ã„ã‚’è¦‹ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚
å‹•ã‹ã—ã¦ã¿ã‚‹ ã¾ãšã¯ã€Flowã‹ã‚‰ã€‚
withContext(Dispatchers.Main) { flowOf(1) .map { // Dispatchers.Defaultã§å‹•ã  println(&amp;#34;${Thread.currentThread()}&amp;#34;) it } .flowOn(Dispatchers.Default) .map { // Dispatchers.Mainã§å‹•ã  println(&amp;#34;${Thread.currentThread()}&amp;#34;) it } .collect { // Dispatchers.Mainã§å‹•ã  println(&amp;#34;${Thread.currentThread()}&amp;#34;) } } flowOnã®ä¸Šéƒ¨ï¼ˆupstream)ã§ã¯ã€Dispatchers.Defaultã§å‹•ãã€ä¸‹éƒ¨ï¼ˆdownstream)ã§ã¯ã€flowOnã®å½±éŸ¿ã‚’å—ã‘ã¦ã„ãªã„ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚flowOnã¯downstreamã«å½±éŸ¿ã—ãªã„ãŸã‚ã€ã“ã®ã‚ˆã†ãªå‹•ä½œã«ãªã‚Šã¾ã™ã€‚
æ¬¡ã«RxJavaã§ã™ã€‚
Single .just(1) .map { // Schedulers.ioä¸Šã§å‹•ã  println(&amp;#34;${Thread.currentThread()}&amp;#34;) it } .subscribeOn(Schedulers.io()) .map { // Schedulers.ioä¸Šã§å‹•ã  println(&amp;#34;${Thread.currentThread()}&amp;#34;) it } .subscribe({ // Schedulers.ioä¸Šã§å‹•ã  println(&amp;#34;${Thread.currentThread()}&amp;#34;) }) {} RxJavaã§ã¯subscribeOnã¯ã€ç‰¹ã«é€”ä¸­ã§ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ãƒ¼ã®å¤‰æ›´ãŒç„¡ã„é™ã‚ŠåŒä¸€ã®ã‚¹ãƒ¬ãƒƒãƒ‰ã§å‹•ä½œã—ã¾ã™ã€‚ ãªã®ã§ã€subscribeOn(Schedulers.io())ã‚’è¨­å®šã™ã‚‹ã¨ã€ä¸‹éƒ¨ï¼ˆdownstream)ã§ã‚‚Schedulers.ioä¸Šã§å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚
Flowã®flowOnã‚’ã€RxJavaã®subscribeOnã¨åŒã˜æ„Ÿè¦šã§å®Ÿè£…ã™ã‚‹ã¨ã€é–“é•ã£ã¦ã—ã¾ã†ã®ã§æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚
ãŸã ã€Flowã®mapãªã©ã®ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼ã¯suspendé–¢æ•°ã‚’å–ã‚‹ã®ã§ã€åŸºæœ¬çš„ã«ã¯ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’æ„è­˜ã—ãªãã¦ã‚‚è‰¯ã„ã¯ãšã§ã™ã€‚
ã¾ã¨ã‚  flowOnã¨RxJavaã®subscribeOnã€å‹•ä½œãŒãã‚Œãã‚Œç•°ãªã‚‹ã®ã§æ³¨æ„ãŒå¿…è¦  </description>
    </item>
    
    <item>
      <title>Kotlin: Flowã®Bufferã®æŒ‡å®šã«ã¤ã„ã¦</title>
      <link>https://satoshun.github.io/2019/08/flow-buffer/</link>
      <pubDate>Sat, 03 Aug 2019 23:37:02 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2019/08/flow-buffer/</guid>
      <description>Coroutineã®Flowã«ã¯Bufferã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚Bufferã®æŒ‡å®šã«ã‚ˆã£ã¦ã©ã®ã‚ˆã†ã«å‹•ä½œãŒå¤‰ã‚ã‚‹ã‹ã‚’è©¦ã—ã¦ã¿ã¾ã—ãŸã€‚
ã“ã®è¨˜äº‹ã¯ã€å°‘ã—Flowã‚’è§¦ã£ãŸã“ã¨ã‚ã‚‹ãï¼ã£ã¦è¨€ã†äººå‘ã‘ã«ãªã‚Šã¾ã™ã€‚ã¾ãŸã€æ¤œè¨¼ã¯Coroutine 1.3.0-RCã§è¡Œã£ã¦ãŠã‚Šã¾ã™ã€‚
Bufferã®ç¨®é¡ Bufferã®ç¨®é¡ã¯5ã¤ã‚ã‚Šã¾ã™ã€‚
 UNLIMITED RENDEZVOUS CONFLATED BUFFERED 50ã€100ãªã©ã®ã€å…·ä½“çš„ãªå€¤  å®Ÿè³ªã€BUFFEREDã¨åŒã˜æŒ™å‹•ã‚’ã™ã‚‹    æ¤œè¨¼ã‚³ãƒ¼ãƒ‰ // flowã‚¹ãƒˆãƒªãƒ¼ãƒ ã®ä½œæˆ val f = flow { repeat(100) { delay(1) emit(&amp;#34;$it&amp;#34;) } } // observeã™ã‚‹ lifecycleScope.launch { f .buffer(...) ã“ã“ã§Bufferã‚’æŒ‡å®šã™ã‚‹ .collect { delay(100) Log.d(&amp;#34;t4&amp;#34;, &amp;#34;$it&amp;#34;) } } ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€ã¾ãšæœ€åˆã«ã€flowãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã£ã¦ã€Flowã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’ä½œã‚Šã¾ã™ã€‚ã“ã‚Œã‚’ã“ã®è¨˜äº‹ã§ã¯Producerï¼ˆç”Ÿç”£è€…ï¼‰ã¨å‘¼ã³ã¾ã™ã€‚ã“ã®Producerã¯1ã¤ã®å€¤ã‚’é€ã‚‹ã®ã«ç´„delay(1)ã‹ã‹ã‚Šã¾ã™ã€‚ãªã®ã§ã€å‡¦ç†ã«ç´„1msã‹ã‹ã‚Šã¾ã™ã€‚
æ¬¡ã«ã€ä½œã£ãŸflowã‚’observeã—ã¾ã™ã€‚observeã™ã‚‹å´ã‚’Consumerï¼ˆæ¶ˆè²»è€…ï¼‰ã¨å‘¼ã³ã¾ã™ã€‚Consumerã§ã¯delay(100)ã—ã¦ã„ã‚‹ã®ã§ã€å‡¦ç†ã«ç´„100msã‹ã‹ã‚Šã¾ã™ã€‚
ã“ã‚Œã¯ã€æ¬¡ã®é–¢ä¿‚ã‚’ä½œã‚Šå‡ºã—ã¦ã„ã¾ã™
 Consumerã®å‡¦ç†æ™‚é–“ &amp;gt; Producerã®å‡¦ç†æ™‚é–“  ã“ã®çŠ¶æ…‹ã§ã€Bufferã‚’æŒ‡å®šã—ãŸã‚‰ã©ã®ã‚ˆã†ã«æŒ™å‹•ãŒå¤‰ã‚ã‚‹ã‹ã‚’è¦‹ã¦ã„ãã¾ã™ã€‚
UNLIMITED f .buffer(Channel.UNLIMITED) .collect { delay(100) Log.d(&amp;#34;t4&amp;#34;, &amp;#34;$it&amp;#34;) } UNLIMITEDã¯Bufferã®ã‚µã‚¤ã‚ºã‚’ç„¡åˆ¶é™ã«ã—ã¾ã™ã€‚
Consumerå´ã§å‡¦ç†ãŒçµ‚ã‚ã£ã¦ãªãã¦ã‚‚å€¤ã‚’é€ã‚Šã¾ã™ã€‚ãã®å€¤ã¯ã€ConsumerãŒç¾åœ¨ã®ã‚¿ã‚¹ã‚¯ã‚’ã—ã¦ã„ãŸã‚‰ã€flowã®å†…éƒ¨ã§ä¸€æ—¦ä¿å­˜ã•ã‚Œã¾ã™ã€‚ãã—ã¦ã€Consumerã®ç¾åœ¨ã®ã‚¿ã‚¹ã‚¯ãŒå®Œäº†ã—ãŸã‚‰ã€å†…éƒ¨ã§ä¿å­˜ã—ãŸãƒ‡ãƒ¼ã‚¿ãŒ1ã¤ãšã¤æµã‚Œã¦ãã¾ã™ã€‚
 Producer: Consumerã®çŠ¶æ…‹ã«é–¢ã‚ã‚‰ãšã€å€¤ã‚’æµã—ã¦ãã‚‹ã€‚Consumerã®å‡¦ç†ãŒçµ‚ã‚ã£ã¦ã„ãªã„ã¨ãã¯ã€å†…éƒ¨ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ä¿å­˜ã•ã‚Œã¦ã„ã Consumer: ã™ã¹ã¦ã®å€¤ã‚’é †ç•ªé€šã‚Šã«å—ã‘å–ã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹  RENDEZVOUS f .</description>
    </item>
    
    <item>
      <title>ConstraintLayout Flowã®ç´¹ä»‹</title>
      <link>https://satoshun.github.io/2019/04/constraintlayout-flow/</link>
      <pubDate>Sun, 28 Apr 2019 11:13:20 +0000</pubDate>
      
      <guid>https://satoshun.github.io/2019/04/constraintlayout-flow/</guid>
      <description>ConstraintLayoutã®2.0.0 alpha 5ã«Flow Virtual LayoutãŒå°å…¥ã•ã‚Œã¾ã—ãŸğŸ‰ Flowã‚’ä½¿ã†ã“ã¨ã§ã€å¯¾è±¡ã®Viewã‚’æ§˜ã€…ãªãƒ«ãƒ¼ãƒ«ã§ä¸¦ã¹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ãƒ¡ãƒªãƒƒãƒˆã¨ã—ã¦ã¯ã€æ¬¡ã®ã‚ˆã†ãªã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚
 Viewã®éšå±¤ã‚’ãƒ•ãƒ©ãƒƒãƒˆã«ä¿ã¤ã“ã¨ãŒå‡ºæ¥ã‚‹ Flowã¯æ™®é€šã®Viewã®ã‚ˆã†ã«æ‰±ã†äº‹ãŒã§ãã‚‹ MotionLayoutã¨ç›¸æ€§ãŒè‰¯ã„  ã§ã¯ã€ã©ã®ã‚ˆã†ã«æ›¸ãã®ã‹ã‚’è¦‹ã¦ã„ãã¾ã™ã€‚
 1. é…ç½®ã™ã‚‹æ–¹å‘ã‚’æ±ºã‚ã‚‹ android:orientationã‹ã‚‰ã€horizontal or verticalã‚’æŒ‡å®šã§ãã¾ã™ã€‚
&amp;lt;androidx.constraintlayout.widget.ConstraintLayout android:layout_width=&amp;#34;match_parent&amp;#34; android:layout_height=&amp;#34;match_parent&amp;#34;&amp;gt; &amp;lt;androidx.constraintlayout.helper.widget.Flow android:id=&amp;#34;@+id/flow&amp;#34; android:layout_width=&amp;#34;0dp&amp;#34; android:layout_height=&amp;#34;0dp&amp;#34; android:orientation=&amp;#34;horizontal&amp;#34; android:background=&amp;#34;@android:color/white&amp;#34; app:layout_constraintBottom_toBottomOf=&amp;#34;parent&amp;#34; app:layout_constraintEnd_toEndOf=&amp;#34;parent&amp;#34; app:layout_constraintStart_toStartOf=&amp;#34;parent&amp;#34; app:layout_constraintTop_toTopOf=&amp;#34;parent&amp;#34; /&amp;gt; ... ã“ã‚Œã¯orientationã«horizontalã‚’æŒã¡ã¾ã™ã€‚ã¾ãŸã€é€šå¸¸ã®Viewã®ã‚ˆã†ã«å„constraintsã‚’æŒ‡å®šã—ã€é…ç½®ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
2. wrapModeã‚’æ±ºã‚ã‚‹ flow_wrapModeã§æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
wrapModeã§ã¯ã€ã©ã®ã‚ˆã†ã«Viewã‚’ä¸¦ã¹ã‚‹ã‹ã‚’æŒ‡å®šã§ãã€3ç¨®é¡ã®modeãŒã‚ã‚Šã¾ã™ã€‚
 none  å˜ç´”ã«single lineã«ä¸¦ã¹ã‚‹   chain  å˜ç´”ã«é †ç•ªã«é…ç½®ã—ã¦ã„ãã€‚ãã®è¡Œï¼ˆåˆ—ï¼‰ã«åã¾ã‚‰ãªã„å ´åˆã¯æ¬¡ã®è¡Œï¼ˆåˆ—ï¼‰ã«é…ç½®ã™ã‚‹   aligned  å„è¦ç´ ã‚’æ•´åˆ—ã™ã‚‹ã‚ˆã†ã«é…ç½®ã—ã¦ã„ãã€‚ãƒ†ãƒ¼ãƒ–ãƒ«ã®ã‚ˆã†ãªã‚¤ãƒ¡ãƒ¼ã‚¸    &amp;lt;androidx.constraintlayout.helper.widget.Flow android:id=&amp;#34;@+id/flow&amp;#34; android:layout_width=&amp;#34;0dp&amp;#34; android:layout_height=&amp;#34;0dp&amp;#34; android:orientation=&amp;#34;horizontal&amp;#34; android:background=&amp;#34;@android:color/white&amp;#34; app:flow_wrapMode=&amp;#34;chain&amp;#34; app:layout_constraintBottom_toBottomOf=&amp;#34;parent&amp;#34; app:layout_constraintEnd_toEndOf=&amp;#34;parent&amp;#34; app:layout_constraintStart_toStartOf=&amp;#34;parent&amp;#34; app:layout_constraintTop_toTopOf=&amp;#34;parent&amp;#34; /&amp;gt; ã“ã‚Œã¯chainã§å¯¾è±¡ã®Viewã‚’é…ç½®ã—ã¾ã™ã€‚</description>
    </item>
    
  </channel>
</rss>