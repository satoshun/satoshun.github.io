<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
      <title>stsnãƒ–ãƒ­ã‚°</title>
      <generator uri="https://hugo.spf13.com">Hugo</generator>
    <link>https://satoshun.github.io/</link>
    <language>ja</language>
    <author>Sato Shun</author>
    <copyright>2019 Sato Shun</copyright>
    <updated>Tue, 19 Mar 2019 12:31:05 UTC</updated>
    
    
    <item>
      <title>Kotlin: ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿å‘¼ã³å‡ºã—ã£ã½ãé–¢æ•°ã‚„companion objectã‚’ä½¿ã†</title>
      <link>https://satoshun.github.io/2019/03/kotlin-invoke-operator/</link>
      <pubDate>Tue, 19 Mar 2019 12:31:05 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2019/03/kotlin-invoke-operator/</guid>
      <description>

&lt;p&gt;Kotlinã§ã¯Javaã¨ç•°ãªã‚Šã€ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿å‘¼ã³å‡ºã—ã®æ™‚ã«&lt;code&gt;new&lt;/code&gt;ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãŒå¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;class A
...
val a = A()
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã‚ˆã£ã¦ã€æ¬¡ã®ã‚ˆã†ã«é–¢æ•°ã‚’ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã®ã‚ˆã†ã«ä½¿ã†ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;// Coroutine Jobã®å®šç¾©
@Suppress(&amp;quot;FunctionName&amp;quot;)
public fun Job(parent: Job? = null): Job = JobImpl(parent)
...
val job = Job()
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã¾ãŸã€æ¬¡ã®ã‚ˆã†ã«companion object + operator invokeã‚’ä½¿ã†ã“ã¨ã‚‚å‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;// ref: https://github.com/JakeWharton/retrofit2-kotlin-coroutines-adapter
class CoroutineCallAdapterFactory private constructor() : CallAdapter.Factory() {
  companion object {
    @JvmStatic @JvmName(&amp;quot;create&amp;quot;)
    operator fun invoke() = CoroutineCallAdapterFactory()
  }
}
...
val factory = CoroutineCallAdapterFactory()
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;ã¾ã¨ã‚&#34;&gt;ã¾ã¨ã‚&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;JobImplã®ã‚ˆã†ãªå®Ÿè£…ã‚¯ãƒ©ã‚¹ã‚’éš ã—ãŸã„ã¨ãã«ä¾¿åˆ©&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Kotlin: Coroutineã§RxJavaã®zipã£ã½ã„ã‚‚ã®ã‚’è¡¨ç¾ã™ã‚‹</title>
      <link>https://satoshun.github.io/2019/03/coroutine-catalog-zip/</link>
      <pubDate>Sun, 17 Mar 2019 05:17:23 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2019/03/coroutine-catalog-zip/</guid>
      <description>

&lt;p&gt;Coroutineã§éåŒæœŸå‡¦ç†ã‚’ä¸¦åˆ—ã«å‡¦ç†ã—ãŸã„ã¨ã—ã¾ã™ã€‚ä¾‹å¤–ã‚’è€ƒæ…®ã—ãªã„ãªã‚‰å˜ç´”ã«asyncã§åŒ…ã‚ã°è‰¯ã„ã§ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;launch {
  val task1 = async { MainService.task1() }
  val task2 = async { MainService.task2() }

  println(&amp;quot;${task1.await()}\n${task2.await()}&amp;quot;)
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;asyncã§åŒ…ã‚€ã“ã¨ã§ã€ä¸¦åˆ—ã«å‡¦ç†ã‚’ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;æ¬¡ã«ã€å„éåŒæœŸå‡¦ç†ãŒä¾‹å¤–ã‚’åãå ´åˆã‚’è€ƒãˆã¦ã¿ã¾ã™ã€‚ãã®å ´åˆã¯ã€å‘¼ã³å‡ºã—å…ƒã§&lt;code&gt;runCatching&lt;/code&gt;ã‚’ä½¿ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;launch {
  val task1 = async { runCatching { MainService.task1() } }
  val task2 = async { runCatching { MainService.task2() } }

  val result1 = task1.await()
  val result2 = task2.await()
  println(&amp;quot;$result1\n&amp;quot; + &amp;quot;$result2\n&amp;quot;)
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;runCatching&lt;/code&gt;ã‚’ä½¿ã†ã“ã¨ã§ã€å‘¼ã³å‡ºã—å…ˆã§ä¾‹å¤–ãŒèµ·ã“ã£ãŸã¨ã—ã¦ã‚‚ã€å‡¦ç†ã‚’ç¶™ç¶šã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;ã¾ãŸã€æ¬¡ã®ã‚ˆã†ã«æ›¸ãã“ã¨ã¯å‡ºæ¥ã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;launch {
  val task1 = async { MainService.task1() }
  val task2 = async { MainService.task2() }

  // awaitã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§runCatchingã‚’ä½¿ã†
  val result1 = runCatching { task1.await() }
  val result2 = runCatching { task2.await() }
  println(&amp;quot;$result1\n&amp;quot; + &amp;quot;$result2\n&amp;quot;)
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®è¨­å®šã ã¨ä¾‹å¤–ã¯ä¼æ¬ã—ã€å­ãŒå€’ã‚ŒãŸã‚‰è¦ªã‚‚å€’ã‚Œã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã—ã‹ã—ã€&lt;code&gt;supervisorScope&lt;/code&gt;ã‚’ä½¿ã†ã¨ã€ä¸Šè¨˜ã®æŒ¯ã‚‹èˆã„ã‚’é˜²ãã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;launch {
  supervisorScope {
    val task1 = async { MainService.task1() }
    val task2 = async { MainService.task2() }

    // supervisorScopeã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã§ã“ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã‚‚ãŠï½‹
    val result1 = runCatching { task1.await() }
    val result2 = runCatching { task2.await() }
    println(&amp;quot;$result1\n&amp;quot; + &amp;quot;$result2\n&amp;quot;)
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;supervisorScope&lt;/code&gt;ã‚’ä½¿ã†ã¨ã€&lt;code&gt;Deferred.await&lt;/code&gt;ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ä¾‹å¤–ã®ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;æœ€å¾Œã«ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã«ã¤ã„ã¦è€ƒãˆã¦ã¿ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ä»»æ„ã®å­ã‚¸ãƒ§ãƒ–ãŒã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚Œã¦ã‚‚å‡¦ç†ã‚’ç¶šã‘ãŸã„ã¨ã—ãŸã‚‰ã€å‰è¿°ã®supervisorScopeã‚’ä½¿ã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;launch {
  supervisorScope {
    val task1 = async { MainService.task1() }
    val task2 = async { MainService.task2() }

    val result1 = runCatching { task1.await() }
    val result2 = runCatching { task2.await() }
    println(&amp;quot;$result1\n&amp;quot; + &amp;quot;$result2\n&amp;quot;)
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã®ã‚ˆã†ã«æ›¸ãã“ã¨ã§ã€ä¾‹ãˆã°task1ãŒã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚ŒãŸã¨ã—ã¦ã‚‚ã€ä»–ã®éƒ¨åˆ†ã®å‡¦ç†ã‚’ç¶™ç¶šã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ã¾ã¨ã‚&#34;&gt;ã¾ã¨ã‚&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;ã‚¨ãƒ©ãƒ¼ &amp;amp; ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ™‚ã«ã‚‚å‡¦ç†ã‚’ç¶™ç¶šã—ãŸã„ãªã‚‰supervisorScope + runCatchingã‚’ä½¿ã†&lt;/li&gt;
&lt;li&gt;ã‚¨ãƒ©ãƒ¼æ™‚ã®ã¿å‡¦ç†ã‚’ç¶™ç¶šã—ãŸã„ãªã‚‰ã€runCatchingã ã‘ã§å¯¾å¿œã§ãã‚‹&lt;/li&gt;
&lt;li&gt;æ­£å¸¸ç³»ã®ã¿ãªã‚‰ã€asyncã§åŒ…ã‚“ã§ã‚ã’ã‚‹ã ã‘ã§è‰¯ã„&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Android: Jetpackã®Coroutine Supportã«ã¤ã„ã¦</title>
      <link>https://satoshun.github.io/2019/03/jetpack-coroutine-support/</link>
      <pubDate>Sun, 10 Mar 2019 10:14:21 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2019/03/jetpack-coroutine-support/</guid>
      <description>

&lt;p&gt;Jetpackã®ã„ãã¤ã‹ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã¯ã€Kotlin Coroutineã®ã‚µãƒãƒ¼ãƒˆãŒå…¥ã£ã¦ã„ã¾ã™ãŒã€
ã©ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§å¯¾å¿œãŒé€²ã‚“ã§ã„ã‚‹ã‹æ°—ã«ãªã£ãŸã®ã§ã€è»½ãã¾ã¨ã‚ã¾ã™ã€‚ä½¿ã„æ–¹ã«ã¤ã„ã¦ã¯è¨€åŠã—ã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;p&gt;ä»¥ä¸‹ã€&lt;del&gt;2019å¹´3æœˆ10æ—¥&lt;/del&gt; 2019å¹´3æœˆ11æ—¥ã®èª¿æŸ»çµæœã«ãªã‚Šã¾ã™ã€‚
ã¾ãŸã€ã“ã‚Œã‚‰ã¯ã€supportãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰å–ã£ã¦ããŸã®ã§ã€ç¾åœ¨ãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹ã¯ä¸æ˜ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;Lifecycle&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;// Lifecycleã«å¾“ã†CoroutineScopeã®ç”Ÿæˆ
val Lifecycle.coroutineScope: CoroutineScope
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;LifecycleOwner&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;// LifecycleOwnerã«å¾“ã†CoroutineScopeã®ç”Ÿæˆ
val LifecycleOwner.lifecycleScope: CoroutineScope
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ViewModel&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;// ViewModelã«å¾“ã†CoroutineScopeã®ç”Ÿæˆ
val ViewModel.viewModelScope: CoroutineScope
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;WorkManager&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;abstract class CoroutineWorker(
  appContext: Context,
  params: WorkerParameters
) : ListenableWorker(appContext, params) {
  // suspendãƒ¡ã‚½ãƒƒãƒ‰ã§å®šç¾©ã•ã‚ŒãŸ
  abstract suspend fun doWork(): Result
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Room&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;// Daoå†…ã§suspendãƒ¡ã‚½ãƒƒãƒ‰ãŒä½¿ãˆã‚‹
@Dao
interface HogesDao {
  @Insert
  suspend fun add(hoge: Hoge)

  @Query(&amp;quot;SELECT * FROM hoge WHERE id = :id&amp;quot;)
  suspend fun get(id: String): Hoge

  ...
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;ã¾ã¨ã‚&#34;&gt;ã¾ã¨ã‚&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;Lifecycleã€LifecycleOwnerã€ViewModelã¯ãã‚Œã‚‰ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã«å¾“ã†ã€CoroutineScopeã®ç”ŸæˆãŒå‡ºæ¥ã‚‹&lt;/li&gt;
&lt;li&gt;WorkManagerã®doWorkãŒsuspendãƒ¡ã‚½ãƒƒãƒ‰ã«ãªã£ãŸ

&lt;ul&gt;
&lt;li&gt;doWorkã®ä¸­ã§ã€ä»–ã®suspendãƒ¡ã‚½ãƒƒãƒ‰ãŒã‚³ãƒ¼ãƒ«ã§ãã‚‹&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Roomã®Daoå†…ã§suspendãƒ¡ã‚½ãƒƒãƒ‰ãŒå®šç¾©å‡ºæ¥ã‚‹&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;çµæ§‹å¯¾å¿œãŒã•ã‚Œã¦ã„ãŸğŸ˜ƒğŸ˜ƒğŸ˜ƒ&lt;/p&gt;

&lt;h2 id=&#34;è£œè¶³&#34;&gt;è£œè¶³&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;LiveDataã¸ã®ã‚µãƒãƒ¼ãƒˆã‚‚å…¥ã‚‹ã‹ã‚‚

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://android-review.googlesource.com/c/platform/frameworks/support/+/890736&#34;&gt;WIP corutine live data (Id0e47973) Â· Gerrit Code Review&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Lifecycleã«ç‰¹å®šã®stateã«å…¥ã£ãŸæ™‚ã«å®Ÿè¡Œã•ã‚Œã‚‹æ‹¡å¼µé–¢æ•°ç¾¤ãŒå…¥ã‚Šãã†

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://android-review.googlesource.com/c/platform/frameworks/support/+/905134&#34;&gt;Lifecycle Dispatcher (Ib1211c0f) Â· Gerrit Code Review&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Dagger2: Providesã¯Kotlin extension methodã¨ä¸€ç·’ã«ä½¿ã†ã“ã¨ãŒå‡ºæ¥ã‚‹</title>
      <link>https://satoshun.github.io/2019/03/dagger-provide-with-extension-method/</link>
      <pubDate>Tue, 05 Mar 2019 00:10:42 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2019/03/dagger-provide-with-extension-method/</guid>
      <description>

&lt;p&gt;Dagger2ã®ã¡ã‚‡ã£ã¨ã—ãŸtipsã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;æ¬¡ã®2ã¤ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯åŒã˜æŒ¯ã‚‹èˆã„ã‚’ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;@Module
class MainActivityModule {
  // æ™®é€šã®æ›¸ãæ–¹
  @Provides fun provideMainContractView(activity: MainActivity): MainContract.View {
    return activity
  }

  // æ‹¡å¼µé–¢æ•°ã‚’ä½¿ã£ãŸæ›¸ãæ–¹
  @Provides fun MainActivity.provideMainContractView(): MainContract.View {
    return this
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ãªãœãªã‚‰ã€æ‹¡å¼µé–¢æ•°ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã•ã‚Œã‚‹ã¨æ¬¡ã®ã‚ˆã†ã«è§£é‡ˆã•ã‚Œã‚‹ãŸã‚ã§ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;...
   @Provides
   @NotNull
   public final MainContract.View provideMainContractView(@NotNull MainActivity $receiver) {
      Intrinsics.checkParameterIsNotNull($receiver, &amp;quot;receiver$0&amp;quot;);
      return (MainContract.View)$receiver;
   }
...
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ‹¡å¼µé–¢æ•°ã¨ã—ã¦å®šç¾©ã—ãŸMainActivityã¯&lt;code&gt;$receiver&lt;/code&gt;ã¨ãªã‚Šã€å¼•æ•°ã«å…¥ã£ã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚æ‹¡å¼µé–¢æ•°ã¯ä¸Šè¨˜ã®ã‚ˆã†ã«è§£é‡ˆã•ã‚Œã‚‹ãŸã‚ã€&lt;code&gt;@Provides&lt;/code&gt;ã¨çµ„ã¿åˆã‚ã›ã¦ä½¿ã†ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ã¾ã¨ã‚&#34;&gt;ã¾ã¨ã‚&lt;/h2&gt;

&lt;p&gt;å¤šåˆ†ã€ä½¿ã„æ‰€ãªã„ã¨æ€ã„ã¾ã™ğŸ˜ƒğŸ˜ƒğŸ˜ƒ&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>RxAndroidã«Pull Requestã‚’å‡ºã—ãŸè©±</title>
      <link>https://satoshun.github.io/2019/03/rx-android-pull-request/</link>
      <pubDate>Sat, 02 Mar 2019 13:21:05 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2019/03/rx-android-pull-request/</guid>
      <description>

&lt;p&gt;RxAndroidã«Issueã‚’ç«‹ã¦ã¦ã€PRã‚’å‡ºã—ãŸè©±ã§ã™ã€‚åºƒãä½¿ã‚ã‚Œã¦ã„ã‚‹OSSãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å¯¾ã—ã¦ã€Issueã‚’ç«‹ã¦ã¦ã€ãƒ†ã‚¹ãƒˆã‚‚ã‚»ãƒƒãƒˆã§PRã‚’å‡ºã—ãŸã“ã¨ãŒãªã‹ã£ãŸã®ã§ã€ãã‚Œã®è¨˜å¿µè¨˜äº‹ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;issueã®å†…å®¹&#34;&gt;Issueã®å†…å®¹&lt;/h2&gt;

&lt;p&gt;å®Ÿéš›ã®Issueã¯ &lt;a href=&#34;https://github.com/ReactiveX/RxAndroid/issues/441&#34;&gt;HandlerScheduler.scheduleDirect supports async option?&lt;/a&gt; ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;Issueã®æ¦‚è¦ã¯ã€RxAndroidã¯2.1.0ã§async messageã«å¯¾å¿œã—ã¾ã—ãŸã€‚ã—ã‹ã—ã€ã“ã‚Œã¯&lt;code&gt;Worker.schedule&lt;/code&gt;ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰ã®ã¿ã®ã‚µãƒãƒ¼ãƒˆã§ã—ãŸã€‚RxJavaã§ã¯&lt;code&gt;Scheduler.scheduleDirect&lt;/code&gt;ã§ã‚‚ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã•ã‚Œã‚‹ã®ã§ã€ã“ã¡ã‚‰ã‚‚å¯¾å¿œã—ãŸã»ã†ãŒè‰¯ã„ã®ã§ã¯ï¼Ÿã¨æ€ã„Issueã‚’ç«‹ã¦ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;h2 id=&#34;ãã‚‚ãã‚‚ã“ã®å•é¡Œã«æ°—ã¥ã„ãŸãã£ã‹ã‘&#34;&gt;ãã‚‚ãã‚‚ã“ã®å•é¡Œã«æ°—ã¥ã„ãŸãã£ã‹ã‘&lt;/h2&gt;

&lt;p&gt;RxAndroidãŒ2.1.0ã§async messageã«å¯¾å¿œã—ãŸæ™‚ã«ã€ã‚µãƒ³ãƒ—ãƒ«ã§åŠ¹æœã‚’æ¸¬å®šã—ãŸã¨ã“ã‚ã€ã„ãã¤ã‹ã®ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ã§ã¯ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®å‘ä¸ŠãŒè¦‹ã‚‰ã‚Œãªã„ã“ã¨ã«æ°—ã¥ãã¾ã—ãŸã€‚ã“ã®ã¨ãã¯ã€ã‚µãƒ³ãƒ—ãƒ«ãŒæ‚ªã„ã®ã‹ã€ãã‚Œã¨ã‚‚ç’°å¢ƒãŒãŠã‹ã—ã„ã®ã‹ã€ã¾ãŸã¾ãŸã“ã‚ŒãŒæ„å›³ã—ãŸæŒ™å‹•ãªã®ã‹ãŒåˆ†ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ã¨ã‚Šã‚ãˆãšã€è‡ªåˆ†ã®ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚’ã—ã¦ã„ã‚‹todoistã«ã€Œè‰¯ãåˆ†ã‹ã‚‰ãªã„ã‘ã©ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒå‘ä¸Šã—ãªã„ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒã‚ã‚‹ã€ã¿ãŸã„ãªã‚¿ã‚¹ã‚¯ã‚’ä½œã£ã¦ã€ã‚ã¨ã§èª¿ã¹ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;h2 id=&#34;èª¿ã¹æ–¹&#34;&gt;èª¿ã¹æ–¹&lt;/h2&gt;

&lt;p&gt;ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã™ã‚‹ã‚ã‘ã§ã‚‚ãªã„ã®ã§ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒå‘ä¸Šã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã€å‘ä¸Šã—ãªã„ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã•ã‚Œã‹ãŸã«é•ã„ãŒãªã„ã‹ã‚’ãƒ‡ãƒãƒƒã‚¬ãƒ¼ã‚’ä½¿ã„ã€åœ°é“ã«ã‚³ãƒ¼ãƒ‰ã‚’è¿½ã„ã‹ã‘ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;çµæœã€&lt;code&gt;Observable.observeOn&lt;/code&gt;ã§ã¯&lt;code&gt;Worker.schedule&lt;/code&gt;ãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚¿ã‚¹ã‚¯ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã‚’ã—ã€&lt;code&gt;Maybe.observeOn&lt;/code&gt;ã§ã¯&lt;code&gt;Scheduler.scheduleDirect&lt;/code&gt;ãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã™ã‚‹é•ã„ãŒã‚ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã—ãŸã€‚å¾Œã¯ã€ãã‚Œãã‚Œã®ãƒ‘ã‚¹ã§ã®async messageã®æŒ™å‹•ã®é•ã„ã‚’ç‰¹å®šã—ã€ä¿®æ­£ã™ã‚‹ã ã‘ã§ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ãã®ä»–-æ„Ÿæƒ³&#34;&gt;ãã®ä»–ãƒ»æ„Ÿæƒ³&lt;/h2&gt;

&lt;h3 id=&#34;jakeã•ã‚“ã¨zacã•ã‚“ã«ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ã—ã¦ã‚‚ã‚‰ã£ãŸ&#34;&gt;Jakeã•ã‚“ã¨Zacã•ã‚“ã«ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ã—ã¦ã‚‚ã‚‰ã£ãŸ&lt;/h3&gt;

&lt;p&gt;äºŒäººã®ã‚³ãƒ¼ãƒ‰ã¯è‰¯ãèª­ã‚“ã§ã„ã¦ã€å°Šæ•¬ã—ã¦ã„ã‚‹Androidã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãªã®ã§ã€ãã®2äººã«ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ã—ã¦ã‚‚ã‚‰ãˆãŸã®ã¯å¬‰ã—ã‹ã£ãŸã§ã™ğŸ˜ƒ&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Robolectric &#43; Jetpackã§Activityã®onActivityResultãƒ¡ã‚½ãƒƒãƒ‰ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹</title>
      <link>https://satoshun.github.io/2019/02/androidx-onactivityresult-testing/</link>
      <pubDate>Sat, 23 Feb 2019 02:47:59 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2019/02/androidx-onactivityresult-testing/</guid>
      <description>

&lt;p&gt;Robolectric4.xã‹ã‚‰ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆç’°å¢ƒã§ã€android testã¨ï¼ˆã»ã¼?ï¼‰åŒã˜ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’å‹•ã‹ã™ã“ã¨ãŒå¯èƒ½ã«ãªã‚Šã¾ã—ãŸã€‚
ã¾ã ã€å®Œå…¨ã«äº’æ›æ€§ãŒã‚ã‚‹ã¨ã¯ã„ãˆã¾ã›ã‚“ãŒã€Espressoãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒå‹•ãã€&lt;code&gt;AndroidJUnit4&lt;/code&gt;ãƒ©ãƒ³ãƒŠãƒ¼ãŒä½¿ãˆã‚‹ãªã©ã€ã‹ãªã‚Šã®éƒ¨åˆ†ãŒå…±é€šåŒ–å‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã®è¨˜äº‹ã§ã¯ã€ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã§&lt;code&gt;Activity.onActivityResult&lt;/code&gt;ã®ãƒ†ã‚¹ãƒˆã‚’ã©ã“ã¾ã§android testã®ã‚ˆã†ã«æ›¸ã‘ã‚‹ã‹ã‚’æ¤œè¨¼ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ãƒ†ã‚¹ãƒˆå¯¾è±¡ã‚³ãƒ¼ãƒ‰&#34;&gt;ãƒ†ã‚¹ãƒˆå¯¾è±¡ã‚³ãƒ¼ãƒ‰&lt;/h2&gt;

&lt;p&gt;ã¾ãšæœ€åˆã«ã€ãƒ†ã‚¹ãƒˆå¯¾è±¡ã‚³ãƒ¼ãƒ‰ã¯æ¬¡ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;class MainActivity : AppCompatActivity() {
  ...
  override fun onCreate(savedInstanceState: Bundle?) {
    ...

    button.setOnClickListener {
      startActivityForResult(
        Intent(this, Sub2Activity::class.java).apply {
          putExtra(&amp;quot;fuga&amp;quot;, &amp;quot;hoge&amp;quot;)
        },
        1
      )
    }
  }

  override fun onActivityResult(
    requestCode: Int,
    resultCode: Int,
    data: Intent?
  ) {
    super.onActivityResult(requestCode, resultCode, data)
    if (requestCode == 1) {
      if (resultCode == Activity.RESULT_OK) {
        val value = data!!.getIntExtra(&amp;quot;test&amp;quot;, -1)
        button.text = value.toString()
      }
    }
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;class Sub2Activity : AppCompatActivity() {
  override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    setContentView(R.layout.sub_act)

    button.setOnClickListener {
      val intent = Intent()
      intent.putExtra(&amp;quot;test&amp;quot;, 10)
      setResult(Activity.RESULT_OK, intent)
      finish()
    }
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã‚Œã¯MainActivityã§&lt;code&gt;startActivityForResult&lt;/code&gt;ãŒã‚³ãƒ¼ãƒ«ã•ã‚Œã€Sub2Activityã§&lt;code&gt;setResult&lt;/code&gt;ã§å€¤ã‚’ã‚»ãƒƒãƒˆã—ã€MainActivityã®&lt;code&gt;onActivityResult&lt;/code&gt;ã§çµæœã‚’å—ã‘å–ã‚‹ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã§ã¯ã€ãƒ†ã‚¹ãƒˆã‚’æ›¸ã„ã¦ã„ãã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰&#34;&gt;ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰&lt;/h2&gt;

&lt;p&gt;ä»¥ä¸‹ãŒã€ä»Šå›æ›¸ã„ãŸãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;@RunWith(AndroidJUnit4::class)
internal class MainActivityTest {
  @get:Rule val intentsTestRule = IntentsTestRule(MainActivity::class.java)

  @Test
  fun onActivityResultTest() {
    val expectCode = 10

    // assertion setResult
    val scenario = ActivityScenario.launch(Sub2Activity::class.java)
    scenario.onActivity {
      it.findViewById&amp;lt;View&amp;gt;(R.id.button).performClick()
    }

    // assertion resultCode
    val result = scenario.result
    assertThat(result.resultCode).isEqualTo(Activity.RESULT_OK)

    // assertion intent params
    val bundleSubject = IntentSubject.assertThat(result.resultData).extras()
    bundleSubject.integer(&amp;quot;test&amp;quot;).isEqualTo(expectCode)

    scenario.close()

    Intents
      .intending(
        IntentMatchers.hasComponent(
          ComponentName(
            ApplicationProvider.getApplicationContext&amp;lt;Application&amp;gt;(),
            Sub2Activity::class.java
          )
        )
      )
      .respondWith(result)

    val main = ActivityScenario.launch(MainActivity::class.java)
    main.onActivity {
      it.findViewById&amp;lt;View&amp;gt;(R.id.button).performClick()

      // assertion intent for startActivity(ForResult)
      val name = ComponentName(
        ApplicationProvider.getApplicationContext&amp;lt;Application&amp;gt;(),
        Sub2Activity::class.java
      )
      Intents.intended(IntentMatchers.hasComponent(name))
      Intents.intended(IntentMatchers.hasExtra(&amp;quot;fuga&amp;quot;, &amp;quot;hoge&amp;quot;))

      // assertion onActivityResult behaves
      Espresso
        .onView(ViewMatchers.withId(R.id.button))
        .check(ViewAssertions.matches(ViewMatchers.withText(expectCode.toString())))
    }
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸Šã‹ã‚‰é †ç•ªã«é‡è¦ãªéƒ¨åˆ†ã‚’èª¬æ˜ã—ã¦ã„ãã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;@get:Rule val intentsTestRule = IntentsTestRule(MainActivity::class.java)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã‚Œã¯ã€Espresso-Intentsã‚’ä½¿ã†ã¨ãã«å¿…è¦ãªãƒ«ãƒ¼ãƒ«ã§ã™ã€‚&lt;code&gt;Intens.intended&lt;/code&gt;ã€&lt;code&gt;intending&lt;/code&gt;ã‚’ä½¿ã†ãŸã‚ã«å¿…è¦ãªãƒ«ãƒ¼ãƒ«ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;val scenario = ActivityScenario.launch(Sub2Activity::class.java)
scenario.onActivity {
    it.findViewById&amp;lt;View&amp;gt;(R.id.button).performClick()
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ActivityScenarioã¯Activityã‚’èµ·å‹•ã™ã‚‹ãŸã‚ã®ã‚¯ãƒ©ã‚¹ã§ã™ã€‚ã“ã‚Œã¯Sub2Activityã‚’èµ·å‹•ã—ã¦ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã„ã†æ„å‘³ã«ãªã‚Šã¾ã™ã€‚
ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã‚‹ã¨ã€Sub2Activityã§&lt;code&gt;setResult&lt;/code&gt;ãŒç™ºç«ã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;val result = scenario.result
assertThat(result.resultCode).isEqualTo(Activity.RESULT_OK)

val bundleSubject = IntentSubject.assertThat(result.resultData).extras()
bundleSubject.integer(&amp;quot;test&amp;quot;).isEqualTo(expectCode)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ActivityScenarioã§ã¯ã€ActivityResultã‚¯ãƒ©ã‚¹ã‹ã‚‰çµæœã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚ã“ã®ã‚¯ãƒ©ã‚¹ã«ã¯resultCodeã¨ã€resultDataãŒã‚»ãƒƒãƒˆã•ã‚Œã¦ãŠã‚Šã€ãã‚Œã‚‰ã®å€¤ã‚’Truthã‚’ä½¿ã„ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ã€‚ã“ã®å ´åˆã€&lt;code&gt;setResult&lt;/code&gt;ã§ã€resultcodeã«&lt;code&gt;Activity.RESULT_OK&lt;/code&gt;ãŒã€resultdataã«ã¯ã‚­ãƒ¼å&lt;code&gt;test&lt;/code&gt;ã€å€¤10ãŒã‚»ãƒƒãƒˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã“ã¾ã§ã§ã€Sub2Activityã®setResultã§æ­£ã—ã„å€¤ã‚’ã‚»ãƒƒãƒˆã—ã¦ã„ã‚‹ã“ã¨ãŒãƒ†ã‚¹ãƒˆå‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã§ã¯æ¬¡ã«ã€MainActivityã§ä¸Šè¨˜ã®å€¤ã‚’å—ã‘å–ã‚Œã‚‹ã“ã¨ã‚’ãƒ†ã‚¹ãƒˆã—ã¦ã„ãã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;Intents
  .intending(
    IntentMatchers.hasComponent(
      ComponentName(
        ApplicationProvider.getApplicationContext&amp;lt;Application&amp;gt;(),
        Sub2Activity::class.java
      )
    )
  )
  .respondWith(result)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;Intents.intending&lt;/code&gt;ã¯ãƒãƒƒãƒã—ãŸIntentãŒç™ºè¡Œã•ã‚ŒãŸã¨ãã«ã€onActivityResultã«çµæœã‚’è¿”ã™APIã«ãªã‚Šã¾ã™ã€‚
MainActivityã®onActivityResultã«ã€å…ˆã»ã©ã®Sub2Activityã®çµæœã‚’æ¸¡ã™ã¨ã„ã†æ„å‘³ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;val main = ActivityScenario.launch(MainActivity::class.java)
main.onActivity {
  it.findViewById&amp;lt;View&amp;gt;(R.id.button).performClick()

  val name = ComponentName(
    ApplicationProvider.getApplicationContext&amp;lt;Application&amp;gt;(),
    Sub2Activity::class.java
  )
  Intents.intended(IntentMatchers.hasComponent(name))
  Intents.intended(IntentMatchers.hasExtra(&amp;quot;fuga&amp;quot;, &amp;quot;hoge&amp;quot;))

  Espresso
    .onView(ViewMatchers.withId(R.id.button))
    .check(ViewAssertions.matches(ViewMatchers.withText(expectCode.toString())))
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã¾ãšã¯ã€ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºç«ã—ã€&lt;code&gt;startActivityForResult&lt;/code&gt;ã‚’ã‚³ãƒ¼ãƒ«ã—ã¾ã™ã€‚æ¸¡ã—ãŸIntentã‚’&lt;code&gt;Intents.intended&lt;/code&gt;ã§æ­£ã—ã„ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚æœ€å¾Œã«ã€Espressoã‚’ä½¿ã£ã¦ã€&lt;code&gt;onActivityResult&lt;/code&gt;ã®çµæœã‚’æ­£ã—ãåæ˜ ã•ã‚Œã¦ã„ã‚‹ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã‚Œã§ã€ãƒ†ã‚¹ãƒˆå®Œäº†ã§ã™ğŸ˜ƒ
2ã¤ã®Activityã«é–¢é€£ã™ã‚‹onActivityResultã®ãƒ†ã‚¹ãƒˆãŒç„¡äº‹ã«å‡ºæ¥ã¾ã—ãŸï¼ï¼&lt;/p&gt;

&lt;h2 id=&#34;è£œè¶³&#34;&gt;è£œè¶³&lt;/h2&gt;

&lt;p&gt;Espressoã«ã¯ã”å­˜çŸ¥ã€clickã‚’ã™ã‚‹ãŸã‚ã®APIãŒã‚ã‚‹ã®ã§ã™ãŒã€ã†ã¾ãå‹•ãã¾ã›ã‚“ã§ã—ãŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;// not working!!
Espresso
  .onView(ViewMatchers.withId(R.id.button))
  .perform(ViewActions.click())
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;èª¿ã¹ãŸã‚“ã§ã™ãŒã€åŸå› ãŒã‚ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸğŸ˜‚åˆ†ã‹ã‚Šæ¬¡ç¬¬è¿½è¨˜ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ã¾ã¨ã‚&#34;&gt;ã¾ã¨ã‚&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;ä¸Šè¨˜ã®ãƒ†ã‚¹ãƒˆãã‚‰ã„ãªã‚‰ã€ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã§æ›¸ã‘ã‚‹ã€‚ã™ã”ã„ğŸ˜ƒ

&lt;ul&gt;
&lt;li&gt;onActivityResultã¿ãŸã„ãªã€ã‚¯ãƒ©ã‚¹é–“ã®ã¤ãªãŒã‚ŠãŒå¼±ã„éƒ¨åˆ†ã¯æ„å›³ã›ãšå£Šã‚Œã‚„ã™ã„ã®ã§ã€ãƒ†ã‚¹ãƒˆã‚’æ›¸ã„ã¦ãŠãã¨å®‰å¿ƒã‹ã‚‚ğŸ˜‹&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ä»Šå›ã®æ¤œè¨¼ã«ç”¨ã„ãŸã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯&lt;a href=&#34;https://github.com/satoshun-android-example/Tests/blob/master/app/src/test/java/com/github/satoshun/example/tests/lifecycle/MainActivityTest.kt&#34;&gt;satoshun-android-example/Tests&lt;/a&gt;ã«ã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã‚‚ã£ã¨è‰¯ã„æ›¸ãæ–¹ã‚’çŸ¥ã£ã¦ã„ã‚‹ã‚ˆã¨è¨€ã†äººã¯æ•™ãˆã¦é ‚ã‘ã‚‹ã¨ã¨ã¦ã‚‚å¬‰ã—ã„ã§ã™ğŸ˜ƒğŸ˜ƒğŸ˜ƒ&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>ãƒãƒ«ãƒãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®é·ç§»ã«ã¤ã„ã¦è€ƒãˆã‚‹ Part2</title>
      <link>https://satoshun.github.io/2019/02/multi-module_transition_part2/</link>
      <pubDate>Fri, 15 Feb 2019 00:14:56 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2019/02/multi-module_transition_part2/</guid>
      <description>

&lt;p&gt;ãƒãƒ«ãƒãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«é·ç§»æ–¹æ³•Part2ã§ã™ã€‚&lt;a href=&#34;https://satoshun.github.io/2018/12/multi-module_transition_part1/&#34;&gt;Part1&lt;/a&gt;ã¯ã“ã“ã«ãªã‚Šã¾ã™ğŸ˜Œ&lt;/p&gt;

&lt;p&gt;Part2ã§ã¯ã€Navigation Componentã‚’ä½¿ã†ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è€ƒãˆã¦ã¿ã¾ã™ã€‚ä»Šå›ã¯Dynamic Feature(DFM)ã«ã¯è§¦ã‚Œã¾ã›ã‚“ã€‚ã„ã‚ã‚†ã‚‹ä¸€èˆ¬çš„ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã®é·ç§»ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãŸã€ä»Šå›ã®æ¤œè¨¼ã«ç”¨ã„ãŸã‚³ãƒ¼ãƒ‰ã¯&lt;a href=&#34;https://github.com/satoshun-android-example/MultiModuleNavigationComponentExample&#34;&gt;satoshun/MultiModuleNavigationComponentExample&lt;/a&gt;ã«ã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹æˆã«ã¤ã„ã¦&#34;&gt;ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹æˆã«ã¤ã„ã¦&lt;/h2&gt;

&lt;p&gt;ç´°ã‹ã„å®Ÿè£…ã«å…¥ã‚‹å‰ã«ã€å…¨ä½“çš„ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹æˆã‚’èª¬æ˜ã—ã¾ã™ã€‚ä»Šå›ã¯appãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒãƒˆãƒƒãƒ—ã«ã‚ã‚Šã€2ã¤ã®featureãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒã‚ã‚‹ã¨ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://www.plantuml.com/plantuml/img/SoWkIImgAStDuU8goIp9ILLutBpeSTEEnyrB7pVlUToy-kdipLnS1Od9sOdfgGfAYGK5yMcfYIMbHQbA2jLS2WhHG95O45sKNrgIMXJBLOkakhWqoH1DEKWe5iQ8nw7925EJ4KoJ4RAcvFpSWloyrBmIi3lGN1wha5Yi01H6LWNHYqqXH0PPxUF6kOyRrptPFGqi3t8likpBnktFb-z-tBJaSVFcnqtxmIPDVToq7CHesWdN4a-4kKQacmiB1Iuka2KAkdOebe4KGCKG2e4XeQ2Rab-U1rCC3MDq2IEi4Z1Jk20Cg7WDghrOv13sEwJcfG2J6G00&#34; width=600&gt;&lt;/p&gt;

&lt;p&gt;å„featureãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã¯é·ç§»ç”¨ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æŒã£ã¦ãŠã‚Šã€ãã‚Œã‚’ç”¨ã„ã¦ä»–ã®featureç”»é¢ã¸é·ç§»ã‚’ã—ã¾ã™ã€‚é·ç§»ç”¨ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®å®Ÿè£…ã¯appå†…ã®routerãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§è¡Œã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹æˆã®ãƒã‚¤ãƒ³ãƒˆã¯ã€å„featureãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å†…ã§è‡ªèº«ãŒä½¿ã†é·ç§»ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å®šç¾©ã—ã€appãŒãã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®å®Ÿè£…ã‚’è¡Œã†ç‚¹ã§ã™ã€‚ã“ã®ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã§ã€featureé–“ã§ç›´æ¥ã®ä¾å­˜ã‚’æŒã¤ã“ã¨ã‚’é˜²ãã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã¯å¾ªç’°ä¾å­˜ã‚’é¿ã‘ã‚‹ãŸã‚ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã§ã¯ã€å®Ÿè£…ã«å…¥ã£ã¦ã„ãã¾ã™ã€‚ä»Šå›ã¯Dagger2ã‚’ä½¿ã£ã¦å®Ÿè£…ã‚’ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;featureãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å´ã®é·ç§»ç”¨ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®å®šç¾©&#34;&gt;featureãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å´ã®é·ç§»ç”¨ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®å®šç¾©&lt;/h2&gt;

&lt;p&gt;å‰è¿°ã®å›³ã®é€šã‚Šã€å„featureãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å†…ã§é·ç§»ç”¨ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å®šç¾©ã—ã¾ã™ã€‚ã“ã“ã§ã¯ã€featureãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å†…ã§ä½¿ç”¨ã™ã‚‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å®šç¾©ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;mainç”»é¢ã‹ã‚‰sub1ç”»é¢ã«ç§»å‹•ã—ãŸã„ã¨ã—ã¾ã™ã€‚æ¬¡ã®ã‚ˆã†ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®šç¾©ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;interface MainModuleRouter {
  // sub1ç”»é¢ã¸ç§»å‹•ã™ã‚‹
  fun routeToSub1()
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Mainãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ç”¨ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãªã®ã§ã€&lt;code&gt;MainModuleRouter&lt;/code&gt;ã¨ã„ã†åå‰ã«ã—ã€sub1ç”»é¢ã¸é·ç§»ã™ã‚‹ãŸã‚ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®šç¾©ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ãã—ã¦ã“ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’ã€MainFragmentã§ä½¿ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;class MainFragment : Fragment() {
  @Inject lateinit var moduleRouter: MainModuleRouter

  ...

  override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
    super.onViewCreated(view, savedInstanceState)

    view.findViewById&amp;lt;View&amp;gt;(R.id.route).setOnClickListener {
      moduleRouter.routeToSub1()
    }
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã‚Œã§featureãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã®é·ç§»ç”¨ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®å®šç¾©ã¯å®Œäº†ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;æ¬¡ã«ã“ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®å®Ÿè£…ã‚’ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;routerãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å´ã®é·ç§»ç”¨ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®å®Ÿè£…&#34;&gt;routerãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å´ã®é·ç§»ç”¨ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®å®Ÿè£…&lt;/h2&gt;

&lt;p&gt;ä»Šå›ã¯ã€é·ç§»ç”¨ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ã®å®Ÿè£…ã‚’routerãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§è¡Œã„ã¾ã™ã€‚ã¾ãšã¯ã€Navigation Componentã‚’ç”¨ã„ã¦ã€Graphã‚’ä½œã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;navigation xmlns:android=&amp;quot;http://schemas.android.com/apk/res/android&amp;quot;
  xmlns:app=&amp;quot;http://schemas.android.com/apk/res-auto&amp;quot;
  android:id=&amp;quot;@+id/nav_graph&amp;quot;
  app:startDestination=&amp;quot;@id/nav_main_frag&amp;quot;&amp;gt;

  &amp;lt;fragment
    android:id=&amp;quot;@+id/nav_main_frag&amp;quot;
    android:name=&amp;quot;com.github.satoshun.example.feature.main.MainFragment&amp;quot;&amp;gt;

    &amp;lt;action
      android:id=&amp;quot;@+id/main_to_sub1&amp;quot;
      app:destination=&amp;quot;@id/nav_sub1_frag&amp;quot; /&amp;gt;
  &amp;lt;/fragment&amp;gt;

  ...
&amp;lt;/navigation&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ãã—ã¦ã€ã“ã‚Œã‚’ç”¨ã„ã¦é·ç§»ç”¨ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å®Ÿè£…ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;class MainModuleRouterImpl @Inject constructor(
  private val controller: NavController
) : MainModuleRouter {
  override fun routeToSub1() {
    // NavComponentã§è‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹ã‚³ãƒ¼ãƒ‰ã‚’ç”¨ã„ã¦é·ç§»
    controller.navigate(MainFragmentDirections.mainToSub1())
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã‚Œã§å®Ÿè£…ã¯å®Œäº†ã§ã™ã€‚Navigation Componentã‚’ä½¿ã£ã¦ã„ã‚‹ãŸã‚ã€å®Ÿè£…ã¯ã‹ãªã‚Šæ¥½ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã‚ã¨ã¯Daggerã§é…ã‚‹ã ã‘ã§ã™ã€‚Daggerã§é…ã‚‹éƒ¨åˆ†ã¯ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦ã„ãŸã ã‘ãŸã‚‰ã¨æ€ã„ã¾ã™ã€‚ã‚µãƒ³ãƒ—ãƒ«ã§ã¯ã€Dagger Androidã‚’ç”¨ã„ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ãƒ¡ãƒ¢&#34;&gt;ãƒ¡ãƒ¢&lt;/h2&gt;

&lt;h3 id=&#34;routerãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚ã–ã‚ã–ä½œã‚‹å¿…è¦ã¯ãªã„ã‹ã‚‚&#34;&gt;routerãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚ã–ã‚ã–ä½œã‚‹å¿…è¦ã¯ãªã„ã‹ã‚‚&lt;/h3&gt;

&lt;p&gt;æ§‹æˆå›³ã‚’è¦‹ã¦ã»ã—ã„ã®ã§ã™ãŒã€å®Ÿã¯routerãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚ã–ã‚ã–ä½œã‚‹å¿…è¦ã¯ãªãã€appãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«å«ã‚ã¦ã‚‚è‰¯ã„ã§ã™ã€‚routerãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½œã‚‹ã®ãŒã‚ã‚“ã©ã†ã€ã‚‚ã—ãã¯æ„å‘³ãŒãªã„ã¨æ„Ÿã˜ã‚‹ãªã‚‰ã€appãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§å®Ÿè£…ã—ã¦ã‚‚è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ã¾ã¨ã‚&#34;&gt;ã¾ã¨ã‚&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;Navigation Componentã§ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«é–“ã®é·ç§»ã‚’å®£è¨€çš„ã«XMLã§æ›¸ã‘ã‚‹ã®ã¯è¦‹ã‚„ã™ãã¦éå¸¸ã«è‰¯ã„ã¨æ€ã„ã¾ã—ãŸã€‚

&lt;ul&gt;
&lt;li&gt;ã¾ãŸNavigation Componentã¯activityã®è¨˜è¿°ã‚‚ã§ãã‚‹ã®ã§ã€æ—¢å­˜ã‚¢ãƒ—ãƒªã¸ã®å°å…¥ã‚‚æ¯”è¼ƒçš„ã—ã‚„ã™ã„ã¨æ€ã„ã¾ã™&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;app/routerã§ã¯å„featureãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¸ã®ä¾å­˜ã‚’æŒã¤ã“ã¨ãŒã§ãã‚‹ã®ã§ã€ã‚¯ãƒ©ã‚¹ã¸ã®å‚ç…§ã‚’æŒã¡ãªãŒã‚‰ã€navgationã®graphã‚’ä½œã‚‹ã“ã¨ãŒã§ãã‚‹

&lt;ul&gt;
&lt;li&gt;navigation graphã¯Activity/Fragmentã¸ã®å‚ç…§ã‚’æŒãŸãªãã¦ã‚‚ä½œã‚‹ã“ã¨ãŒå¯èƒ½ã ãŒã€æŒã£ãŸã»ã†ãŒLintãªã©ã®å…¼ã­åˆã„ã§å®‰å…¨&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯&lt;a href=&#34;https://github.com/satoshun-android-example/MultiModuleNavigationComponentExample&#34;&gt;satoshun/MultiModuleNavigationComponentExample&lt;/a&gt;ã«ã‚ã‚Šã¾ã™ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æ¬¡ã¯æœ€çµ‚ç« ã«ãªã‚‹äºˆå®šã§ã™ã€‚DFMã®é·ç§»ã«ã¤ã„ã¦æ›¸ãã¾ã™ğŸ˜ƒ&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>ã§ã‹ã„appãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒã‚ã‚‹ã¨ãã«ã€ä¸­é–“ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å…¥ã‚Œã‚‹ã“ã¨ã§å·®åˆ†ãƒ“ãƒ«ãƒ‰ã‚’ä¸Šæ‰‹ãåŠ¹ã‹ã›ã‚‹</title>
      <link>https://satoshun.github.io/2019/02/multi-module-speedup/</link>
      <pubDate>Mon, 11 Feb 2019 01:40:29 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2019/02/multi-module-speedup/</guid>
      <description>

&lt;p&gt;ãƒãƒ«ãƒãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹æˆã®ãƒ¡ãƒªãƒƒãƒˆã«å·®åˆ†ãƒ“ãƒ«ãƒ‰ã®åŠ¹ç‡åŒ–ã¨ã„ã†ã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚ã—ã‹ã—ã€ãƒ¢ãƒã‚·ãƒªãƒƒã‚¯ãªappãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰ã€ãƒãƒ«ãƒãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹æˆã«å¤‰æ›´ã—ã¦ã„ãéç¨‹ã§ã¯appãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒã§ã‹ã„ã¾ã¾ãªã®ã§ã€å·®åˆ†ãƒ“ãƒ«ãƒ‰ã«ã‚ˆã‚‹æ©æµãŒå—ã‘ã«ãã„ã¨ã„ã†å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚ï¼ˆæœ€çµ‚æ®µéšã¾ã§é€²ã‚ã°appãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ååˆ†ã«å°ã•ããªã‚‹ã®ã§ã€å·®åˆ†ãƒ“ãƒ«ãƒ‰ã®æ©æµã‚’å—ã‘ã‚‰ã‚Œã¾ã™ï¼‰&lt;/p&gt;

&lt;p&gt;ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹æˆã‚’è€ƒãˆã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://www.plantuml.com/plantuml/svg/SoWkIImgAStDuU8goIp9ILLusJ3boOwrBnlxdg_evk9ApiyjoCzBpIjHY7xSkEznum8OkVnnO_VZnfR4WeB7pOiUD-rutBpqSVEUnyshOnKIYnM0mYXQcxO-RfvcY4rbSMcI8QPI8nnAZRYuk81cA-Ycv9VdwTf1TAC90DKufEQb0Bq40000&#34; width=400&gt;&lt;/p&gt;

&lt;p&gt;é ‘å¼µã£ã¦2ã¤ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’åˆ‡ã‚Šå‡ºã—ã¾ã—ãŸã€‚ãŸã ã—ã€ã“ã‚Œã§ã¯ã©ã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å¤‰æ›´ã—ã¦ã‚‚ã‹ãªã‚Šã®ãƒ“ãƒ«ãƒ‰æ™‚é–“ãŒã‹ã‹ã‚Šã¾ã™ã€‚ãªãœãªã‚‰ã€Gradleã§ã¯ä¾å­˜é–¢ä¿‚ã«ã‚ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒå¤‰æ›´ã•ã‚ŒãŸã¨ãã«ã€è‡ªåˆ†è‡ªèº«ã‚‚ï¼ˆã‚ã‚‹ç¨‹åº¦?ï¼‰å†ãƒ“ãƒ«ãƒ‰ã•ã‚Œã‚‹ãŸã‚ã§ã™ã€‚ãªã®ã§ã€ä¸Šè¨˜ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹æˆã ã¨ã€ã©ã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä¿®æ­£ã—ã¦ã‚‚ã€å¸¸ã«å¤§ãã„appãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒå†ãƒ“ãƒ«ãƒ‰ã•ã‚Œã¦ã—ã¾ã†ãŸã‚ã€ãƒ“ãƒ«ãƒ‰æ™‚é–“ãŒã‹ã‹ã£ã¦ã—ã¾ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ãã“ã§ã€é–“ã«ä¸­é–“ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’æŒŸã‚€ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚ã“ã®ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚’ä½¿ã†ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://www.plantuml.com/plantuml/svg/SoWkIImgAStDuU8goIp9ILLusJ3boOwrBnlxdg_evk9ApiyjoCzBpIjHY7xSkEznum8OkVnnO_VZnfR4WeB7pOiUD-rutBpqSVEUnyshOnKIYnM0miXQGGPEcunDOMPnQHAA9KrR7pTFCyIc5AZI45Ef4GwbHbnSN41NAEYcv9VdwTf1BE82aN0Xi87e8a1z3gbvAS000G00&#34; width=400&gt;&lt;/p&gt;

&lt;p&gt;é€”ä¸­ã«é©å½“ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’æŒŸã‚€ã“ã¨ã§ã€ã‚µãƒ–1ã€ã‚µãƒ–2ãŒå¤‰æ›´ã•ã‚ŒãŸã¨ãã«appãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å†ãƒ“ãƒ«ãƒ‰ã‚’é˜²ãã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ãŸã ã—ã€ã„ãã¤ã‹æ¡ä»¶ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h3 id=&#34;1-ä¸­é–“ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§å…¬é–‹å¯èƒ½ãªã‚‚ã®ã«é™ã‚‹&#34;&gt;1. ä¸­é–“ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§å…¬é–‹å¯èƒ½ãªã‚‚ã®ã«é™ã‚‹&lt;/h3&gt;

&lt;p&gt;ä¾‹ãˆã°ã‚µãƒ–1ã§SubActivityã‚’å…¬é–‹ã—ã¦ã„ã¦ã€ã“ã‚Œã‚’ç›´æ¥appã‹ã‚‰å‚ç…§ã—ã¦ã„ã‚‹å ´åˆã¯é§„ç›®ã§ã™ã€‚
ã“ã‚Œã‚’SubActivityã¨ã—ã¦ã§ã¯ãªãã€Activityã¨ã—ã¦å‚ç…§ã§ãã‚‹ãªã‚‰å¤§ä¸ˆå¤«ã§ã™ã€‚ã‚µãƒ–1ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‚¯ãƒ©ã‚¹ãŒappãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰è¦‹ã‚Œãªã„ãŸã‚ã®åˆ¶ç´„ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ä¸­é–“ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚³ãƒ¼ãƒ‰ã‚¤ãƒ¡ãƒ¼ã‚¸ã¨ã—ã¦ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;fun createUserFragment(userName: String, age: Int): Fragment {
  return UserFragment.createFragment(userName, age)
}

fun createUserIntent(context: Context): Intent {
  return Intent(context, UserActivity::class.java)
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;UserActivityã€UserFragmentãŒå…¬é–‹ã•ã‚Œã¦ã„ãªã„ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚Androidã®ã„ã‚ã‚†ã‚‹featureãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã¯ã€Activityã€Fragmentã‚’å…¬é–‹ã™ã‚‹å ´åˆãŒå¤šã„ã¨æ€ã†ã®ã§ã€ãã®å ´åˆã«ã¯æœ‰åŠ¹ã«ä½¿ã†ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;h3 id=&#34;2-implementationã§ä¾å­˜ã‚’å®šç¾©ã™ã‚‹&#34;&gt;2. implementationã§ä¾å­˜ã‚’å®šç¾©ã™ã‚‹&lt;/h3&gt;

&lt;p&gt;apiã‚’ä½¿ã†ã¨ã€ä¾å­˜ãŒæ¨ç§»ã™ã‚‹ãŸã‚å†ãƒ“ãƒ«ãƒ‰ãŒè¡Œã‚ã‚Œã¦ã—ã¾ã†ãŸã‚ã§ã™ã€‚implementationã§ä¾å­˜ã‚’è¨˜è¿°ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h3 id=&#34;3-dagger2ä½¿ã£ã¦ã‚‹ã¨å¤šåˆ†ç„¡ç†&#34;&gt;3. Dagger2ä½¿ã£ã¦ã‚‹ã¨å¤šåˆ†ç„¡ç†&lt;/h3&gt;

&lt;p&gt;Dagger2ã§ã¯ã€è§£æ±ºã™ã‚‹ä¾å­˜ã‚’AppComponentã§çŸ¥ã£ã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä¸Šè¨˜ã®æ§‹æˆã ã¨ã€appã§AppComponentã‚’æŒã¤ã“ã¨ã«ãªã‚‹ã®ã§ã€appã‹ã‚‰sub1ã€sub2ãŒè¦‹ãˆã¦ã„ãªã„ã¨æœ€çµ‚çš„ã«Dagger2ã§è§£æ±ºã§ãã¾ã›ã‚“ã€‚ãªã®ã§ã€ä¸­é–“ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã€appã‹ã‚‰subã®ä¾å­˜ãŒè¦‹ãˆãªããªã‚‹ã“ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ä½¿ãˆã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;p&gt;è©³ã—ãã¯&lt;a href=&#34;https://github.com/google/dagger/issues/970&#34;&gt;Dagger/#970&lt;/a&gt;ã«ã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ã¾ã¨ã‚&#34;&gt;ã¾ã¨ã‚&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;ã‚„ã‚Šã™ãæ„Ÿã¯ã‚ã‚‹

&lt;ul&gt;
&lt;li&gt;ãŸã ã§ã•ãˆè¤‡é›‘ãªã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹æˆãŒã•ã‚‰ã«ç…©é›‘ã«ãªã‚Šãã†ã€‚ãŸã ã—ã€æœ€çµ‚çš„ã«ã¯æ¶ˆãˆã‚‹ã®ã§ã€å·®åˆ†ãƒ“ãƒ«ãƒ‰ã®æ©æµã‚’å—ã‘ã‚‹ãŸã‚ã®ã‚¹ãƒ†ãƒƒãƒ—ã ã¨ã™ã‚Œã°è¨±ã›ã‚‹ã‹ã‚‚?&lt;/li&gt;
&lt;li&gt;Dagger2ã‚’ä½¿ã£ã¦ã„ã‚‹ã¨æ¨ç§»çš„ä¾å­˜ãŒå¿…è¦ã«ãªã‚Šã€ä½¿ãˆãªã„ã€ã‚‚ã—ãã¯å·¥å¤«ãŒå¿…è¦ã«ãªã‚‹&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;ã‚µãƒ³ãƒ—ãƒ«ã¯&lt;a href=&#34;https://github.com/satoshun-android-example/ApplicationModulesSpeedUpExample&#34;&gt;satoshun/ApplicationModulesSpeedUpExample&lt;/a&gt;ã«ã‚ã‚Šã¾ã™

&lt;ul&gt;
&lt;li&gt;ã‚µãƒ–ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å¤‰æ›´ã—ãŸã¨ãã®ãƒ“ãƒ«ãƒ‰ã¯çˆ†é€Ÿã§ã—ãŸğŸ˜Š&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Daggerã®éƒ¨åˆ†ã®ã„ã„è§£æ±ºæ–¹æ³•ã‚’çŸ¥ã£ã¦ã„ã‚‹äººãŒã„ãŸã‚‰ã€æ•™ãˆã¦é ‚ã‘ã‚‹ã¨å¹¸ã„ã§ã™ğŸ˜ŠğŸ˜ŠğŸ˜Š&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>DroidKaigi2019ã§ã€ŒR8/ProGuard å¾¹åº•æ¯”è¼ƒã€ã¨ã„ã†ãƒ†ãƒ¼ãƒã§ç™ºè¡¨ã—ã¾ã—ãŸ</title>
      <link>https://satoshun.github.io/2019/02/droidkaigi-2019/</link>
      <pubDate>Thu, 07 Feb 2019 13:19:13 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2019/02/droidkaigi-2019/</guid>
      <description>&lt;p&gt;DroidKaigi2019ã§ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒæ¡æŠã•ã‚ŒãŸã®ã§ç™ºè¡¨ã—ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;script async class=&#34;speakerdeck-embed&#34; data-id=&#34;b801b49e61ef4c478e6020941393b9ed&#34; data-ratio=&#34;1.77777777777778&#34; src=&#34;//speakerdeck.com/assets/embed.js&#34;&gt;&lt;/script&gt;

&lt;p&gt;&lt;a href=&#34;https://speakerdeck.com/satoshun/proguard-che-di-bi-jiao&#34;&gt;https://speakerdeck.com/satoshun/proguard-che-di-bi-jiao&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;æœ€åˆã«ç™ºè¡¨ã®åçœç‚¹ã§ã™ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;å¤šãè©°ã‚è¾¼ã¿ã™ãã¦ã€1ã¤1ã¤ã®æ˜ã‚Šä¸‹ã’ãŒç–ã‹ã«ãªã£ãŸ

&lt;ul&gt;
&lt;li&gt;çµæœçš„ã«åºƒãæµ…ã„ç™ºè¡¨ã«ãªã£ã¦ã—ã¾ã£ãŸãŸã‚ã€1ã¤ã®1ã¤ãŒã‚ã¾ã‚Šä¸å¯§ã«èª¬æ˜ã§ãã¦ã„ãªã‹ã£ãŸã‚ˆã†ã«æ„Ÿã˜ã¦ã„ã¾ã™ã€‚é‡è¦ãªéƒ¨åˆ†ã¯ã‚‚ã†å°‘ã—ä¸å¯§ã«ç™ºè¡¨ã™ã¹ãã§ã—ãŸã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;æ—©å£ã™ãã€ä¿ºã¯ç”Ÿãæ€¥ã„ã§ã‚‹ã®ã‹ï¼Ÿ

&lt;ul&gt;
&lt;li&gt;æœ¬å½“ã«ç”³ã—è¨³ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚å‰æ—¥ã«æœ€çµ‚ç¢ºèªã—ãŸã¨ã“ã‚20åˆ†è¿‘ãã‚ªãƒ¼ãƒãƒ¼ã—ã¦ã—ã¾ã„ã€ãã“ã‹ã‚‰ã‚ã‚‹ç¨‹åº¦ã¯é–“å¼•ã„ãŸã‚“ã§ã™ãŒã€æ—©å£ã§ã„ãã¨ã„ã†æˆ¦ç•¥ã‚’å–ã£ã¦ã—ã¾ã„ã¾ã—ãŸğŸ˜‚ ä»–ã®æ–¹ã®ç™ºè¡¨ã®ã‚ˆã†ã«èãã‚„ã™ã„ç™ºè¡¨ã‚’ä»Šå¾Œã¯æ„è­˜ã—ã¦ã„ãã¾ã™ï¼&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;æ¬¡ã«è‰¯ã‹ã£ãŸç‚¹ã§ã™ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ç™ºè¡¨å‰ã®ä¼‘æ†©æ™‚é–“ã«ã€å¸ä¼šã®@neonankitiã•ã‚“ã®åŠ©ã‘ã§ã€ã‚¢ã‚¤ã‚¹ãƒ–ãƒ¬ã‚¤ã‚¯?ã®ã‚ˆã†ãªã“ã¨ãŒã§ããŸ

&lt;ul&gt;
&lt;li&gt;@neonankitiã•ã‚“ã¨ã¯åˆå¯¾é¢ã ã£ãŸã‚“ã§ã™ãŒã€è¬ã®æ›ã‘åˆã„ãŒã§ãã€ä¼šå ´ã®é›°å›²æ°—ã‚‚è‰¯ããªã£ãŸã‚ˆã†ã«æ€ã„ã¾ã™ğŸ˜Š&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;ãªã‚“ã ã‹ã‚“ã ã¨R8ã®ã‚³ãƒ¼ãƒ‰ã‚’è§¦ã‚ŒãŸã®ã¯è‰¯ã‹ã£ãŸ

&lt;ul&gt;
&lt;li&gt;R8ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã®ã‚³ãƒ¼ãƒ‰ã«è§¦ã‚Œã‚‹ã‹ã©ã†ã‹æ‚©ã‚“ã ã®ã§ã™ãŒã€printãƒ‡ãƒãƒƒã‚°ãªã©ã‚’é§†ä½¿ã—ã¦ã€ç†è§£ãŒé–“é•ã£ã¦ã„ãªã„ã“ã¨ãŒç¢ºèªã§ããŸã®ã§ã€è¼‰ã›ã¦ã¿ã¾ã—ãŸã€‚æ¦‚è¦ã ã‘ã§ã™ãŒã€å€‹äººçš„ã«ã¯è‰¯ã‹ã£ãŸã¨æ€ã£ã¦ã„ã¾ã™ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;æœ€å¾Œã«è©±ã—ãŸå®Ÿè·µç·¨ã®ã‚¦ã‚±ãŒè‰¯ãã¦ã‚ˆã‹ã£ãŸ

&lt;ul&gt;
&lt;li&gt;R8ã®å‡„ã•ãŒåˆ†ã‹ã‚Šã‚„ã™ãä¼ãˆã‚‰ã‚ŒãŸã®ã‹ãªã¨æ€ã„ã¾ã™ğŸ˜Š&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;æœ€å¾Œã«ã€åƒ•ã®ç™ºè¡¨ã‚’èãã«æ¥ã¦ãã‚ŒãŸäººã€é‹å–¶ã®ã¿ãªã•ã‚“ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸğŸ˜Š&lt;/p&gt;

&lt;p&gt;ã¾ãŸæ¥å¹´ã‚‚ã‚ã‚Œã°ç™»å£‡ã§ãã‚‹ã‚ˆã†ã«é ‘å¼µã‚Šã¾ã™ğŸ’ª&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://bit.ly/2UQggVj&#34; alt=&#34;DroidKaigi2019&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>R8/Proguard: Jarãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ProGuardè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§ãã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ</title>
      <link>https://satoshun.github.io/2019/01/r8-proguard-metainf/</link>
      <pubDate>Mon, 28 Jan 2019 00:08:35 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2019/01/r8-proguard-metainf/</guid>
      <description>

&lt;p&gt;&lt;del&gt;AGP3.3.0&lt;/del&gt;ProGuardã¯AGP3.3.0ã€R8ã¯å°å…¥ã•ã‚ŒãŸAGP3.2.0ã‹ã‚‰ã€Jarãƒ•ã‚¡ã‚¤ãƒ«ã®ProGuardè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’çµ„ã¿è¾¼ã‚ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚ãã®æ©Ÿèƒ½ç´¹ä»‹ã§ã™ã€‚
ä»Šã¾ã§ã€aarã§ã¯&lt;code&gt;consumerProguardFiles&lt;/code&gt;ã§ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ProGuardè¨­å®šã‚’æŒ‡å®šã§ãã¾ã—ãŸã€‚ãã‚Œã®Jarã€Javaãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ãƒ©ã‚¤ãƒ–ãƒ©ãƒªé–‹ç™ºè€…å´ã®è¨­å®š&#34;&gt;ãƒ©ã‚¤ãƒ–ãƒ©ãƒªé–‹ç™ºè€…å´ã®è¨­å®š&lt;/h2&gt;

&lt;p&gt;Retrofitãªã©ã®Squareç¤¾ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã¯ã€æ—©ãã‚‚ã“ã®æ©Ÿèƒ½ã«å¯¾å¿œã—ã¦ã„ã‚‹ã®ã§ã€ãã‚Œã‚’ä¾‹ã«ã—ã¦èª¬æ˜ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãšã€&lt;code&gt;resources/META-INF/prougard&lt;/code&gt;ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä¸­ã«ProGuardã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç½®ãã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/square/retrofit/tree/master/retrofit/src/main/resources/META-INF/proguard&#34;&gt;square/retrofit&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ãƒ©ã‚¤ãƒ–ãƒ©ãƒªå´ã®è¨­å®šã¯ã“ã‚Œã§å®Œäº†ã§ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ä½¿ã†å´ã®è¨­å®š&#34;&gt;ä½¿ã†å´ã®è¨­å®š&lt;/h2&gt;

&lt;p&gt;AGP3.3.0ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹ã ã‘ã§ä½¿ãˆã¾ã™ã€‚META-INF/ProGuardã¯Retrofitã®2.5.0ã‹ã‚‰å…¥ã£ã¦ã„ã‚‹ã®ã§ã€ã¾ãšã¯META-INFãŒå…¥ã£ã¦ã„ãªã„ã€2.4.0ã§ãƒ“ãƒ«ãƒ‰ã‚’ã—ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;implementation &amp;quot;com.squareup.retrofit2:retrofit:2.4.0&amp;quot;

&amp;gt; ./gradlew installRelease
...
Warning: there were 267 unresolved references to classes or interfaces.
         You may need to add missing library jars or update their versions.
         If your code works fine without the missing classes, you can suppress
         the warnings with &#39;-dontwarn&#39; options.
         (http://proguard.sourceforge.net/manual/troubleshooting.html#unresolvedclass)
Warning: Exception while processing task java.io.IOException: Please correct the above warnings first.
Thread(Tasks limiter_2): destruction
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¤±æ•—ã—ã¾ã—ãŸğŸ˜‚&lt;/p&gt;

&lt;p&gt;æ¬¡ã«META-INFãŒå…¥ã£ãŸ2.5.0ã§ãƒ“ãƒ«ãƒ‰ã‚’ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;implementation &amp;quot;com.squareup.retrofit2:retrofit:2.5.0&amp;quot;

&amp;gt; ./gradlew installRelease
...

BUILD SUCCESSFUL in 21s
38 actionable tasks: 18 executed, 20 from cache
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æˆåŠŸã—ã¾ã—ãŸğŸ˜Š&lt;/p&gt;

&lt;p&gt;META-INFãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã¡ã‚ƒã‚“ã¨èª­ã¿è¾¼ã‚ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚ProGuardã®configurationãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèªã—ãŸã¨ã“ã‚ã€Retrofitã®ProGuardè¨­å®šãŒå…¥ã£ã¦ã„ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;// configuration.txt
...
# Retain service method parameters when optimizing.
-keepclassmembers,allowshrinking,allowobfuscation interface  * {
    @retrofit2.http.*
    &amp;lt;methods&amp;gt;;
}
...
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;è£œè¶³&#34;&gt;è£œè¶³&lt;/h2&gt;

&lt;p&gt;ã“ã®æ©Ÿèƒ½ã¯R8/ProGuardã€ä¸¡æ–¹ã¨ã‚‚å¯¾å¿œã—ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;è¿½è¨˜&#34;&gt;è¿½è¨˜&lt;/h2&gt;

&lt;p&gt;æœ€åˆã€å†’é ­ã§R8ã‚‚AGP3.3.0ã‹ã‚‰ã¨æ›¸ã„ãŸã‚“ã§ã™ãŒã€ãã‚Œã¯èª¤ã‚Šã§ã€AGP3.2.0ã®R8ãŒå°å…¥ã•ã‚ŒãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://twitter.com/kafumi__/status/1089816485386747905&#34;&gt;@kafumi__&lt;/a&gt;ã•ã‚“ã«ã”æŒ‡æ‘˜ã„ãŸã ãã¾ã—ãŸï¼ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ğŸ˜Š&lt;/p&gt;

&lt;h2 id=&#34;ã¾ã¨ã‚&#34;&gt;ã¾ã¨ã‚&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒJarã§ã‚ã£ãŸã¨ã—ã¦ã‚‚ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªä½œè€…ãŒå¯¾å¿œã—ã¦ãã‚Œã‚Œã°ProGuardã®è¨­å®šãŒæ¥½ã«ãªã‚‹!!!

&lt;ul&gt;
&lt;li&gt;ç¾çŠ¶ã€æœ‰åãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã¯ã€OkHttpã€Retrofitã€Coroutineãªã©ãŒå¯¾å¿œã—ã¦ã„ã¾ã™ğŸ˜Š&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;ã“ã®æ©Ÿèƒ½ãŒProGuardã§ã‚‚ä½¿ãˆã‚‹ã®ã‚’çŸ¥ã‚‰ãªã‹ã£ãŸã®ã§ã€å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãªã©ã®ãƒªãƒ³ã‚¯ã‚’çŸ¥ã£ã¦ã„ã‚‹æ–¹ãŒã„ã‚Œã°æ•™ãˆã¦ã»ã—ã„ã§ã™ğŸ™ğŸ™ğŸ™&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Fluxã®Dispatcherã‚’Roomã®in memoryã§å®Ÿè£…ã™ã‚‹ã®ã¯ã€å†—é•·ãªã‚³ãƒ¼ãƒ‰ãŒå¤šããªã‚‹ã®ã§è‰¯ããªã„</title>
      <link>https://satoshun.github.io/2019/01/room-with-flux/</link>
      <pubDate>Thu, 24 Jan 2019 00:43:33 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2019/01/room-with-flux/</guid>
      <description>

&lt;p&gt;Fluxã®Dispatcherã‚’Room in memoryã§å®Ÿè£…ã™ã‚Œã°æœ€é«˜ãªã®ã§ã¯?ã¨æ€ã„ã€ã¡ã‚‡ã£ã¨è©¦ã—ã¦ã¿ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;çµè«–ã‹ã‚‰ç”³ã—ã¾ã™ã¨å†—é•·ãªã‚³ãƒ¼ãƒ‰ãŒå¤šãã€è‰¯ããªã„ã¨æ„Ÿã˜ã¾ã—ãŸã€‚EventBusã‚„ã€ä»–ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã£ã¦å®Ÿè£…ã—ãŸã»ã†ãŒè‰¯ã„ã¨æ€ã„ã¾ã™ğŸ˜‚&lt;/p&gt;

&lt;p&gt;ã¾ãŸã€ã‚ªãƒªã‚¸ãƒŠãƒ«Fluxã¯ã€ŒDispatcherãŒã‚¢ãƒ—ãƒªå†…ã§1ã¤ã ã‘å­˜åœ¨ã™ã‚‹ã€ã¨ã„ã†åŸå‰‡ãŒã‚ã£ãŸã¨æ€ã„ã¾ã™ãŒã€ãã‚Œã‚’ç ´ã£ã¦ã„ã¾ã™ã€‚Fluxã§ã™ã‚‰ãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;room-in-memory&#34;&gt;Room in memory?&lt;/h2&gt;

&lt;p&gt;Roomã§ã¯in memoryã§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚æ­£ç¢ºã«è¨€ãˆã°ã€SQLiteã®æ©Ÿèƒ½ã‚’Roomã®APIã¨ã—ã¦é–‹æ”¾ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ä½¿ã„æ–¹ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;Room
  .inMemoryDatabaseBuilder(context, MyDatabase::class.java)
  .build()
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;in memoryã‚’ä½¿ã†ç†ç”±ã¨ã—ã¦ã¯ã€&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒã™ã‚‹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ°¸ç¶šåŒ–ã™ã‚‹å¿…è¦ã¯ãªã„ã ã‚ã†&lt;/li&gt;
&lt;li&gt;ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãŒå¿…è¦ãªã„&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;å®Ÿè£…ã«å…¥ã£ã¦ã„ã&#34;&gt;å®Ÿè£…ã«å…¥ã£ã¦ã„ã&lt;/h2&gt;

&lt;p&gt;ã§ã¯ã€å®Ÿè£…ã®èª¬æ˜ã‚’ã—ã¦ã„ãã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãšã¯Actionã‚’Roomã®Entityã¨ã—ã¦å®šç¾©ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;sealed class AuthorAction

@Entity(tableName = &amp;quot;author1&amp;quot;)
data class Author1(
  @PrimaryKey val _id: Long = 0, // always 0
  val name: String,
  val age: Int
) : AuthorAction()

@Entity(tableName = &amp;quot;author2&amp;quot;)
data class Author2(
  @PrimaryKey val _id: Long = 0, // always 0
  val name: String,
  val age: Int
) : AuthorAction()
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Primary keyã¯å¸¸ã«ä¸€å®šã«ã—ã¦ã€ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¯0 or 1ã¤ã—ã‹å­˜åœ¨ã—ãªã„ã‚ˆã†ã«ã—ã¦ãŠãã¾ã™ã€‚ä»®ã«ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®å±¥æ­´ãŒæ¬²ã—ã„ãªã‚‰ã€&lt;code&gt;@PrimaryKey(autoGenerate = true)&lt;/code&gt;ã‚’ä½¿ã£ã¦ã‚‚è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;æ¬¡ã«Daoã‚’å®šç¾©ã—ã¾ã™ã€‚ã“ã‚Œã¯Fluxã§ã„ã†ã¨ã“ã‚ã®Dispatcherã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;@Dao
interface AuthorDispatcher {
  @Insert(onConflict = OnConflictStrategy.REPLACE) fun dispatch(author: Author1)
  @Insert(onConflict = OnConflictStrategy.REPLACE) fun dispatch(author: Author2)

  // Storeã«ç›¸å½“ã™ã‚‹
  @Query(&amp;quot;select * FROM author1 WHERE _id = 0&amp;quot;)
  fun author(): LiveData&amp;lt;Author1?&amp;gt;

  // Storeã«ç›¸å½“ã™ã‚‹
  @Query(
    &amp;quot;&amp;quot;&amp;quot;
    select author1.name as name1, author2.name as name2
    FROM author1
     INNER JOIN author2
    WHERE author1._id = 0 AND author2._id = 0
    &amp;quot;&amp;quot;&amp;quot;
  )
  fun mappedAuthor(): LiveData&amp;lt;MappedAuthor?&amp;gt;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã¨ãªã‚Šã¾ã™ã€‚&lt;code&gt;@Insert&lt;/code&gt;ã§ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’dispatchãƒ¡ã‚½ãƒƒãƒ‰ã‚’ã€&lt;code&gt;@Query&lt;/code&gt;ã§subscribeãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã‚Œã§ã€Fluxã®Dispatcherã«ä¼¼ãŸä½•ã‹ã‚’Roomã§è¡¨ç¾ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ï¼&lt;/p&gt;

&lt;h2 id=&#34;ã¾ã¨ã‚-è€ƒå¯Ÿ&#34;&gt;ã¾ã¨ã‚/è€ƒå¯Ÿ&lt;/h2&gt;

&lt;p&gt;Roomã§Dispatcherçš„ãªã®ã‚’ä½œã‚‹æ–¹æ³•ã¨ã€EventBusãªã©ã‚’ä½¿ã£ãŸã‚¢ãƒ—ãƒ­ãƒ¼ãƒã®é•ã„ã¯ä»¥ä¸‹ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Storeã«æ›¸ã„ã¦ã„ãŸãƒ­ã‚¸ãƒƒã‚¯ã‚’SQLã«ä»»ã›ã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹

&lt;ul&gt;
&lt;li&gt;Transactionã‚’ä¸Šæ‰‹ãä½¿ãˆã°ã€ãƒãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ç’°å¢ƒã§ã‚‚ãã‚Œã£ã½ãå‹•ããã†&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;ã»ã’ã»ã’Dispactherã‚¯ãƒ©ã‚¹ãŒã‚¢ãƒ—ãƒªå†…ã«è”“å»¶ã™ã‚‹&lt;/li&gt;
&lt;li&gt;ã‚³ãƒ¼ãƒ‰ãŒå†—é•·ğŸ˜‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å·¥å¤«ã™ã‚Œã°ã€ã‚‚ã†å°‘ã—ã‚­ãƒ¬ã‚¤ã«æ›¸ã‘ã‚‹ã¨ã¯æ€ã„ã¾ã™ãŒã€ãŸã EventBusã‚„ã€Coroutineã‚’ä½¿ã£ãŸã‚¢ãƒ—ãƒ­ãƒ¼ãƒã«ã¯æ•µã‚ãªã„ã¨æ€ã£ã¦ã„ã¾ã™ã€‚
Fluxã®Dispatcherã®ä»£æ›¿ã¨ã—ã¦ã¯è¾›ã„ã§ã™ãŒã€ä»–ã®ç”¨é€”ã€ä¾‹ãˆã°Repositoryã®å®Ÿè£…ãªã©ã«ã¯ä½¿ãˆã‚‹ä½™åœ°ãŒã‚ã‚‹ã¨æ€ã†ã®ã§ã€ãã†ã„ã£ãŸã¨ã“ã‚ã§æ€ã„å‡ºã—ã¦ã„ãŸã ã‘ãŸã‚‰å¹¸ã„ã§ã™ğŸ˜Š&lt;/p&gt;

&lt;p&gt;æ¤œè¨¼ã«ç”¨ã„ãŸã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯&lt;a href=&#34;https://github.com/satoshun-android-example/RoomDispatcherExample&#34;&gt;RoomDispatcherExample&lt;/a&gt;ã«ã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>R8/Proguard: Daggerã®ç”Ÿæˆã‚³ãƒ¼ãƒ‰ãŒR8ã§ã©ã®ã‚ˆã†ã«å¤‰ã‚ã‚‹ã‹ã‚’è¦‹ã‚‹</title>
      <link>https://satoshun.github.io/2019/01/r8-dagger-optimize/</link>
      <pubDate>Sun, 20 Jan 2019 13:55:46 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2019/01/r8-dagger-optimize/</guid>
      <description>

&lt;p&gt;ã‚³ãƒ¼ãƒ‰ã®æœ€é©åŒ–ã®è©±ã§ã™ã€‚ã“ã®è¨˜äº‹ã§ã¯å®Ÿè·µã«å¯„ã›ã¦ã€Daggerã®ç”Ÿæˆã‚³ãƒ¼ãƒ‰ãŒR8ã«ã‚ˆã£ã¦ã©ã®ã‚ˆã†ã«å¤‰åŒ–ã™ã‚‹ã‹ã‚’è¦‹ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãšã¯ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã§ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;@Component(
  modules = [
    AppModule1::class,
    AppModule2::class
  ]
)
interface AppComponent {
  @Component.Builder
  interface Builder {
    fun build(): AppComponent
  }

  fun inject(activity: MainActivity)
}

@Module
class AppModule1 {
  @Provides
  fun provideService(): AppService {
    val retrofit = Retrofit.Builder()
      ...
    return retrofit.create()
  }
}

@Module
object AppModule2 {
  @JvmStatic
  @Provides
  fun provideService2(): AppService2 {
    val retrofit = Retrofit.Builder()
      ...
    return retrofit.create()
  }
}

---

class MainActivity : AppCompatActivity() {
  @Inject lateinit var appService: AppService
  @Inject lateinit var appService2: AppService2

  override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    setContentView(R.layout.activity_main)

    val appComponent = DaggerAppComponent.builder().build()
    appComponent.inject(this)

    ...
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã‚·ãƒ³ãƒ—ãƒ«ãªAppComponentã‚’å®šç¾©ã—ã¦ã€ãã“ã«AppModule1ã¨AppModule2ã‚’ç´ã¥ã‘ã¦ã„ã¾ã™ã€‚ãã‚Œã‚’ã€MainActivityã§ä½¿ã†ã‚³ãƒ¼ãƒ‰ã«ãªã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã‚Œã‚’æœ€é©åŒ–ãªã—ã§dexå¤‰æ›ã—ã¦ã€ãƒ‡ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public final class MainActivity extends AppCompatActivity {
    @Inject
    @NotNull
    public AppService appService;
    @Inject
    @NotNull
    public AppService2 appService2;

    ...

    protected void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        DaggerAppComponent.builder().build().inject(this);
        ...
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ™®é€šã®ã‚³ãƒ¼ãƒ‰ã§ã™ã€‚Kotlinã‚’Javaå¤‰æ›ã—ãŸã ã‘ãªã®ã§ã€ç‰¹ã«ãŠã‹ã—ãªéƒ¨åˆ†ã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;p&gt;æ¬¡ã«R8ã«ã‚ˆã‚‹æœ€é©åŒ–ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public final class MainActivity extends m {
    public AppService o;
    public AppService2 p;
    ...

    public void onCreate(Bundle bundle) {
        super.onCreate(bundle);
        setContentView((int) R.layout.activity_main);
        Object a = new AppModule1().a();
        a.a(a, &amp;quot;Cannot return null from a non-@Nullable @Provides method&amp;quot;);
        this.o = a;
        this.p = AppModule2_ProvideService2Factory.a();
        ...
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä½•ã¨ã„ã†ã“ã¨ã§ã—ã‚‡ã†ã€‚&lt;code&gt;DaggerAppComponent&lt;/code&gt;ãŒæ¶ˆãˆã¾ã—ãŸï¼&lt;/p&gt;

&lt;p&gt;DaggerAppComponentã®å„ãƒ¡ã‚½ãƒƒãƒ‰ãŒMainActivityå´ã«ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³å±•é–‹ã•ã‚Œã‚‹ã“ã¨ã§ã€å®Œå…¨ã«DaggerAppComponentã‚’æ¶ˆã™ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
å®Ÿéš›ã«apkã®ä¸­èº«ã‚’è¦‹ã¦ã€DaggerAppComponentã‚¯ãƒ©ã‚¹ãŒå­˜åœ¨ã—ãªã„ã“ã¨ã‚’ç¢ºèªã—ã¾ã—ãŸã€‚R8ã™ã”ã„ğŸ˜ƒ&lt;/p&gt;

&lt;h2 id=&#34;è£œè¶³&#34;&gt;è£œè¶³&lt;/h2&gt;

&lt;p&gt;Proguardã ã¨ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã ã¨ä¸Šè¨˜ã®ã‚µãƒ³ãƒ—ãƒ«ã‹ã‚‰ã€&lt;code&gt;DaggerAppComponent&lt;/code&gt;ã‚’æ¶ˆã™ã“ã¨ãŒå‡ºæ¥ã¾ã›ã‚“ã§ã—ãŸã€‚&lt;/p&gt;

&lt;h2 id=&#34;ã¾ã¨ã‚&#34;&gt;ã¾ã¨ã‚&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;R8ã™ã”ã„ğŸ˜ƒğŸ˜ƒğŸ˜ƒ&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>R8/Proguard: Kotlinã®lambdaæœ€é©åŒ–ã«ã¤ã„ã¦</title>
      <link>https://satoshun.github.io/2019/01/r8-kotlin-lambda/</link>
      <pubDate>Sun, 20 Jan 2019 06:56:16 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2019/01/r8-kotlin-lambda/</guid>
      <description>

&lt;p&gt;ã‚³ãƒ¼ãƒ‰ã®æœ€é©åŒ–ã®è©±ã§ã™ã€‚ã“ã®è¨˜äº‹ã§ã¯Kotlinã®lambdaå¼ã®æœ€é©åŒ–ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;kotlin-lambda&#34;&gt;Kotlin lambda&lt;/h2&gt;

&lt;p&gt;Kotlinã§ã¯é–¢æ•°å‹ãŒãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã‚¯ãƒ©ã‚¹ã§ã™ã€‚ã¨ã¦ã‚‚ä¾¿åˆ©ãªã®ã§ã™ãŒã€ãƒ©ãƒ ãƒ€ã‚’ä½¿ã†ãŸã³ã«å†…éƒ¨çš„ã«ã¯ã‚¯ãƒ©ã‚¹ã‚’1ã¤å®šç¾©ã™ã‚‹ãŸã‚ã€ã‚¯ãƒ©ã‚¹æ•°ã€ãƒ¡ã‚½ãƒƒãƒ‰æ•°ãŒã©ã‚“ã©ã‚“å¢—ãˆã¦ã„ãã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ä¾‹ãˆã°ã€æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã‚’æœ€é©åŒ–ãªã—ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;fun main() {
    lambdaTest1 { println(&amp;quot;Kotlin lambda1&amp;quot;) }
    lambdaTest1 { println(&amp;quot;Kotlin lambda2&amp;quot;) }
    lambdaTest1 { println(&amp;quot;Kotlin lambda3&amp;quot;) }
    ...
}

private fun lambdaTest1(body: () -&amp;gt; Unit) {
    ...
    body()
    ...
}
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;// ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«å¾Œ
public static final void main() {
    LambdaTestKt.lambdaTest1((Function0) LambdaTestKt$main$1.INSTANCE);
    LambdaTestKt.lambdaTest1((Function0) LambdaTestKt$main$2.INSTANCE);
    LambdaTestKt.lambdaTest1((Function0) LambdaTestKt$main$3.INSTANCE);
    ...
}

final class LambdaTestKt$main$1 extends Lambda implements Function0&amp;lt;Unit&amp;gt; {
    public static final LambdaTestKt$main$1 INSTANCE = new LambdaTestKt$main$1();

    LambdaTestKt$main$1() {
        super(0);
    }

    public final void invoke() {
        System.out.println(&amp;quot;Kotlin lambda1&amp;quot;);
    }
}

final class LambdaTestKt$main$2 extends Lambda implements Function0&amp;lt;Unit&amp;gt; {
    ...
}
final class LambdaTestKt$main$3 extends Lambda implements Function0&amp;lt;Unit&amp;gt; {
    ...
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;LambdaTestKt$main$1&lt;/code&gt;ã€&lt;code&gt;$2&lt;/code&gt;ã€&lt;code&gt;$3&lt;/code&gt;ãŒç”Ÿæˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚ãƒ©ãƒ ãƒ€ã‚’ä½¿ã†ç®‡æ‰€ã‚’å¢—ã‚„ã™ã¨$2ã€$3&amp;hellip;ã¨ã‚¯ãƒ©ã‚¹ãŒå¢—ãˆã¦ã„ãã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã®å•é¡Œã«å¯¾ã—ã€R8ã§ã¯LambdaGroupã¨ã„ã†ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚’ä½¿ã„æœ€é©åŒ–ã‚’ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;R8ã‚’ä½¿ã£ã¦ã€ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹ã¨æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public static final void main() {
    LambdaTestKt.lambdaTest1(-$$LambdaGroup$ks$BpS7w8o_KOkdSUy0gHGt84S7irI.INSTANCE$0);
    LambdaTestKt.lambdaTest1(-$$LambdaGroup$ks$BpS7w8o_KOkdSUy0gHGt84S7irI.INSTANCE$1);
    LambdaTestKt.lambdaTest1(-$$LambdaGroup$ks$BpS7w8o_KOkdSUy0gHGt84S7irI.INSTANCE$2);
    ...
}

public final class -$$LambdaGroup$ks$BpS7w8o_KOkdSUy0gHGt84S7irI extends Lambda implements Function0 {
    public static final -$$LambdaGroup$ks$BpS7w8o_KOkdSUy0gHGt84S7irI INSTANCE$0 = new -$$LambdaGroup$ks$BpS7w8o_KOkdSUy0gHGt84S7irI(0);
    public static final -$$LambdaGroup$ks$BpS7w8o_KOkdSUy0gHGt84S7irI INSTANCE$1 = new -$$LambdaGroup$ks$BpS7w8o_KOkdSUy0gHGt84S7irI(1);
    public static final -$$LambdaGroup$ks$BpS7w8o_KOkdSUy0gHGt84S7irI INSTANCE$2 = new -$$LambdaGroup$ks$BpS7w8o_KOkdSUy0gHGt84S7irI(2);
    public final /* synthetic */ int $id$;

    public -$$LambdaGroup$ks$BpS7w8o_KOkdSUy0gHGt84S7irI(int i) {
        this.$id$ = i;
        super(0);
    }

    public final Object invoke() {
        int i = this.$id$;
        if (i == 0) {
            System.out.println(&amp;quot;Kotlin lambda1&amp;quot;);
            return Unit.INSTANCE;
        } else if (i == 1) {
            System.out.println(&amp;quot;Kotlin lambda2&amp;quot;);
            return Unit.INSTANCE;
        } else if (i == 2) {
            System.out.println(&amp;quot;Kotlin lambda3&amp;quot;);
            return Unit.INSTANCE;
        } else {
            throw null;
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æœ€é©åŒ–ã—ãªã„å ´åˆã§ã¯ã€ãã‚Œãã‚Œã®ãƒ©ãƒ ãƒ€ã«å¯¾ã—ã¦ã€å°‚ç”¨ã®ã‚¯ãƒ©ã‚¹ãŒ1ã¤ãšã¤å®šç¾©ã•ã‚Œã¦ã„ã¾ã—ãŸã€‚æœ€é©åŒ–ã•ã‚ŒãŸå¾Œã§ã¯1ã¤ã®ã‚¯ãƒ©ã‚¹ã€LambadGroupã«ã¾ã¨ã¾ã£ã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚
ã“ã®ã‚¯ãƒ©ã‚¹ã§ã¯ã€ãã‚Œãã‚Œã®ãƒ©ãƒ ãƒ€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«idã‚’æŒãŸã›ã‚‹ã“ã¨ã§ã€ã©ã®ãƒ©ãƒ ãƒ€ã‹ã‚’åˆ†é¡ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã®æœ€é©åŒ–ã«ã‚ˆã‚Šã€ã‚¯ãƒ©ã‚¹æ•°ã€ãƒ¡ã‚½ãƒƒãƒ‰æ•°ã‚’æŠ‘ãˆã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>R8/Proguard: Kotlinã®Companion objectã¨objectã«ã¤ã„ã¦</title>
      <link>https://satoshun.github.io/2019/01/r8-companion-object/</link>
      <pubDate>Sun, 20 Jan 2019 04:23:43 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2019/01/r8-companion-object/</guid>
      <description>

&lt;p&gt;ã‚³ãƒ¼ãƒ‰ã®æœ€é©åŒ–ã®è©±ã§ã™ã€‚ã“ã®è¨˜äº‹ã§ã¯Kotlinã®Companion objectã¨objectã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã®è¨˜äº‹ã¯ã€&lt;a href=&#34;https://jakewharton.com/r8-optimization-staticization/&#34;&gt;R8 Optimization: Staticization&lt;/a&gt;ã«ã¨ã¦ã‚‚å½±éŸ¿ã‚’å—ã‘ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;companion-object&#34;&gt;Companion object&lt;/h2&gt;

&lt;p&gt;ä¾‹ãˆã°ã€æ¬¡ã®ã‚³ãƒ¼ãƒ‰ãŒã‚ã‚‹ã¨ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;class CompanionTest {
    companion object {
        fun show(i: Int) {
            ...
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã‚Œã‚’æœ€é©åŒ–ãªã—ã§å¤‰æ›ã™ã‚‹ã¨æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public final class CompanionTest {
    public static final Companion Companion = new Companion();

    public static final class Companion {
        private Companion() {
        }

        public final void show(int i) {
            ...
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Companionã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒç”Ÿæˆã•ã‚Œã¦ã„ã‚‹ã®ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚ãŸã ã€ã“ã®Companion objectã¯ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ç”Ÿæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ãªãœãªã‚‰ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®å®Ÿè£…ãªã©ã‚’ã—ã¦ã„ãªã„ã‹ã‚‰ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ãã“ã§R8ã«ã‚ˆã‚‹æœ€é©åŒ–ã‚’è¡Œã†ã¨æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public abstract class CompanionTest {
    public static final void show(int i) {
        ...
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¡é§„ãªå†…éƒ¨ã‚¯ãƒ©ã‚¹ï¼ˆenclosing classï¼‰ãŒæ¶ˆãˆã¦ã€staticãƒ¡ã‚½ãƒƒãƒ‰ã«å¤‰æ›ã•ã‚Œã¦ã„ã‚‹ã®ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚ã“ã®showãƒ¡ã‚½ãƒƒãƒ‰ã¯ã‚ã–ã‚ã–ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰ã«ã™ã‚‹å¿…è¦ãŒãªã„ãŸã‚ã€ã“ã®ã‚ˆã†ãªæœ€é©åŒ–ãŒè¡Œã‚ã‚Œã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;object&#34;&gt;object&lt;/h2&gt;

&lt;p&gt;objectã‚‚åŒæ§˜ã§ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;object ObjectTest {
    fun show(i: Int) {
        ...
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æœ€é©åŒ–ãªã—ã ã¨æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public final class ObjectTest {
    public static final ObjectTest INSTANCE = new ObjectTest();

    public final void show(int i) {
        ...
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;INSTANCEãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒç”Ÿæˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;æ¬¡ã«R8ã«ã‚ˆã‚‹æœ€é©åŒ–ã‚’è¡Œã„ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public abstract class ObjectTest {
    public static final void show(int i) {
        ...
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Companion objectã¨åŒæ§˜ã«å†—é•·ãªã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ç”ŸæˆãŒæ¶ˆãˆã¦ã„ã¾ã™ã€‚
Proguardã®å ´åˆã€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ç”Ÿæˆã¯æ¶ˆãˆãªã„ã®ã§ã€R8ã®ä¸€æ­©é€²ã‚“ã æœ€é©åŒ–ã¨ã„ãˆã¾ã™ã€‚ï¼ˆã‚‚ã—ã‹ã—ãŸã‚‰Proguardã®è¨­å®šæ¬¡ç¬¬ã§ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ç”Ÿæˆã‚’ã—ãªã„ã‚ˆã†ã«å‡ºæ¥ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã§ã™ã€‚ï¼‰&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>R8/Proguard: Class Mergingã«ã¤ã„ã¦</title>
      <link>https://satoshun.github.io/2019/01/r8-merge-method/</link>
      <pubDate>Sun, 20 Jan 2019 02:16:43 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2019/01/r8-merge-method/</guid>
      <description>

&lt;p&gt;ã‚³ãƒ¼ãƒ‰ã®æœ€é©åŒ–ã®è©±ã§ã™ã€‚ã“ã®è¨˜äº‹ã§ã¯Class Mergingã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;class-merging&#34;&gt;Class Merging?&lt;/h2&gt;

&lt;p&gt;ãã®åã®é€šã‚Šã€Classã‚’ãƒãƒ¼ã‚¸ã™ã‚‹æœ€é©åŒ–ã§ã™ã€‚æœ€çµ‚çš„ãªã‚¯ãƒ©ã‚¹æ•°æ¸›ã‚‰ã™ã“ã¨ãŒæœŸå¾…å‡ºæ¥ã¾ã™ã€‚
Class Mergingã«ã¯ç¸¦æ–¹å‘ï¼ˆVerticalï¼‰ã¨ã€æ¨ªæ–¹å‘ï¼ˆHorizontalï¼‰ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãšã¯ç¸¦æ–¹å‘ã®Class Mergingã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;h3 id=&#34;ç¸¦æ–¹å‘&#34;&gt;ç¸¦æ–¹å‘?&lt;/h3&gt;

&lt;p&gt;ç¸¦æ–¹å‘ã¨ã¯ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¿ã‚¤ãƒ—ã®å®Ÿè£…ãŒ1ã¤ã ã£ãŸã¨ãã«ã€ãã®ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¿ã‚¤ãƒ—ã¨å®Ÿè£…ã§ã‚ã‚‹ã‚µãƒ–ã‚¿ã‚¤ãƒ—ã‚’1ã¤ã«ã¾ã¨ã‚ã‚‹æœ€é©åŒ–ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ä¾‹ãˆã°ã€æ¬¡ã®å®Ÿè£…ã¯æœ€é©åŒ–ã«ã‚ˆã£ã¦1ã¤ã«ã¾ã¨ã‚ã‚‰ã‚Œã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;interface IVertical {
    fun show(i: Int)
}

class Vertical(
    private val a: Int
) : IVertical {
    override fun show(i: Int) {
        println(&amp;quot;start called $i $a&amp;quot;)
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&amp;ndash;&amp;gt; Proguard/R8ã«ã‚ˆã‚‹æœ€é©åŒ–å¾Œ &amp;ndash;&amp;gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public final class Vertical {
    ...

    public final void show(int i) {
        ...
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;IVertical&lt;/code&gt;ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãŒè¦‹äº‹ã«æ¶ˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãŸã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã§ã¯ãªãabstractã‚¯ãƒ©ã‚¹ã®å ´åˆã¯R8ã®å ´åˆã®ã¿ä¸Šæ‰‹ããƒãƒ¼ã‚¸ã•ã‚Œã¾ã—ãŸã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://r8.googlesource.com/r8/+/master/src/main/java/com/android/tools/r8/shaking/VerticalClassMerger.java&#34;&gt;R8: Vertical Merger&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/facebook/proguard/blob/master/src/proguard/optimize/peephole/VerticalClassMerger.java&#34;&gt;Proguard: Vertical Merger&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æ¬¡ã«æ¨ªæ–¹å‘ã®ãƒãƒ¼ã‚¸ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;h3 id=&#34;æ¨ªæ–¹å‘&#34;&gt;æ¨ªæ–¹å‘?&lt;/h3&gt;

&lt;p&gt;Staticãƒ¡ã‚½ãƒƒãƒ‰ã®ã¿ã‚’æŒã¤ã‚¯ãƒ©ã‚¹ã‚’1ã¤ã«ã¾ã¨ã‚ã‚‹ãªã©ã®æœ€é©åŒ–ã‚’è¡Œã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ä¾‹ãˆã°Kotlinã®è¤‡æ•°ã®ãƒ•ã‚¡ã‚¤ãƒ«ã§å®šç¾©ã•ã‚ŒãŸãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«é–¢æ•°ã‚’1ã¤ã®ã‚¯ãƒ©ã‚¹ã«ã¾ã¨ã‚ã¦ãã‚Œã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;// ShowExt.kt
fun Int.show1(i: Int) {
    ...
}

// ShowExt2.kt
fun Int.show2(i: Int) {
    ...
}

--&amp;gt; Proguard/R8ã«ã‚ˆã‚‹æœ€é©åŒ–å¾Œ --&amp;gt;

```java
public class ShowExt2Kt {
    public static final void show1(int i) {
        ...
    }
}

    public static final void show2(int i) {
        ...
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;1ã¤ã®ã‚¯ãƒ©ã‚¹ã«ã¾ã¨ã‚ã‚‰ã‚Œã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãŸã€å®Ÿéš›ã®Androidãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ç¢ºèªã—ãŸã¨ã“ã‚ã€ç¢ºã‹ã«æ‹¡å¼µé–¢æ•°ãŒä»–ã®ã‚¯ãƒ©ã‚¹ã«ãƒãƒ¼ã‚¸ã•ã‚Œã¦ã„ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;// Fuga.kt
fun Int.show1() {
    ...
}

// mapping.txtã®å†…å®¹
android.support.constraint.solver.widgets.Analyzer -&amp;gt; a.b.b.a.a.a:
    ...
    void com.github.satoshun.example.FugaKt.show1(int) -&amp;gt; d
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ãªãœã“ã®ã‚¯ãƒ©ã‚¹ã«ç§»å‹•ã—ãŸã‹ã¯åˆ†ã‹ã‚‰ãªã„ã®ã§ã€ä»Šå¾Œã®å®¿é¡Œã¨ã—ã¾ã™ã€‚ç”³ã—è¨³ã‚ã‚Šã¾ã›ã‚“ğŸ˜«&lt;/p&gt;

&lt;h2 id=&#34;ã¾ã¨ã‚&#34;&gt;ã¾ã¨ã‚&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;æ¨ªæ–¹å‘ã®ãƒãƒ¼ã‚¸ã«ã¤ã„ã¦ã¯å†…å®¹ã«è‡ªä¿¡ãŒãªã„ã®ã§ã€ã‚‚ã—é–“é•ã£ã¦ã„ãŸã‚Šã€è£œè¶³ãŒã‚ã‚Œã°æ•™ãˆã¦é ‚ã‘ã‚‹ã¨ã¨ã¦ã‚‚å¬‰ã—ã„ã§ã™ğŸ™&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
  </channel>
</rss>