<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
      <title>stsnãƒ–ãƒ­ã‚°</title>
      <generator uri="https://hugo.spf13.com">Hugo</generator>
    <link>https://satoshun.github.io/</link>
    <language>ja</language>
    <author>Sato Shun</author>
    <copyright>2018 Sato Shun</copyright>
    <updated>Fri, 16 Nov 2018 00:00:00 UTC</updated>
    
    
    <item>
      <title>Activityã€Fragmentã€Viewã«ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã™ã‚‹</title>
      <link>https://satoshun.github.io/2018/11/android_all_inject_ctor/</link>
      <pubDate>Fri, 16 Nov 2018 00:00:00 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2018/11/android_all_inject_ctor/</guid>
      <description>

&lt;p&gt;Daggerãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã„ã€Androidãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãŒæä¾›ã™ã‚‹Activityãªã©ã®ã‚¯ãƒ©ã‚¹ã«ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã—ãŸã„ã€
ãã‚“ãªå¤¢ã‚’ã¿ãŸAndroidã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¯æ•°å¤šãã„ã‚‹ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã®è¨˜äº‹ã§ã¯ãã‚“ãªå¤¢ã‚’å¶ãˆã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/satoshun-android-example/ConstructorInjectionExample&#34;&gt;ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯ã“ã“ã«&lt;/a&gt;ã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;fragmentfactory&#34;&gt;FragmentFactory&lt;/h2&gt;

&lt;p&gt;Fragmentã«ä¾å­˜é–¢ä¿‚ã‚’æ³¨å…¥ã™ã‚‹æ™‚ã€æ™®é€šã«ã‚„ã‚‹ã¨ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;class MainFragment : Fragment() {
  @Inject lateinit var userHandler: UserHandler
  ...
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã‚Œã‚’ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã«ã—ãŸã„ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;class MainFragment @Inject constructor(
  private val userHandler: UserHandler
) : Fragment() {
  ...
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;androidx.fragment:fragment:1.1.0-alpha01&lt;/code&gt;ã‹ã‚‰ã€FragmentFactoryãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸ!!
ã“ã‚Œã‚’ä½¿ã†ã“ã¨ã§ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;MainFragmentã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã™ã‚‹&lt;code&gt;FragmentFactory&lt;/code&gt;ã‚’ä½œæˆã—ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;class MainFragmentFactory @Inject constructor(
  private val fragment: Provider&amp;lt;MainFragment&amp;gt;
) : FragmentFactory() {
  override fun instantiate(
    classLoader: ClassLoader,
    className: String,
    args: Bundle?
  ): Fragment {
    if (className == MainFragment::class.java.name) {
      return fragment.get()
    }
    return super.instantiate(classLoader, className, args)
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;FragmentFactory.instantiate&lt;/code&gt;ã‚’overrideã—ã€ãã“ã§MainFragmentã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã—ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;æœ€å¾Œã«ã€ä½œæˆã—ãŸ&lt;code&gt;MainFragmentFactory&lt;/code&gt;ã‚’Activityã®&lt;code&gt;FragmentManager&lt;/code&gt;ã«ç™»éŒ²ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;class MainActivity : AppCompatActivity() {
  @Inject lateinit var fragmentFactory: MainFragmentFactory

  override fun onCreate(savedInstanceState: Bundle?) {
    DaggerAppComponent.create().inject(this)
    supportFragmentManager.fragmentFactory = fragmentFactory

    super.onCreate(savedInstanceState)
    ...
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;SupportFragmentManager.fragmentFactory&lt;/code&gt;ã«ç™»éŒ²ã—ã¾ã™ã€‚
ã“ã‚Œã§ã€FragmentãŒç”Ÿæˆã•ã‚Œã‚‹ã¨ã&lt;code&gt;MainFragmentFactory&lt;/code&gt;ãŒãƒ•ãƒƒã‚¯ã•ã‚Œã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;SupportFragmentManager.fragmentFactory&lt;/code&gt;ã«Factoryã‚’ç™»éŒ²ã™ã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¯&lt;code&gt;super.onCreate(savedInstanceState)&lt;/code&gt;ã®å‰ãŒè‰¯ã„ã¨æ€ã„ã¾ã™ã€‚
ãã‚Œã¯&lt;code&gt;super.onCreate&lt;/code&gt;ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ä»¥å‰ã®FragmentãŒå¾©å…ƒã•ã‚Œã‚‹ãŸã‚ã§ã™ã€‚
å¾©å…ƒã•ã‚Œã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§é©åˆ‡ãªFactoryãŒãªã„ã¨ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã™ã‚‹ã®ã§ã€å¾©å…ƒã™ã‚‹å‰ã§ç™»éŒ²ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;layoutinflater-factory&#34;&gt;LayoutInflater.Factory&lt;/h2&gt;

&lt;p&gt;æ¬¡ã«Viewã§ã™ã€‚&lt;code&gt;LayoutInflater.Factory&lt;/code&gt;ãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚
ã“ã‚Œã‚’ä½¿ã†ã“ã¨ã§ã‚«ã‚¹ã‚¿ãƒ ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’æŒã£ãŸViewã‚’å®šç¾©ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;class MainTextView(
  context: Context,
  private val userHandler: UserHandler
) : TextView(context) {
  class Factory @Inject constructor(private val userHandler: UserHandler) {
    fun create(context: Context): MainTextView {
      return MainTextView(context, userHandler)
    }
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã‚«ã‚¹ã‚¿ãƒ ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’æŒã£ãŸViewã¯é€šå¸¸ã®æ–¹æ³•ã§ã¯ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã§ãã¾ã›ã‚“ãŒã€
&lt;code&gt;LayoutInflater.Factory&lt;/code&gt;ã‚’ä½¿ã†ã“ã¨ã§ã€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;class MainLayoutInflaterFactory @Inject constructor(
  private val factory: MainTextView.Factory
) : LayoutInflater.Factory {
  override fun onCreateView(name: String, context: Context, attrs: AttributeSet?): View? {
    if (name == MainTextView::class.java.name) {
      return factory.create(context)
    }
    return null
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;LayoutInflater.Factory.onCreateView&lt;/code&gt;ã‚’overrideã—ã€&lt;code&gt;MainTextView&lt;/code&gt;ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã—ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;æœ€å¾Œã«ã€ä½œæˆã—ãŸ&lt;code&gt;MainLayoutInflaterFactory&lt;/code&gt;ã‚’Activityã®&lt;code&gt;layoutInflater.factory&lt;/code&gt;ã«ç™»éŒ²ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;class MainActivity : AppCompatActivity() {
  private lateinit var layoutInflaterFactory: MainLayoutInflaterFactory

  override fun onCreate(savedInstanceState: Bundle?) {
    DaggerAppComponent.create().inject(this)
    layoutInflater.factory = layoutInflaterFactory

    super.onCreate(savedInstanceState)
    ...
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Activityã®&lt;code&gt;LayoutInflater.factory&lt;/code&gt;ã«ç™»éŒ²ã—ã¾ã™ã€‚ç™»éŒ²ã™ã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¯setContentViewã®å‰ãŒè‰¯ã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;appcomponentfactory&#34;&gt;AppComponentFactory&lt;/h2&gt;

&lt;p&gt;æ¬¡ã«Activityã§ã™ã€‚
Activityã«ä¾å­˜é–¢ä¿‚ã‚’æ³¨å…¥ã™ã‚‹æ™‚ã€æ™®é€šã«ã‚„ã‚‹ã¨ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;class MainActivity : Activity() {
  @Inject lateinit var presenter: UserPresenter
  @Inject lateinit var analytics: Analytics
  ...
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã‚Œã‚’ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã«ã—ãŸã„ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;class MainActivity @Inject constructor(
  private val presenter: UserPresenter,
  private val analytics: Analytics
): Activity() {
  ...
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã—ã‹ã—ã€ã“ã®æ›¸ãæ–¹ã¯ã†ã¾ãã„ãã¾ã›ã‚“ã€‚ãªãœãªã‚‰Activityã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¯ã‚·ã‚¹ãƒ†ãƒ å´ã§è‡ªå‹•çš„ã«ç”Ÿæˆã•ã‚Œã‚‹ãŸã‚ã§ã™ã€‚
ã‚«ã‚¹ã‚¿ãƒ å®šç¾©ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã ã¨ã€ã‚·ã‚¹ãƒ†ãƒ å´ã§ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã‚Œã‚’è§£æ±ºã™ã‚‹ã¹ãã€API28ã‹ã‚‰AppComponentFactoryã¨ã„ã†ã‚¯ãƒ©ã‚¹ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸ!!&lt;/p&gt;

&lt;p&gt;MainActivityã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã™ã‚‹&lt;code&gt;AppComponentFactory&lt;/code&gt;ã‚’ä½œæˆã—ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;@Suppress(&amp;quot;unused&amp;quot;)
class MainAppComponentFactory : AppComponentFactory() {
  private lateinit var application: App

  override fun instantiateActivityCompat(
    cl: ClassLoader,
    className: String,
    intent: Intent?
  ): Activity {
    if (className == MainActivity::class.java.name) {
      return application.appComponent.mainActivity
    }
    return super.instantiateActivityCompat(cl, className, intent)
  }

  override fun instantiateApplicationCompat(cl: ClassLoader, className: String): Application {
    application = super.instantiateApplicationCompat(cl, className) as App
    return application
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ¬¡ã«Androidãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã«&lt;code&gt;MainAppComponentFactory&lt;/code&gt;ã‚’ç™»éŒ²ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;...
  &amp;lt;application
    android:allowBackup=&amp;quot;true&amp;quot;
    android:name=&amp;quot;.App&amp;quot;
    android:appComponentFactory=&amp;quot;com.github.satoshun.example.sample.MainAppComponentFactory&amp;quot;
    android:icon=&amp;quot;@mipmap/ic_launcher&amp;quot;
    android:label=&amp;quot;@string/app_name&amp;quot;
    android:roundIcon=&amp;quot;@mipmap/ic_launcher_round&amp;quot;
    android:supportsRtl=&amp;quot;true&amp;quot;
    android:theme=&amp;quot;@style/AppTheme&amp;quot;
    tools:replace=&amp;quot;android:appComponentFactory&amp;quot;&amp;gt;
    ...
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;AppComponentFactory.instantiateActivityCompat&lt;/code&gt;ã‚’overrideã—ã€&lt;code&gt;MainActivity&lt;/code&gt;ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã—ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã‚Œã§ã€ã‚«ã‚¹ã‚¿ãƒ ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’æŒã£ãŸActivityã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™!!&lt;/p&gt;

&lt;h2 id=&#34;ã¾ã¨ã‚&#34;&gt;ã¾ã¨ã‚&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;Fragmentã€Viewã¯ä»Šã‹ã‚‰ã§ã‚‚ä½¿ã„å§‹ã‚ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚Daggerãªã©ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨çµ„ã¿åˆã‚ã›ã‚‹ã¨æœ€é«˜â˜†&lt;/li&gt;
&lt;li&gt;AppComponentFactoryã¯API28ã‹ã‚‰ãªã®ã§&amp;hellip;5å¹´å¾Œãã‚‰ã„ã§ã—ã‚‡ã†ã‹ğŸ˜¢&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/satoshun-android-example/ConstructorInjectionExample&#34;&gt;ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯ã“ã“ã§ã™&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ä½•ã‹ç–‘å•ç‚¹ãŒã‚ã‚Œã°ã€twitterã‚„ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã®ISSUEãªã©ã§èã„ã¦ãã ã•ã„ğŸ˜ƒ&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Kotlin: Contracts &#43; æ‹¡å¼µé–¢æ•°ã§ã‚ˆã‚Šä¾¿åˆ©ã«</title>
      <link>https://satoshun.github.io/2018/11/more_convenient_contracts/</link>
      <pubDate>Sun, 11 Nov 2018 00:00:00 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2018/11/more_convenient_contracts/</guid>
      <description>

&lt;p&gt;Kotlin 1.3.0ã‹ã‚‰ContractsãŒå®Ÿè£…ã•ã‚Œã¾ã—ãŸã€‚
Contractsã‚’ä½¿ã†ã“ã¨ã§ã€é–¢æ•°ãŒã©ã®ã‚ˆã†ãªæŒ¯ã‚‹èˆã„ã‚’ã™ã‚‹ã‹ã€ã©ã†ã„ã†åŠ¹æœã‚’ã‚‚ãŸã‚‰ã™ã‹ã‚’å®šç¾©ï¼ˆå¥‘ç´„ï¼‰ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ä¾‹ãˆã°ã€&lt;code&gt;isNullOrEmpty&lt;/code&gt;ãƒ¡ã‚½ãƒƒãƒ‰ãŒfalseè¿”ã™ãªã‚‰ã€
Contractsã«ã‚ˆã‚Šnullã§ãªã„ã“ã¨ãŒä¿è¨¼ã•ã‚Œã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;val a: String? = ...
if (!a.isNullOrEmpty()) {
    println(a.length) // !!ãŒå¿…è¦ãªã„
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ContractsãŒãªã„æ™‚ä»£ã ã¨å‘¼ã³å‡ºã—å…ƒã§&lt;code&gt;isNullOrEmpty&lt;/code&gt;ãŒã©ã‚“ãªæŒ¯ã‚‹èˆã„ã‚’ã™ã‚‹ã‹ã‚’çŸ¥ã‚‹ã™ã¹ãŒãªã‹ã£ãŸã®ã§ã€
&lt;code&gt;!!&lt;/code&gt;ã‚’ã¤ã‘ã‚‹å¿…è¦ãŒã‚ã£ãŸã®ã§ã™ãŒã€Contractsã«ã‚ˆã‚Šnullã§ãªã„ã“ã¨ãŒä¿è¨¼ã§ãã‚‹ã®ã§ã€&lt;code&gt;!!&lt;/code&gt;ã‚’çœç•¥ã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;isNullOrEmpty&lt;/code&gt;ã®å®Ÿè£…ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;@kotlin.internal.InlineOnly
public inline fun CharSequence?.isNullOrEmpty(): Boolean {
    contract {
        returns(false) implies (this@isNullOrEmpty != null)
    }

    return this == null || this.length == 0
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;contract&lt;/code&gt;ã¯DSLï¼ˆé–¢æ•°ï¼‰ã¨ã—ã¦å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚
ã“ã‚Œã‚’å‘¼ã³å‡ºã—ã€ãã®ãƒ–ãƒ­ãƒƒã‚¯ã®ä¸­ã§ã“ã®é–¢æ•°ãŒæº€ãŸã™æŒ¯ã‚‹èˆã„ã‚’å®šç¾©ã™ã‚‹äº‹ãŒã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;isNullOrEmpty&lt;/code&gt;ã®å ´åˆã¯&lt;code&gt;returns(false) implies (this@isNullOrEmpty != null)&lt;/code&gt;ãŒå¥‘ç´„ã¨ã—ã¦å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã‚Œã¯ã€&lt;code&gt;ã€Œreturns(false)&lt;/code&gt;: falseã‚’è¿”ã™ãªã‚‰ &lt;code&gt;(this@isNullOrEmpty != null)&lt;/code&gt;: è‡ªåˆ†è‡ªèº«ãŒnullã˜ã‚ƒãªã„ã€ã¨ã„ã†æ„å‘³ã«ãªã‚Šã¾ã™ã€‚
ãªã®ã§å‘¼ã³å‡ºã—å…ƒã§ã¯falseãŒè¿”ã£ã¦ããŸã‚‰ã€nullã§ã¯ãªã„ã“ã¨ãŒä¿è¨¼ã•ã‚Œã‚‹ã®ã§ã€smartcastã«ã‚ˆã‚Š&lt;code&gt;!!&lt;/code&gt;ã‚’ã¤ã‘ã‚‹å¿…è¦ãŒãªããªã‚‹ã‚ã‘ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ãªã®ã§ã€ä¾‹ãˆã°&lt;code&gt;T.isEmpty(t: T?): Boolean&lt;/code&gt;ã®ã‚ˆã†ãªãƒ¡ã‚½ãƒƒãƒ‰ãŒã‚ã‚Šã€ã¤ã„ã§ã«nullãƒã‚§ãƒƒã‚¯ã‚‚ã“ã®é–¢æ•°ã®ä¸­ã§ã‚„ã£ã¦ã„ã‚‹ã‚ˆã†ãªã¨ãã¯ã€
contractã‚’å®šç¾©ã™ã‚‹ã“ã¨ã§ã‚ˆã‚Šä½¿ã„ã‚„ã™ã„é–¢æ•°ã«ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ä»–ã®ä¾‹ã‚’è¦‹ã¦ã¿ã¾ã™ã€‚ã‚¹ã‚³ãƒ¼ãƒ—é–¢æ•°&lt;code&gt;apply&lt;/code&gt;ã®å®Ÿè£…ã¯æ¬¡ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;@kotlin.internal.InlineOnly
public inline fun &amp;lt;T&amp;gt; T.apply(block: T.() -&amp;gt; Unit): T {
    contract {
        callsInPlace(block, InvocationKind.EXACTLY_ONCE)
    }
    block()
    return this
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;apply&lt;/code&gt;é–¢æ•°å†…ã§ã¯ã€&lt;code&gt;callsInPlace(block, InvocationKind.EXACTLY_ONCE)&lt;/code&gt;ãŒå¥‘ç´„ã¨ã—ã¦å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚
ã“ã‚Œã¯ã€&lt;code&gt;block&lt;/code&gt;é–¢æ•°ãŒå¿…ãš1åº¦å‘¼ã³å‡ºã•ã‚Œã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚
ã“ã‚Œã«ã‚ˆã‚Šã€ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãã“ã¨ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;val a: String
hoge.apply {
    a = &amp;quot;hoge&amp;quot;
}
println(a)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;apply&lt;/code&gt;é–¢æ•°ã¯1åº¦ã—ã‹å‘¼ã³å‡ºã•ã‚Œãªã„ã®ã§&lt;code&gt;val a: String&lt;/code&gt;ã®åˆæœŸåŒ–ãŒã€&lt;code&gt;apply&lt;/code&gt;é–¢æ•°å†…ã§æ­£ã—ãè¡Œã‚ã‚Œã‚‹ã“ã¨ãŒä¿è¨¼ã•ã‚Œã¾ã™ã€‚
Kotlin 1.3.0ä»¥å‰ã®contractãŒå†…æ™‚ä»£ã§ã¯ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã„ãŸã®ã§ã™ãŒã€
contractã«ã‚ˆã‚Šã€å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒå¯èƒ½ã«ãªã‚Šã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ä»Šã¾ã§è¦‹ã¦ããŸã®ã¯Kotlinã®ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«å…¥ã£ã¦ã„ãŸé–¢æ•°ã§ã™ãŒã€ã‚«ã‚¹ã‚¿ãƒ ã§å®šç¾©ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚
ä»Šå›ã¯ä¾‹ã¨ã—ã¦ã€&lt;code&gt;ActivityScenario.onActivity&lt;/code&gt;ãƒ¡ã‚½ãƒƒãƒ‰ã‚’contract + æ‹¡å¼µé–¢æ•°ã‚’ä½¿ã£ã¦ã‚ˆã‚Šä¾¿åˆ©ã«ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/android/android-test/blob/f2f3589c9d6e2ff5740117192cb7e13bd8873a0f/core/java/androidx/test/core/app/ActivityScenario.java#L500&#34;&gt;ActivityScenario.onActivity&lt;/a&gt;ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€callbackã‚’ç™»éŒ²ã™ã‚‹ã¨ã€Activityã®æº–å‚™ãŒã§ããŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§callbackãŒå©ã‹ã‚Œã¾ã™ã€‚ãã—ã¦ã€ã“ã®&lt;code&gt;onActivity&lt;/code&gt;ãƒ¡ã‚½ãƒƒãƒ‰ã¯ä¸€åº¦ã—ã‹ã‚³ãƒ¼ãƒ«ã•ã‚Œãšã€å®Ÿè¡Œã—ãŸã‚¹ãƒ¬ãƒƒãƒ‰ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã—ã¾ã™ã€‚ãªã®ã§ã€å‰è¿°ã—ãŸ&lt;code&gt;apply&lt;/code&gt;é–¢æ•°ã¨åŒã˜contractã‚’æ›¸ãã“ã¨ãŒå¯èƒ½ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ä»¥ä¸‹ã®ã‚ˆã†ã«æ‹¡å¼µé–¢æ•°ã‚’æ›¸ãã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;@UseExperimental(ExperimentalContracts::class)
fun &amp;lt;T : Activity&amp;gt; ActivityScenario&amp;lt;T&amp;gt;.onActivity2(block: (T) -&amp;gt; Unit) {
  contract {
    callsInPlace(block, InvocationKind.EXACTLY_ONCE)
  }
  onActivity {
    block(it)
  }
}


// ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãªã„!!
val activity: Activity
scenario.onActivity2 {
    activity = it
}
println(activity)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;@UseExperimental(ExperimentalContracts::class)&lt;/code&gt;ã‚’ã¤ã‘ã‚‹ã“ã¨ã§ã€ãƒ¦ãƒ¼ã‚¶å®šç¾©ã®contractã‚’å®šç¾©ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ã¾ã¨ã‚&#34;&gt;ã¾ã¨ã‚&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;1åº¦ã—ã‹ã‚³ãƒ¼ãƒ«ã•ã‚Œãªã„callbackã‚„ã€é–¢æ•°å†…ã§nullãƒã‚§ãƒƒã‚¯ã‚’ã™ã‚‹å ´åˆã¯contractã‚’ä½¿ã†ã¨è¶…ä¾¿åˆ©ã«ãªã‚‹ã‹ã‚‚&lt;/li&gt;
&lt;li&gt;æ‹¡å¼µé–¢æ•°ã‚’æ–°ã—ãå®šç¾©ã™ã‚‹ã“ã¨ã§ã€æ—¢å­˜ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ã‚ˆã‚Škotlin-friendlyãªãƒ¡ã‚½ãƒƒãƒ‰ã«ã§ãã‚‹ã‹ã‚‚!?&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/Kotlin/KEEP/blob/master/proposals/kotlin-contracts.md&#34;&gt;https://github.com/Kotlin/KEEP/blob/master/proposals/kotlin-contracts.md&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Android: ãƒ‡ãƒãƒƒã‚°æ™‚ã«Moshiã€Daggerãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã„ãƒ“ãƒ«ãƒ‰æ™‚é–“ã‚’çŸ­ç¸®ã™ã‚‹</title>
      <link>https://satoshun.github.io/2018/11/debug_reflection/</link>
      <pubDate>Sat, 10 Nov 2018 00:00:00 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2018/11/debug_reflection/</guid>
      <description>

&lt;p&gt;ãƒ“ãƒ«ãƒ‰æ™‚é–“ã®çŸ­ç¸®ã¯é–‹ç™ºåŠ¹ç‡ã‚’ä¸Šã’ã‚‹å¤§ããªè¦ç´ ã§ã™ã€‚
æ¥µåŠ›kaptï¼ˆã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ï¼‰ã‚’ä½¿ã‚ãªãã™ã‚‹ã“ã¨ã§ã€ãƒ“ãƒ«ãƒ‰æ™‚é–“ã‚’çŸ­ç¸®å‡ºæ¥ã¾ã™ã€‚
ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã‚’ä½¿ã£ãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ã€ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã‚’ä½¿ã‚ãªã„ã€
ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç”¨ã„ãŸãƒ‡ãƒãƒƒã‚°ç”¨ã®æ©Ÿèƒ½ã‚’æä¾›ã—ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ä»Šå›ã¯ã€Moshiã¨Daggerãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ç´¹ä»‹ã‚’ã—ã¾ã™ã€‚
Daggerãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã¯çµ¶è³›é–‹ç™ºä¸­ + å…¬å¼ã§ã¯ãªã„ã®ã§ã€æ©Ÿèƒ½ãŒã‹ãªã‚Šåˆ¶é™ã•ã‚Œã¦ã„ã‚‹ã€ã©ã†ã„ã†æœªæ¥ãŒå¾…ã£ã¦ã„ã‚‹ã‹ã‚ã‹ã‚‰ãªã„ç‚¹ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚&lt;/p&gt;

&lt;p&gt;æ¤œè¨¼ã«ç”¨ã„ãŸ&lt;a href=&#34;https://github.com/satoshun-android-example/DebugReflectExample&#34;&gt;ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯ã“ã“&lt;/a&gt;ã«ã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;moshiãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³&#34;&gt;Moshiãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³&lt;/h2&gt;

&lt;p&gt;Moshiã«ã¯moshi-codegenã¨å‘¼ã°ã‚Œã‚‹ã€ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã§ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã—ã¦ãã‚Œã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒã‚ã‚Šã¾ã™ã€‚
ã“ã‚Œã¯å®Ÿè¡Œæ™‚ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«ã¯å„ªã‚Œã¦ã„ã‚‹ã®ã§ã™ãŒã€ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã‚’ä½¿ã£ã¦ã„ã‚‹ãŸã‚ã€ãƒ“ãƒ«ãƒ‰ã«æ™‚é–“ãŒã‹ã‹ã£ã¦ã—ã¾ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ãã“ã§ã€Moshiã§ã¯moshi-reflectionã¨å‘¼ã°ã‚Œã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’æä¾›ã—ã¦ãŠã‚Šã€ã“ã‚Œã¯ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã‚’ä½¿ã†ã“ã¨ãªãã€
moshi-codegenã¨åŒç­‰ã®æ©Ÿèƒ½ã‚’æä¾›ã—ã¦ãã‚Œã¾ã™ã€‚
ãŸã ã—ã€moshi-reflectionã¯å†…éƒ¨ã§ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä½¿ã£ã¦ã„ã‚‹ãŸã‚ã€å®Ÿè¡Œæ™‚ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«ã¯å„ªã‚Œã¦ã„ã¾ã›ã‚“ã€‚ã‚ãã¾ã§ãƒ‡ãƒãƒƒã‚°ç”¨ã€ã¨ã„ã†ç«‹ã¡ä½ç½®ã ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ãƒ‡ãƒãƒƒã‚°æ™‚ã«moshi-reflectionã‚’ä½¿ã„ã€ãƒªãƒªãƒ¼ã‚¹æ™‚ã«moshi-codegenã‚’ä½¿ã†ã“ã¨ã§ã€ãƒ“ãƒ«ãƒ‰é€Ÿåº¦ã¨å®ŸåŠ¹é€Ÿåº¦ã®å¤©ç§¤ã‚’å‹ã¡å–ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;å…·ä½“çš„ã«ã¯ã€ãƒ‡ãƒãƒƒã‚°æ™‚ã€ãƒªãƒªãƒ¼ã‚¹æ™‚ã«&lt;code&gt;build.gradle&lt;/code&gt;ã§æŒ‡å®šã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã€Moshiã«ç™»éŒ²ã™ã‚‹Adapterã‚’å¤‰æ›´ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-groovy&#34;&gt;// bulid.gradle

implementation &amp;quot;com.squareup.moshi:moshi:1.8.0&amp;quot;
debugImplementation &amp;quot;com.squareup.moshi:moshi-kotlin:1.8.0&amp;quot;
kaptRelease &amp;quot;com.squareup.moshi:moshi-kotlin-codegen:1.8.0&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;// debugæ™‚
fun createMoshiBuilder() = Moshi.Builder()
    .add(KotlinJsonAdapterFactory()) // KotlinJsonAdapterFactoryã‚’æŒ‡å®šã™ã‚‹
    .build()

// releaseæ™‚
fun createMoshiBuilder() = Moshi.Builder()
    .build()
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã®ã‚ˆã†ã«æ›¸ãã“ã¨ã§ã€ãƒªãƒªãƒ¼ã‚¹æ™‚ã®ã¿kaptã‚’å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;daggerãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³&#34;&gt;Daggerãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³&lt;/h2&gt;

&lt;p&gt;ã“ã‚Œã¯SdkSearchå†…ã§é–‹ç™ºãŒè¡Œã‚ã‚Œã¦ã„ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚æœ‰åãªAndroidã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã§ã‚ã‚‹Jake Whartonã•ã‚“ãŒé–‹ç™ºã‚’ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã‚Œã‚‚Moshiã¨åŒæ§˜ã«ã€ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä½¿ã†ã“ã¨ã§ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã‚’æ¥µåŠ›ä½¿ã‚ãªã„ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚
ç¾çŠ¶ã€æœ€ä½é™ã®ã‚¯ãƒ©ã‚¹ã¯ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã§ä½œæˆã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã®ã§ã€å®Œå…¨é™¤å»ã¨ã„ã†ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
ä¾‹ãˆã°ã€ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã§&lt;code&gt;DaggerAppComponent&lt;/code&gt;ã¯ä½œã‚‰ã‚Œã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;æœ€åˆã«ã‚‚æ›¸ã„ãŸã®ã§ã™ãŒã€Daggerãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã¯çµ¶è³›é–‹ç™ºä¸­ã§ã€Scopeã€ã‚»ãƒƒã‚¿ãƒ¼ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ãªã©ã€å¤šãã®æ©Ÿèƒ½ãŒä½¿ãˆãªã„çŠ¶æ…‹ã§ã™ã€‚
ã“ã“ãŒæƒã£ã¦ãã‚Œã°ãƒ‡ãƒãƒƒã‚°æ™‚ã«ã¯Daggerãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä½¿ã†ã“ã¨ã§ã€ãƒ“ãƒ«ãƒ‰æ™‚é–“ã®çŸ­ç¸®ãŒå¯èƒ½ã«ãªã£ã¦ãã‚‹ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;å…·ä½“çš„ãªã‚³ãƒ¼ãƒ‰ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
Mavenã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„ã®ã§ã€SdkSearchã‹ã‚‰ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ä½¿ã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-groovy&#34;&gt;implementation &amp;quot;com.google.dagger:dagger:2.18&amp;quot;
debugImplementation project(&#39;:dagger-reflect:reflect&#39;) // SdkSearchã‹ã‚‰ã‚³ãƒ”ãƒ¼
kaptDebug project(&#39;:dagger-reflect:reflect-compiler&#39;) // SdkSearchã‹ã‚‰ã‚³ãƒ”ãƒ¼
kaptRelease &amp;quot;com.google.dagger:dagger-compiler:2.18&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ãƒ‡ãƒãƒƒã‚°æ™‚ã«ã¯Daggerãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä½¿ã„ã€ãƒªãƒªãƒ¼ã‚¹æ™‚ã«ã¯dagger-compilerã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚
ã‚³ãƒ¼ãƒ‰ã¯å…¨ãä¿®æ­£ã™ã‚‹ã“ã¨ãªãã€ãƒ“ãƒ«ãƒ‰æ™‚é–“ã®çŸ­ç¸®ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ã¾ã¨ã‚&#34;&gt;ã¾ã¨ã‚&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;ãƒ‡ãƒãƒƒã‚°æ™‚ã«ã¯kaptã€ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã‚’æŠ‘åˆ¶ã—ãƒ“ãƒ«ãƒ‰æ™‚é–“ã‚’çŸ­ç¸®ã—ã‚ˆã†ğŸ˜ƒ

&lt;ul&gt;
&lt;li&gt;butterknifeã‚‚reflectionã‚’ä½¿ã†ã“ã¨ãŒã§ãã‚‹&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Daggerãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã«ã¯æœŸå¾…ã—ã‹ãªã„ğŸ˜„

&lt;ul&gt;
&lt;li&gt;ä½•ã‹é€²ã¿ãŒã‚ã£ãŸã‚‰ã¾ãŸã¾ã¨ã‚ã‚ˆã†ã¨æ€ã„ã¾ã™&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ä»Šå›ã®è¨˜äº‹ã‚’æ¤œè¨¼ã™ã‚‹ãŸã‚ã«ä½œã£ãŸ&lt;a href=&#34;https://github.com/satoshun-android-example/DebugReflectExample&#34;&gt;ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯ã“ã“&lt;/a&gt;ã«ã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/JakeWharton/SdkSearch&#34;&gt;https://github.com/JakeWharton/SdkSearch&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/square/moshi&#34;&gt;https://github.com/square/moshi&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://jakewharton.com/helping-dagger-help-you/&#34;&gt;https://jakewharton.com/helping-dagger-help-you/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Kotlinã®Non-Nullå‹ã«nullã‚’ä»£å…¥ã™ã‚‹æ–¹æ³•</title>
      <link>https://satoshun.github.io/2018/11/kotlin-nullable-generic/</link>
      <pubDate>Wed, 07 Nov 2018 00:00:00 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2018/11/kotlin-nullable-generic/</guid>
      <description>

&lt;p&gt;Kotlinã§ã¯nullã‚’æ‰±ã„ã‚„ã™ãã™ã‚‹ãŸã‚ã«Nullableã€Non-Nullã‚’å‹ã§åˆ¶é™ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
Kotlinã®Non-Nullå‹ã«å¯¾ã—ã¦nullã‚’ä»£å…¥ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã€ä»£å…¥ã™ã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ä¾‹å¤–ã‚’åãã¾ã™ã€‚
Javaã¨Kotlinã‚’ä¸€ç·’ã«ä½¿ã£ã¦ã„ã‚‹ã¨ã€ã“ã®ä¾‹å¤–ã«é­é‡ã™ã‚‹ã“ã¨ãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;å…·ä½“çš„ã«ã¯ä»¥ä¸‹ã®æŒ™å‹•ã‚’ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public class Hoge {
    // nullã‚’è¿”ã™ãƒ¡ã‚½ãƒƒãƒ‰
    static String getName() {
        return null;
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;val d: String = Hoge.getName() // ã“ã“ã§ä¾‹å¤–ãŒæŠ•ã’ã‚‰ã‚Œã‚‹
println(d.length) // ã“ã‚Œã¯å®Ÿè¡Œã•ã‚Œãªã„
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€&lt;code&gt;val d: String = Hoge.getName()&lt;/code&gt;ã§&lt;code&gt;IllegalStateException&lt;/code&gt;ã‚’æŠ•ã’ã¾ã™ã€‚
Non-Nullå‹ã«nullã‚’ä»£å…¥ã—ã‚ˆã†ã¨ã—ã¦ã„ã‚‹ã‹ã‚‰ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;æ¬¡ã«ã€ä»£å…¥ã™ã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ä¾‹å¤–ã‚’æŠ•ã’ãªãã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;å…·ä½“çš„ã«ã¯ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã§é”æˆã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;fun &amp;lt;T&amp;gt; castNull(): T = null as T


val d: String = castNull() // ã“ã“ã§ã¯ä¾‹å¤–ãŒæŠ•ã’ã‚‰ã‚Œãªã„
println(d.length) // ã“ã“ã§ä¾‹å¤–ãŒæŠ•ã’ã‚‰ã‚Œã‚‹
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ãªãœã“ã®ã‚ˆã†ãªæŒ™å‹•ã«ãªã‚‹ã®ã‹ã‚’èª¬æ˜ã—ã¾ã™ã€‚ã¾ãš &lt;code&gt;castNull()&lt;/code&gt;ãƒ¡ã‚½ãƒƒãƒ‰ã«å®šç¾©ã•ã‚ŒãŸã‚¸ã‚§ãƒãƒªãƒƒã‚¯å‹Tã¯&lt;code&gt;Any?&lt;/code&gt;ã‚’upperã«æŒã¡ã¾ã™ã€‚
Kotlinã¯ã‚¸ã‚§ãƒãƒªãƒƒã‚¯ã‚’ä½¿ã„ã€ã‹ã¤Nullableå‹ã‚’upperã«æŒã¤ã¨ãã€nullã‹ã©ã†ã‹ã®ãƒã‚§ãƒƒã‚¯ã‚’ã—ã¾ã›ã‚“ã€‚ã“ã‚Œã¯ãƒã‚¤ãƒˆã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã‚Œã°åˆ†ã‹ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;GETSTATIC sample/SampleTestsJVMKt.a : Ljava/lang/String;
CHECKCAST java/lang/Object
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;CHECKCAST&lt;/code&gt;ã—ã‹ã—ã¦ãŠã‚‰ãšã€nullã‹ã©ã†ã‹ã®ãƒã‚§ãƒƒã‚¯ã‚’ã—ã¦ã„ã¾ã›ã‚“ã€‚
ãªã®ã§ã€&lt;code&gt;val d: String = castNull()&lt;/code&gt;ã§ã¯nullãƒã‚§ãƒƒã‚¯ãŒã•ã‚Œãªã„ãŸã‚ä¾‹å¤–ãŒæŠ•ã’ã‚‰ã‚Œãšã€å®Ÿéš›ã«ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ã‚³ãƒ¼ãƒ«ã™ã‚‹&lt;code&gt;println(d.length)&lt;/code&gt;ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ä¾‹å¤–ãŒæŠ•ã’ã‚‰ã‚Œã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;Non-Nullå‹ã§ã‚ã‚‹&lt;code&gt;String&lt;/code&gt;ã«nullã‚’ä»£å…¥ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;æ¬¡ã«ã€&lt;code&gt;fun &amp;lt;T: Any&amp;gt; castNull(): T = null as T&lt;/code&gt;ã¨ã€Non-Nullå‹ã‚’upperã«ã—ãŸå ´åˆã®ãƒã‚¤ãƒˆã‚³ãƒ¼ãƒ‰ã¯æ¬¡ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;GETSTATIC sample/SampleTestsJVMKt.a : Ljava/lang/String;
DUP
IFNONNULL L1
NEW kotlin/TypeCastException
DUP
LDC &amp;quot;null cannot be cast to non-null type T&amp;quot;
INVOKESPECIAL kotlin/TypeCastException.&amp;lt;init&amp;gt; (Ljava/lang/String;)V
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã¡ã‚‰ã®ãƒã‚¤ãƒˆã‚³ãƒ¼ãƒ‰ã«ã¯ã€nullãƒã‚§ãƒƒã‚¯ãŒå…¥ã£ã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚nullãƒã‚§ãƒƒã‚¯ã‚’ã—ã¦ã„ã‚‹ãŸã‚ã€&lt;code&gt;val d: String = castNull()&lt;/code&gt;ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ä¾‹å¤–ãŒæŠ•ã’ã‚‰ã‚Œã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;Nullableãªå‹ã‚’upperã«æŒã¤ã€æŒãŸãªã„ã§nullãƒã‚§ãƒƒã‚¯ã‚’ã™ã‚‹ã‹ã©ã†ã‹ãŒæ±ºã¾ã‚‹ã€ã¨ã„ã†è©±ã§ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ã“ã®æŒ™å‹•ã¯ &lt;a href=&#34;https://youtrack.jetbrains.com/issue/KT-8135&#34;&gt;https://youtrack.jetbrains.com/issue/KT-8135&lt;/a&gt; ISSUEã«ãƒã‚°ã¨ã—ã¦å ±å‘Šã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ä»Šå¾Œç•°ãªã‚‹ãƒã‚¤ãƒˆã‚³ãƒ¼ãƒ‰ãŒç”Ÿæˆã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚
ã‚‚ã—ã€ã“ã®æŒ™å‹•ã«ä¾å­˜ã™ã‚‹ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã„ã‚‹å ´åˆã¯æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;å®Ÿä¸–ç•Œã§ã¯ã€mockito-kotlinãŒã“ã®æŒ™å‹•ã«ä¾å­˜ã—ã¦ã„ã‚‹ã®ã§ã€ã‚ˆã‚Šèˆˆå‘³ãŒã‚ã‚‹æ–¹ã¯ãœã²èª­ã‚“ã§ãã ã•ã„ğŸ˜ƒ &lt;a href=&#34;https://github.com/nhaarman/mockito-kotlin/blob/2.x/mockito-kotlin/src/main/kotlin/com/nhaarman/mockitokotlin2/internal/CreateInstance.kt#L46&#34;&gt;ã“ã“ã®ã‚ãŸã‚Šã§ä½¿ã£ã¦ã„ã¾ã™&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/nhaarman/mockito-kotlin&#34;&gt;https://github.com/nhaarman/mockito-kotlin&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://youtrack.jetbrains.com/issue/KT-8135&#34;&gt;https://youtrack.jetbrains.com/issue/KT-8135&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>æ‹¡å¼µé–¢æ•° &#43; ã‚¸ã‚§ãƒãƒªãƒƒã‚¯å‹ã§ã‚ˆã‚Šã‚¿ã‚¤ãƒ—ã‚»ãƒ¼ãƒ•ã‚’å¾—ã‚‹</title>
      <link>https://satoshun.github.io/2018/11/extension-typesafe/</link>
      <pubDate>Sat, 03 Nov 2018 00:00:00 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2018/11/extension-typesafe/</guid>
      <description>

&lt;p&gt;Kotlinã®æ‹¡å¼µé–¢æ•°ã®è©±ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ä»¥ä¸‹ã®ã‚¯ãƒ©ã‚¹ãŒã‚ã£ãŸã¨ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;class A&amp;lt;T&amp;gt;(val value: T) {
  fun isNull(): Boolean {
    return value != null
  }
}

fun main() {
  val a1: A&amp;lt;Int&amp;gt; = ...
  a1.isNull()
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã®ã¨ãã€&lt;code&gt;a1.isNull()&lt;/code&gt;ã®çµæœã¯è‡ªæ˜ã§ã™ã€‚ãªãœãªã‚‰&lt;code&gt;A&amp;lt;Int&amp;gt;&lt;/code&gt;ã§å®£è¨€ã—ã¦ã„ã‚‹æ™‚ç‚¹ã§nonNullãŒç¢ºå®šã—ã¦ã„ã‚‹ãŸã‚ã§ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;fun main() {
  val a2: A&amp;lt;Int?&amp;gt; = ...
  a2.isNull()
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã®ã¨ãã€&lt;code&gt;a2.isNull()&lt;/code&gt;ã®çµæœã¯è‡ªæ˜ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
ãªãœãªã‚‰&lt;code&gt;A&amp;lt;Int?&amp;gt;&lt;/code&gt;ã§ã‚¸ã‚§ãƒãƒªãƒƒã‚¯å‹ã‚’å®£è¨€ã—ã¦ã„ã‚‹ã®ã§ã€nullableãªå€¤ãŒå…¥ã£ã¦ãã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã®2ã¤ã®ä¾‹ã‹ã‚‰ã€&lt;code&gt;a1.isNull()&lt;/code&gt;ã¯ãã‚‚ãã‚‚nonNullãªã®ã§&lt;code&gt;isNull()&lt;/code&gt;ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ã‚³ãƒ¼ãƒ«ã§ããªã„ã»ã†ãŒè‰¯ã„ã®ã§ã¯ãªã„ã‹ï¼Ÿã¨ã„ã†è€ƒãˆãŒæµ®ã‹ã³ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;Kotlinã®æ‹¡å¼µé–¢æ•°ã‚’ä½¿ã†ã“ã¨ã§é”æˆã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;class A&amp;lt;T&amp;gt;(val value: T)

// nullableã®ã¨ãã«ã‚³ãƒ¼ãƒ«ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
fun &amp;lt;T : Any&amp;gt; A&amp;lt;T?&amp;gt;.isNull(): Boolean {
  return value != null
}

fun main() {
  val a1: A&amp;lt;Int&amp;gt; = ...
  a1.isNull() // ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼!!

  val a2: A&amp;lt;Int?&amp;gt; = ...
  a2.isNull()
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;fun &amp;lt;T : Any&amp;gt; A&amp;lt;T?&amp;gt;.isNull()&lt;/code&gt;ã¨å®£è¨€ã™ã‚‹ã“ã¨ã§nullableæ™‚ã®ã¿ã‚³ãƒ¼ãƒ«ã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã‚¸ã‚§ãƒãƒªãƒƒã‚¯å‹ãŒnullableæ™‚ã®ã¿ã‚³ãƒ¼ãƒ«ã—ãŸã„å ´åˆã«æœ‰åŠ¹ãªãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã§ã—ãŸğŸ˜ƒ&lt;/p&gt;

&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://blog.nightlynexus.com/kotlin-extension-members-are-great-even-for-types-you-do-control/&#34;&gt;http://blog.nightlynexus.com/kotlin-extension-members-are-great-even-for-types-you-do-control/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Kotlinã§3ã¤ã®é–¢æ•°ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’çœç•¥ã™ã‚‹</title>
      <link>https://satoshun.github.io/2018/10/kotlin-decrease-function_params/</link>
      <pubDate>Tue, 16 Oct 2018 00:00:00 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2018/10/kotlin-decrease-function_params/</guid>
      <description>

&lt;p&gt;Kotlinã§ã¯æ‹¡å¼µé–¢æ•°ãŒå®šç¾©ã•ã‚Œã¦ãŠã‚Šã€æ‹¡å¼µé–¢æ•°ã‚’ä½¿ã†ã“ã¨ã§1ã¤é–¢æ•°ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’çœç•¥ã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;fun hoge(a: String) {
  println(a)
}

-&amp;gt;

fun String.hoge() {
  println(this)
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ¬¡ã«ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆã‚¯ãƒ©ã‚¹ï¼‰å†…ã§æ‹¡å¼µé–¢æ•°ã‚’å®šç¾©ã™ã‚‹ã“ã¨ã§ã€ã•ã‚‰ã«1ã¤ã®é–¢æ•°ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’çœç•¥ã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;interface User

fun hoge(a: String, b: User) {
  println(a)
  println(b)
}

-&amp;gt;

interface User {
  fun String.hoge() {
    println(this)
    println(this@User)
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã•ã‚‰ã«ã€reified type parameterã‚’ä½¿ã†ã“ã¨ã§ã€é–¢æ•°ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’çœç•¥ã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;fun &amp;lt;T&amp;gt; hoge(a: String, b: User, c: Class&amp;lt;T&amp;gt;) {
  println(a)
  println(b)
  println(c)
}

-&amp;gt;

class User {
  inline fun &amp;lt;reified T&amp;gt; String.hoge() {
    println(this)
    println(this@User)
    println(T::class)
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;interfaceã ã¨ã€inlineé–¢æ•°ãŒä½¿ãˆãªã„ã®ã§ã‚¯ãƒ©ã‚¹ã§å®šç¾©ã—ã¦ã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ã¾ã¨ã‚&#34;&gt;ã¾ã¨ã‚&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;Kotlinã®æ‹¡å¼µé–¢æ•°ã€reifiedä¾¿åˆ©ğŸ˜Š&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Unitãƒ†ã‚¹ãƒˆã§ViewModelã®onClearedã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹</title>
      <link>https://satoshun.github.io/2018/10/unittest-viewodel_oncleared/</link>
      <pubDate>Sun, 14 Oct 2018 00:00:00 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2018/10/unittest-viewodel_oncleared/</guid>
      <description>

&lt;p&gt;ãµã¨AACã®&lt;a href=&#34;https://developer.android.com/reference/androidx/lifecycle/ViewModel&#34;&gt;ViewModel&lt;/a&gt;ã®onClearedãƒ¡ã‚½ãƒƒãƒ‰ã‚’ãƒ†ã‚¹ãƒˆã—ãŸããªã£ãŸã®ã§ã€ 2ã¤ã®ã‚„ã‚Šã‹ãŸã‚’ç´¹ä»‹ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ç’°å¢ƒã¯&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;quot;junit:junit:4.12&amp;quot;
&amp;quot;androidx.test:rules:1.1.0-beta02&amp;quot;
&amp;quot;androidx.test:runner:1.1.0-beta02&amp;quot;
&amp;quot;androidx.test.ext:junit:1.0.0-beta02&amp;quot;
&amp;quot;com.nhaarman:mockito-kotlin-kt1.1:1.5.0&amp;quot;
&amp;quot;org.robolectric:robolectric:4.0-beta-1&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãŸã€ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯ &lt;a href=&#34;https://github.com/satoshun-android-example/Tests/blob/master/app/src/test/java/com/github/satoshun/example/architectures/BaseViewModelTest.kt&#34;&gt;GitHub&lt;/a&gt;ã«ã‚ã‚‹ã®ã§ã€å‚è€ƒã—ã¦ãã ã•ã„ğŸ˜Š&lt;/p&gt;

&lt;h3 id=&#34;1-viewmodelstore-ã‚’ä½¿ã†&#34;&gt;1. &lt;code&gt;ViewModelStore&lt;/code&gt;ã‚’ä½¿ã†&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;ViewModelProviders.of(activity).get(class)&lt;/code&gt;ã‹ã‚‰ViewModelã‚’å–å¾—ã—ãŸã¨ãã«ã€å–å¾—ã—ãŸViewModelã¯&lt;a href=&#34;https://developer.android.com/reference/androidx/lifecycle/ViewModelStore&#34;&gt;ViewModelStore&lt;/a&gt;ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã¾ã™ã€‚ã“ã®ViewModelStoreã¯FragmentActivityã‹ã‚‰å–å¾—ã§ãã‚‹ã®ã§ã€æ¬¡ã®ã‚ˆã†ã«æ›¸ãã“ã¨ã§ViewModelã®onClearedã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;@RunWith(AndroidJUnit4::class)
class BaseViewModelTest {
  @get:Rule val activityRule = ActivityTestRule(FragmentActivity::class.java)

  @Test
  fun `dispose a coroutine when finished lifecycle of ViewModel`() {
    activityRule.activity.viewModelStore.clear() // ViewModelãŒé–‹æ”¾ã•ã‚Œã‚‹
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã®ãƒ†ã‚¹ãƒˆã¯ã‚³ãƒ¼ãƒ‰çš„ã«ã¯ç°¡å˜ã§ã™ãŒã€ViewModelStoreãŒViewModelã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚’ç®¡ç†ã—ã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ã‚’çŸ¥ã£ã¦ã„ã‚‹ã€å†…éƒ¨å®Ÿè£…ã®è©³ç´°ã¾ã§çŸ¥ã£ã¦ã„ã‚‹ãŸã‚ã€ãƒ†ã‚¹ãƒˆã¨ã—ã¦ãµã•ã‚ã—ããªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ãªã®ã§ã€ç´ ç›´ã«onDestroyã‚’ã‚³ãƒ¼ãƒ«ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚‚æ›¸ã„ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;

&lt;h3 id=&#34;2-instrumentation-callactivityondestroy-ã‚’ä½¿ã†&#34;&gt;2. &lt;code&gt;Instrumentation.callActivityOnDestroy&lt;/code&gt;ã‚’ä½¿ã†&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;Instrumentation&lt;/code&gt;ã‚¯ãƒ©ã‚¹ã‚’ä½¿ã†ã“ã¨ã§Activityã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
&lt;code&gt;Instrumentation&lt;/code&gt;ã¯&lt;code&gt;InstrumentationRegistry&lt;/code&gt;ã‚¯ãƒ©ã‚¹ã‹ã‚‰å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã€æ¬¡ã®ã‚ˆã†ã«æ›¸ãã“ã¨ã§ã€&lt;code&gt;onDestroy&lt;/code&gt;ã‚’ã‚³ãƒ¼ãƒ«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;@Test
fun `dispose a coroutine when finished lifecycle of ViewModel 2`() {
  // onDestroyãŒã‚³ãƒ¼ãƒ«ã•ã‚ŒViewModelãŒé–‹æ”¾ã•ã‚Œã‚‹
  InstrumentationRegistry.getInstrumentation().callActivityOnDestroy(activityRule.activity)
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã‚Œã§ã€Unitãƒ†ã‚¹ãƒˆã§&lt;code&gt;ViewModel.onCleared&lt;/code&gt;ã®ãƒ†ã‚¹ãƒˆã‚’ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ä»¥ä¸Šã§ã™ã€‚Happy Testingâ˜†å½¡&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/satoshun-android-example/Tests/blob/master/app/src/test/java/com/github/satoshun/example/architectures/BaseViewModelTest.kt&#34;&gt;ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Inline classesã¨Gsonã§primitiveå‹ã‚’ã‚¯ãƒ©ã‚¹ã§å—ã‘ã¨ã‚‹</title>
      <link>https://satoshun.github.io/2018/09/android-gson-inlineclasses/</link>
      <pubDate>Mon, 17 Sep 2018 00:00:00 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2018/09/android-gson-inlineclasses/</guid>
      <description>

&lt;p&gt;ï¼ˆã“ã®è¨˜äº‹ã¯1.3-M2ã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚ï¼‰&lt;/p&gt;

&lt;p&gt;Kotlin 1.3ã§Inline classesãŒå…¥ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«å½±éŸ¿ã‚’ä¸ãˆãšã«ã€å€¤ã®ãƒ©ãƒƒãƒ‘ãƒ¼ã‚¯ãƒ©ã‚¹ã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ä¾‹ãˆã°ã€æ¬¡ã®ã‚ˆã†ã«æ›¸ãã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;inline class UserId(val id: String) {
    val url get() = &amp;quot;http://$id&amp;quot;
}

val userId = UserId(&amp;quot;user-dayo&amp;quot;)
println(userId.url)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ä¸€è¦‹ã€UserIdã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒç”Ÿæˆã•ã‚Œãã†ã§ã™ã€‚
ã—ã‹ã—ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã§ã¯UserIdã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¯ç”Ÿæˆã•ã‚Œã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public static final class UserId$Erased {
    ...

    @NotNull
    public static final String getUrl(String $this) {
        return &amp;quot;http://&amp;quot; + $this;
    }

    ...
}

String userId = &amp;quot;user-dayo&amp;quot;;
String var1 = UserId$Erased.getUrl(userId);
System.out.println(var1);
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;UserIdã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œã‚‰ãšã«ã€Stringã‚’ãã®ã¾ã¾ä½¿ã£ã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚ãã—ã¦è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸ&lt;code&gt;UserId$Erased&lt;/code&gt;ã‚¯ãƒ©ã‚¹ã«ã‚ã‚‹staticãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã„ã¾ã™ã€‚Inline classesã§ã¯ã€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã›ãšã«staticãƒ¡ã‚½ãƒƒãƒ‰ã‚’ã‚³ãƒ¼ãƒ«ã™ã‚‹ã“ã¨ã§ã€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ç”Ÿæˆã®ã‚³ã‚¹ãƒˆã‚’æŠ‘ãˆã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã“ã‹ã‚‰ãŒæœ¬é¡Œã§ã™ã€‚
Inline classesãŒAndroidé–‹ç™ºã®ã©ã“ã§å½¹ç«‹ã¤ã®ã‹ã‚’è€ƒãˆãŸã¨ãã«ã€ Gsonãªã©ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã‚ˆã£ã¦deserialize/serializeã•ã‚Œã‚‹ã‚¯ãƒ©ã‚¹ã§æœ‰åŠ¹ä½¿ãˆã‚‹ã¨æ€ã„ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ä¾‹ãˆã°ã€æ¬¡ã®ã‚³ãƒ¼ãƒ‰ãŒã‚ã£ãŸã¨ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;data class Response(
    @SerializedName(&amp;quot;user_id&amp;quot;) val userId: String,
    @SerializedName(&amp;quot;friend_id&amp;quot;) val friendId: String
)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã‚Œã¯userIdã¨friendIdã‚’Stringã§å—ã‘å–ã£ã¦ãŠã‚Šã€ã“ã®StringãŒä½•ã®Stringã‹ã®æƒ…å ±ãŒæ¬ è½ã—ã¦ã„ã¾ã™ã€‚å‹ã«ã‚ˆã‚‹åˆ†é¡ãŒå‡ºæ¥ã¦ãªã„çŠ¶æ…‹ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã‚Œã«Inline classesã‚’ä½¿ã£ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;inline class UserId(private val id: String) {
    val url get() = &amp;quot;http://my/$id&amp;quot;
}

inline class FriendId(private val id: String) {
    val url get() = &amp;quot;http://friend/$id&amp;quot;
}

data class Response(
    @SerializedName(&amp;quot;user_id&amp;quot;) val userId: UserId,
    @SerializedName(&amp;quot;friend_id&amp;quot;) val friendId: FriendId
)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Inline classesãŒã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã•ã‚Œã‚‹ã¨ã€Stringã«å±•é–‹ã•ã‚Œã‚‹ã®ã§æ­£ã—ãå‹•ä½œã—ã¾ã™ã€‚
æœ¬æ¥ã€ã‚«ã‚¹ã‚¿ãƒ ã®ã‚¯ãƒ©ã‚¹ã§å€¤ã‚’å—ã‘å–ã‚‹ã¨ãã¯Adapterã‚’åˆ¥é€”å®šç¾©ã™ã‚‹å¿…è¦ãŒã‚ã£ãŸã§ã™ãŒã€ãã®å¿…è¦ãŒãªããªã‚Šã¾ã—ãŸğŸ˜„&lt;/p&gt;

&lt;h2 id=&#34;ã¾ã¨ã‚&#34;&gt;ã¾ã¨ã‚&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;Inline classesã‚’ä½¿ãˆã°ã€ã‚«ã‚¹ã‚¿ãƒ ã®Adapterã‚’ä½œæˆã™ã‚‹ã“ã¨ãªãserialize/deserializeã§ãã‚‹ã®ã§éå¸¸ã«ä¾¿åˆ©ã§ã™â˜º&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Daggerã§private valã§ä¾å­˜é–¢ä¿‚ã‚’å–å¾—ã—ãŸã‹ã£ãŸ</title>
      <link>https://satoshun.github.io/2018/09/android-dagger-simple-example/</link>
      <pubDate>Fri, 07 Sep 2018 00:00:00 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2018/09/android-dagger-simple-example/</guid>
      <description>

&lt;p&gt;ã¿ãªã•ã‚“ã“ã‚“ã«ã¡ã¯&lt;/p&gt;

&lt;p&gt;ä»Šå›ã¯Daggerã®è©±ã‚’ã—ã¾ã™ã€‚Dagger + Kotlinã®1ã¤æ°—ã«ãªã‚‹ç‚¹ã¨ã—ã¦&lt;code&gt;@Inject lateinit var&lt;/code&gt; ã«ãªã£ã¦ã—ã¾ã†ã¨ã“ã‚ãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;class HogeActivity {
    @Inject lateinit var hoge: Hoge
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã‚Œã‚’ãªã‚“ã¨ã‹å‡ºæ¥ãªã„ã‹ãªã¨æ€ã£ã¦è€ƒãˆã¦ã¿ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;çµè«–ã‹ã‚‰è¨€ã†ã¨æœ€çµ‚å½¢ã¯ã“ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;class HogeActivity {
    private val hoge: Hoge by inject()
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;private valã«ãªã‚Šã¾ã—ãŸã€‚ã“ã‚Œã‚’ã©ã®ã‚ˆã†ã«å®Ÿç¾ã—ãŸã‹ã«ã¤ã„ã¦èª¬æ˜ã—ã¦ãã¾ã™ã€‚ã¡ãªã¿ã«ã§ã™ãŒã€ã“ã‚Œã¯ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã«è€ãˆã‚Œã‚‹ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã”äº†æ‰¿ãã ã•ã„ã€‚&lt;/p&gt;

&lt;p&gt;ä»Šå›ã¯&lt;code&gt;IntoMap&lt;/code&gt;ã‚’ä½¿ã£ã¦å®Ÿè£…ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;IntoMap&lt;/code&gt;ã¨ã¯ãã®åã®é€šã‚ŠMapã«ãƒã‚¤ãƒ³ãƒ‰ã™ã‚‹ãŸã‚ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚
è©³ã—ãã¯&lt;a href=&#34;https://google.github.io/dagger/multibindings.html&#34;&gt;ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ&lt;/a&gt;ã‚’è¦‹ã¦ãã ã•ã„ã€‚&lt;/p&gt;

&lt;p&gt;ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã§èª¬æ˜ã—ã¦ã„ãã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãšã¯IntoMapã‚’ä½¿ã„ã€Mapã¸ã®ãƒã‚¤ãƒ³ãƒ‰ã‚’Moduleã«å®šç¾©ã—ã¦ã„ãã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;@Module
interface HogeModule {
    @Binds @IntoMap @ClassKey(Hoge1::class) fun bindHoge1(hoge: Hoge1): Any
    @Binds @IntoMap @ClassKey(Hoge2::class) fun bindHoge2(hoge: Hoge2): Any
}

class Hoge1 @Inject constructor()
class Hoge2 @Inject constructor()

@MustBeDocumented
@Retention(AnnotationRetention.RUNTIME)
@MapKey
annotation class ClassKey(val value: KClass&amp;lt;out Any&amp;gt;)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Mapã«ã¯å½“ç„¶ã€valueã«å¯¾å¿œã™ã‚‹keyãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚Daggerã§ã¯MapKeyã‚’ä½¿ã†ã“ã¨ã§ã€valueã¨keyã‚’ç´ã¥ã‘ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ä½œã£ãŸModuleã‚’Componentã«çµ„ã¿è¾¼ã¿ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;@Component(modules = [HogeModule::class])
interface AppComponent {
    val values: Map&amp;lt;Class&amp;lt;out Any&amp;gt;, @JvmSuppressWildcards Provider&amp;lt;Any&amp;gt;&amp;gt;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ãã—ã¦ã€Applicationã§AppComponentã‚’ç”Ÿæˆã—ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;class App : Application() {
    val values: Map&amp;lt;Class&amp;lt;out Any&amp;gt;, @JvmSuppressWildcards Provider&amp;lt;Any&amp;gt;&amp;gt; by lazy {
    DaggerAppComponent.builder().build().values
    }

    inline fun &amp;lt;reified T&amp;gt; get(): T = values[T::class.java]!!.get() as T
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ãã—ã¦ã€Activityç”¨ã«æ‹¡å¼µé–¢æ•°ã‚’å®šç¾©ã—ã¦ã€&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;inline fun &amp;lt;reified T&amp;gt; Activity.inject() = lazy { get&amp;lt;T&amp;gt;() }

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å®Œæˆã§ã™!&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;class HogeActivity : AppCompatActivity {
    private val hoge: Hoge by inject()
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;ã¾ã¨ã‚&#34;&gt;ã¾ã¨ã‚&lt;/h2&gt;

&lt;p&gt;ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã®å•é¡Œç‚¹ã¯ã€ã¨ã„ã†ã‹å•é¡Œç‚¹ã—ã‹ãªã„ã‚“ã§ã™ã‘ã©ã€&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã§è½ã¡ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹

&lt;ul&gt;
&lt;li&gt;Daggerã®è‰¯ã•ã§ã‚ã‚‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³æ™‚ã®ãƒã‚§ãƒƒã‚¯ãŒæ¶ˆãˆå»ã‚‹&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Scopeã¨ã‹Subcomponentã¨ã‹ã®å¯¾å¿œæ–¹æ³•ãŒè‰¯ãåˆ†ã‹ã‚“ãªã„

&lt;ul&gt;
&lt;li&gt;ã¾ã‚ã“ã‚Œã¯è€ƒãˆã¦ã„ãªã„ã ã‘ãªã®ã§ã€ã‚‚ã—ã‹ã—ãŸã‚‰ã„ã„æ–¹æ³•ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œãªã„&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;ã„ã‚ã‚†ã‚‹Service Locatorãƒ‘ã‚¿ãƒ¼ãƒ³ã«ãªã£ã¦ã—ã¾ã„å¾®å¦™&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯ &lt;a href=&#34;https://github.com/satoshun-android-example/SimpleDaggerExample&#34;&gt;https://github.com/satoshun-android-example/SimpleDaggerExample&lt;/a&gt; ã«ã‚ã‚Šã¾ã™ã€‚ã‚ˆã‹ã£ãŸã‚‰è¦‹ã¦ãã ã•ã„ğŸ˜ƒ&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>RxAndroidã®asyncãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è©¦ã—ã¦ã¿ãŸ</title>
      <link>https://satoshun.github.io/2018/08/rx-android-async-parameter/</link>
      <pubDate>Tue, 21 Aug 2018 00:00:00 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2018/08/rx-android-async-parameter/</guid>
      <description>

&lt;p&gt;RxAndroid 2.1.0ã§æ–°ã—ãasyncãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚ã“ã‚Œã¯&lt;code&gt;Message#setAsynchronous&lt;/code&gt;ã‚’ä½¿ã†ã“ã¨ã§ã€UIã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Šã‚’ç‹™ã£ãŸæ©Ÿèƒ½ã§ã™ã€‚
ä¸‹ã®ãƒªãƒ³ã‚¯ã«è©³ç´°ãªå†…å®¹ãŒæ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://medium.com/@sweers/rxandroids-new-async-api-4ab5b3ad3e93&#34;&gt;RxAndroidâ€™s New Async API&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ã“ã®è¨˜äº‹ã§ã¯ã€asyncãŒfalseã®å ´åˆã¨trueã®å ´åˆã§ã©ã‚Œãã‚‰ã„ã®å·®ãŒå‡ºã‚‹ã‹ã‚’æ¤œè¨¼ã—ã¦ã¿ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;æ¤œè¨¼ã«ä½¿ç”¨ã—ãŸã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ä»¥ä¸‹ã«ãªã‚Šã¾ã™ã€‚
&lt;a href=&#34;https://github.com/satoshun-android-example/RxAndroidExample&#34;&gt;https://github.com/satoshun-android-example/RxAndroidExample&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‹ã„ã¤ã¾ã‚“ã§èª¬æ˜ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãš2ã¤ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ã‚’ä½œæˆã—ã€&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;private val mainScheduler = AndroidSchedulers.from(Looper.getMainLooper(), false)
private val asyncMainScheduler = AndroidSchedulers.from(Looper.getMainLooper(), true)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä½œã£ãŸã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ã‚’ä½¿ã£ãŸã‚¹ãƒˆãƒªãƒ¼ãƒ ã§å®Ÿè¡Œå®Œäº†æ™‚é–“ã«å·®ãŒå‡ºã‚‹ã‹ã‚’è©¦ã—ã¦ã¿ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;// asyncãŒfalseã®å ´åˆ
Observable
    .fromCallable { System.currentTimeMillis() }
    .delay(index, TimeUnit.MILLISECONDS)
    .observeOn(mainScheduler)
    .subscribe(...)

// asyncãŒtrueã®å ´åˆ
Observable
    .fromCallable { System.currentTimeMillis() }
    .delay(index, TimeUnit.MILLISECONDS)
    .observeOn(asyncMainScheduler)
    .subscribe(...)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ãƒ•ãƒ«ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã«ãªã‚Šã¾ã™ã€‚
&lt;a href=&#34;https://github.com/satoshun-android-example/RxAndroidExample/blob/master/app/src/main/java/com/github/satoshun/example/rxandroidexample/MainActivity.kt&#34;&gt;https://github.com/satoshun-android-example/RxAndroidExample/blob/master/app/src/main/java/com/github/satoshun/example/rxandroidexample/MainActivity.kt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;çµæœã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;// API27 ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿
main=130988ms, async=126713msã€€// forã§500å›ãƒ«ãƒ¼ãƒ—ã•ã›ãŸå®Ÿè¡Œæ™‚é–“ã®ç·å’Œ
main=130857ms, async=126582ms
main=131401ms, async=126909ms
main=130763ms, async=126504ms
main=132758ms, async=127972ms

// API21 ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿
main=129869ms, async=125795ms
main=130050ms, async=125888ms
main=129935ms, async=125853ms
main=129908ms, async=125838ms
main=129927ms, async=125824ms
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;asyncãŒtrueã®å ´åˆã€æ˜ã‚‰ã‹ã«å®Ÿè¡Œå®Œäº†æ™‚é–“ãŒçŸ­ããªã‚Šã¾ã—ãŸã€‚å°å…¥ã™ã‚‹ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚Šãã†ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ãŸã æ³¨æ„ç‚¹ã¨ã—ã¦ã€ã“ã®æ©Ÿèƒ½ã¯å‰¯ä½œç”¨ãŒã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™(ãªã®ã§ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯asyncã¯fasle)ã€‚ãŸã ã€Uberã§1å¹´é–“ã€ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã§é‹ç”¨ã—ãŸã¨ã“ã‚ã€ç‰¹ã«å¤§ããªå•é¡Œã¯èµ·ããªã‹ã£ãŸã‚‰ã—ã„ã®ã§  &lt;a href=&#34;https://github.com/ReactiveX/RxAndroid/pull/416&#34;&gt;https://github.com/ReactiveX/RxAndroid/pull/416&lt;/a&gt; ã€ã»ã¼å®‰å…¨ã¨è€ƒãˆã¦è‰¯ã•ãã†ã§ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ã¾ã¨ã‚&#34;&gt;ã¾ã¨ã‚&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã§æ¤œè¨¼ã—ãŸçµæœã€async=trueã§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®å‘ä¸ŠãŒå¾—ã‚‰ã‚Œãã†&lt;/li&gt;
&lt;li&gt;å°å…¥ã¯ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã™ã‚‹ã ã‘ãªã®ã§ã€ã¨ã¦ã‚‚ç°¡å˜&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;RxAndroidPlugins.setInitMainThreadSchedulerHandler {
    AndroidSchedulers.from(Looper.getMainLooper(), true)
}
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Android: Dagger 2.17ã®fastInitã‚’è©¦ã—ã¦ã¿ãŸ</title>
      <link>https://satoshun.github.io/2018/08/android-dagger__fastinit_mode/</link>
      <pubDate>Wed, 08 Aug 2018 00:00:00 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2018/08/android-dagger__fastinit_mode/</guid>
      <description>

&lt;p&gt;Dagge 2.17ã§fastInitã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚
&lt;a href=&#34;https://google.github.io/dagger/compiler-options&#34;&gt;https://google.github.io/dagger/compiler-options&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ã“ã‚Œã¯ã€startup timeã‚’æ”¹å–„ã™ã‚‹ãŸã‚ã®æ©Ÿèƒ½ã§ã™ã€‚ã©ã‚Œãã‚‰ã„å·®ãŒã‚ã‚‹ã‹ã‚’æ‹…å½“ã‚¢ãƒ—ãƒªã§å®Ÿéš›ã«èª¿ã¹ã¦ã¿ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ç¢ºèªã«ä½¿ç”¨ã—ãŸç«¯æœ«ã¯Android8ç³»ã®Galaxyã¨ã€Android7ç³»ã®Xperiaã®è¨ˆ2å°ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ç¢ºèªã«ä½¿ç”¨ã—ãŸã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆ&#34;&gt;ç¢ºèªã«ä½¿ç”¨ã—ãŸã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆ&lt;/h2&gt;

&lt;p&gt;adb shellã‚³ãƒãƒ³ãƒ‰ã‹ã‚‰èµ·å‹•æ™‚é–“ã‚’èª¿ã¹ã‚‹ã‚³ãƒãƒ³ãƒ‰ã§ã™ã€‚è¨ˆ11å›startup timeã‚’ç¢ºèªã™ã‚‹äº‹ãŒã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;for i in {0..10}
do
    adb shell am start -S -W jp.hoge/.ui.main.MainActivity -c android.intent.category.LAUNCHER -a android.intent.action.MAIN &amp;gt;&amp;gt; hoge.txt
    sleep 10
done
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸‹è¨˜ã‚’å‚è€ƒã«ã—ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.android.com/topic/performance/vitals/launch-time&#34;&gt;https://developer.android.com/topic/performance/vitals/launch-time&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;fastinitæœ‰åŠ¹ã®å ´åˆ&#34;&gt;fastInitæœ‰åŠ¹ã®å ´åˆ&lt;/h2&gt;

&lt;p&gt;ä¸‹è¨˜ã‚’build.gradleã«è¿½åŠ ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-groovy&#34;&gt;kapt {
    javacOptions {
        option(&amp;quot;-Adagger.fastInit=enabled&amp;quot;)
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;çµæœ:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;å¹³å‡: 1609ms
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;fastinitç„¡åŠ¹ã®å ´åˆ&#34;&gt;fastInitç„¡åŠ¹ã®å ´åˆ&lt;/h2&gt;

&lt;p&gt;çµæœ:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;å¹³å‡: 1607ms
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;ã¾ã¨ã‚&#34;&gt;ã¾ã¨ã‚&lt;/h2&gt;

&lt;p&gt;ã»ã¼å¤‰ã‚ã‚‰ãªã„æ•°å­—ãŒå‡ºã¦ãã¦ã—ã¾ã„ã¾ã—ãŸã€‚æ‚²ã—ã„ã€‚
Daggerç”Ÿæˆã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã‚‹é™ã‚Šã ã¨ã€æœ€åˆã®Componentã®createã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ComponentãŒæŒã£ã¦ã„ã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®åˆæœŸåŒ–ãŒè¡Œã‚ã‚Œã¦ã„ãªã‹ã£ãŸã®ã§ã€æ—©ããªã‚Šãã†ã ãªã¨æ€ã£ãŸã‚“ã§ã™ãŒã€å®Ÿéš›ã«ã¯ã»ã¼å¤‰ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;èŠ³ã—ããªã„çµæœã«ãªã£ãŸæ¨æ¸¬ã¨ã—ã¦&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;æ‹…å½“ã‚¢ãƒ—ãƒªã®Daggerã®æ›¸ãæ–¹ãŒæ­£ã—ããªã„ã‹ã‚‰ã“ã®çµæœã«ãªã£ãŸ?

&lt;ul&gt;
&lt;li&gt;è¦èª¿æŸ»ã€ã—ã‹ã—ä¸€èˆ¬çš„ãªAndroid-Daggerã‚’ä½¿ã£ãŸæ›¸ãæ–¹ã‚’ã—ã¦ã„ã‚‹ã®ã§æ­£ã—ã„ã¯ãš&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;ç¢ºèªã«ä½¿ç”¨ã—ãŸã‚³ãƒãƒ³ãƒ‰ãŒè‰¯ããªã„ã®ã‹ã‚‚?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ãªã«ã‹åˆ†ã‹ã£ãŸã‚‰è¿½è¨˜ã—ã¾ã™ã€ã‚‚ã—ãã¯é–“é•ã£ã¦ã„ã‚‹ç‚¹ãŒã‚ã‚Œã°ã”æŒ‡æ‘˜ã„ãŸã ã‘ã‚Œã°å¹¸ã„ã§ã™ğŸ˜Š&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Kotlin: Inline Functionã ã‘ã§ã¯ãƒ¡ã‚½ãƒƒãƒ‰ã‚«ã‚¦ãƒ³ãƒˆã¯æ¸›ã‚‰ãªã„</title>
      <link>https://satoshun.github.io/2018/08/inline_function_decrease_method_count/</link>
      <pubDate>Thu, 02 Aug 2018 00:00:00 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2018/08/inline_function_decrease_method_count/</guid>
      <description>

&lt;h2 id=&#34;çµè«–&#34;&gt;çµè«–&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;R8/Proguardã‚’ã¡ã‚ƒã‚“ã¨ä½¿ã†&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;èƒŒæ™¯&#34;&gt;èƒŒæ™¯&lt;/h2&gt;

&lt;p&gt;Inline Functionã‚’ä½¿ã†ã¨ã€é–¢æ•°ãŒã‚¤ãƒ³ãƒ©ã‚¤ãƒ³åŒ–ã•ã‚Œã‚‹ã®ã§ã€è‡ªå‹•çš„ã«ãƒ¡ã‚½ãƒƒãƒ‰æ•°ãŒ1æ¸›ã‚‹ã¨æ€ã£ã¦ã„ã¾ã—ãŸã€‚ã‘ã©ã€ãã‚“ãªã“ã¨ã¯ãªã‹ã£ãŸã¨ã„ã†è©±ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;å®Ÿéš›ã«å‹•ã‹ã—ã¦ç¢ºèªã—ã¦ã¿ã¾ã™ã€‚ä¸‹è¨˜ã®é–¢æ•°ã‚’è¿½åŠ ã—ã€Build APK â†’ Analyze APKã§classes.dexã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚«ã‚¦ãƒ³ãƒˆã‚’èª¿ã¹ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãšã¯ã€R8ç„¡ã—ã§èª¿ã¹ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;fun hoge() {
    println(&amp;quot;hogehoge&amp;quot;)
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å½“ç„¶ãƒ¡ã‚½ãƒƒãƒ‰ã‚«ã‚¦ãƒ³ãƒˆãŒ1å¢—ãˆã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;æ¬¡ã«ã€inlineã‚’ä»˜ã‘ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;inline fun hoge() {
    println(&amp;quot;hogehoge&amp;quot;)
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã¡ã‚‰ã‚‚ãƒ¡ã‚½ãƒƒãƒ‰ã‚«ã‚¦ãƒ³ãƒˆãŒ1å¢—ãˆã¾ã—ãŸã€‚
show Kotlin Bytecode â†’ Decompileã‚’ä½¿ã„ã€decompileã•ã‚ŒãŸJavaãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¦‹ã‚‹ã¨ã€inline hogeãƒ¡ã‚½ãƒƒãƒ‰ã«å¯¾å¿œã—ãŸãƒ¡ã‚½ãƒƒãƒ‰ãŒç”Ÿæˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã—ãŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;@Metadata(
    mv = {1, 1, 10},
    bv = {1, 0, 2},
    k = 2,
    d1 = {&amp;quot;\u0000\b\n\u0000\n\u0002\u0010\u0002\n\u0000\u001a\t\u0010\u0000\u001a\u00020\u0001H\u0086\bÂ¨\u0006\u0002&amp;quot;},
    d2 = {&amp;quot;hoge&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;production sources for module app&amp;quot;}
)
public final class MainActivityKt {
    public static final void hoge() {
        String var1 = &amp;quot;hogehoge&amp;quot;;
        System.out.println(var1);
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ãŸã ã—ã€ã“ã“ã§é‡è¦ãªã®ã¯ã€inlineã‚’ã¤ã‘ãŸãƒ¡ã‚½ãƒƒãƒ‰ã¯ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³åŒ–ã•ã‚Œã‚‹ãŸã‚ã€ä¸Šè¨˜ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ç”Ÿæˆã•ã‚Œã‚‹ã‘ã©ã€å®Ÿéš›ã«ã¯ã‚³ãƒ¼ãƒ«ã•ã‚Œãªã„ç‚¹ã§ã™ã€‚
ã‚³ãƒ¼ãƒ«ã•ã‚Œãªã„ã€å‚ç…§ãŒãªã„ã®ã§R8ã§å‰Šé™¤ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;å®Ÿéš›ã«R8/Proguardã‚’æœ‰åŠ¹ã«ã—ã¦Build APK â†’ Analyze APKã§ç¢ºèªã—ãŸã¨ã“ã‚ã€inlineã‚’ã¤ã‘ãŸå ´åˆã¯ãƒ¡ã‚½ãƒƒãƒ‰ã‚«ã‚¦ãƒ³ãƒˆãŒå¢—ãˆã¦ã„ãªã„ã“ã¨ãŒç¢ºèªã§ãã¾ã—ãŸã€‚&lt;/p&gt;

&lt;h2 id=&#34;ã¾ã¨ã‚&#34;&gt;ã¾ã¨ã‚&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;Inlineãƒ¡ã‚½ãƒƒãƒ‰ã¯R8/Proguardã¨çµ„ã¿åˆã‚ã›ã‚Œã°ãƒ¡ã‚½ãƒƒãƒ‰ã‚«ã‚¦ãƒ³ãƒˆã‚’æ¸›ã‚‰ã™åŠ¹æœãŒã‚ã‚‹

&lt;ul&gt;
&lt;li&gt;ã¨ã¯ã„ãˆã€5.0(ART)ã‹ã‚‰ã¯runtimeã‹ã‚‰multidexã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã®ã§ã€æ˜”ã»ã©ãƒ¡ã‚½ãƒƒãƒ‰ã‚«ã‚¦ãƒ³ãƒˆã‚’æ„è­˜ã™ã‚‹å¿…è¦ã¯ãªã„ã¨æ€ã†&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Android: ContraintLayoutã§ãƒã‚¬ãƒ†ã‚£ãƒ–ãƒãƒ¼ã‚¸ãƒ³ã‚’å®Ÿç¾ã™ã‚‹</title>
      <link>https://satoshun.github.io/2018/07/constraintlayout-negative_margin/</link>
      <pubDate>Wed, 25 Jul 2018 00:00:00 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2018/07/constraintlayout-negative_margin/</guid>
      <description>

&lt;p&gt;ConstraintLayoutã¯ãƒã‚¬ãƒ†ã‚£ãƒ–ãƒãƒ¼ã‚¸ãƒ³ã«å¯¾å¿œã—ã¦ã„ãªã„ãŸã‚ã€å°‘ã—ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚’ä½¿ã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ã“ã®è¨˜äº‹ã§ã¯&lt;a href=&#34;https://developer.android.com/reference/android/widget/Space&#34;&gt;Space&lt;/a&gt;ã‚’ä½¿ã£ãŸãƒã‚¬ãƒ†ã‚£ãƒ–ãƒãƒ¼ã‚¸ãƒ³ã®å®Ÿç¾ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ä¾‹&#34;&gt;ä¾‹&lt;/h2&gt;

&lt;p&gt;ãƒã‚¬ãƒ†ã‚£ãƒ–ãƒãƒ¼ã‚¸ãƒ³ã¨åŒç­‰ã®å¤§ãã•ã‚’æŒã£ãŸ&lt;code&gt;Space&lt;/code&gt;ã‚’å®šç¾©ã—ã¦ã€ãã“ã«Constraintã‚’è¨­å®šã™ã‚‹ã ã‘ã§ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;androidx.constraintlayout.widget.ConstraintLayout
    xmlns:android=&amp;quot;http://schemas.android.com/apk/res/android&amp;quot;
    xmlns:app=&amp;quot;http://schemas.android.com/apk/res-auto&amp;quot;
    xmlns:tools=&amp;quot;http://schemas.android.com/tools&amp;quot;
    android:layout_width=&amp;quot;match_parent&amp;quot;
    android:layout_height=&amp;quot;match_parent&amp;quot;
    android:clipToPadding=&amp;quot;false&amp;quot;
    android:padding=&amp;quot;80dp&amp;quot;&amp;gt;

  &amp;lt;Space
      android:id=&amp;quot;@+id/negative&amp;quot;
      android:layout_width=&amp;quot;15dp&amp;quot;
      android:layout_height=&amp;quot;15dp&amp;quot;
      app:layout_constraintStart_toStartOf=&amp;quot;parent&amp;quot;
      app:layout_constraintTop_toTopOf=&amp;quot;parent&amp;quot; /&amp;gt;

  &amp;lt;ImageView
      android:id=&amp;quot;@+id/icon&amp;quot;
      android:layout_width=&amp;quot;30dp&amp;quot;
      android:layout_height=&amp;quot;30dp&amp;quot;
      android:contentDescription=&amp;quot;icon&amp;quot;
      app:layout_constraintBottom_toBottomOf=&amp;quot;@id/negative&amp;quot;
      app:layout_constraintEnd_toEndOf=&amp;quot;@id/negative&amp;quot;
      tools:src=&amp;quot;@tools:sample/avatars&amp;quot; /&amp;gt;
&amp;lt;/androidx.constraintlayout.widget.ConstraintLayout&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;https://lh3.googleusercontent.com/LQrkHsAeTBvqlZWuw1Ccpm_dvrnCsdK7aH2rMB6HYakF_jv3q6Zf_-QBtfOo1eD0EjLBOjxy11nx2TAlZstr354XRiSXt7HUxENJXji8ZxWNxeJUTe8g9jIstSO1PRMsw7f8O5xuCakktrJLSUPLk01CI1N6OJ9MGMvsSbSDO6o4t7oeipkV9f7klqmzdxtoxESyDzoEI5SfeMOxynhmTGLwv6RnaASEOzVyL2xEW8eq63erAiu6ptdwl-_rQkxAnAIhYpSuPZjweCPBzf3GiMJi5gx_Ciz348GmoSaTIhuGM6grHd181fBGkZQkbvgg5ggrk5pLlja1N4eZA54n5rgzKs5gT36fA8K_ZFrAQI0H50cvAbesIeDVb05MZ2pP592Kwb8moTt6xp0TTFYrJf-c-MVljio-JvAKuUC0fPWPpdgMyxkJHW4AzK9l-Yo4f2-dUdfEf06J6ktMOsld0Yzsyu07Hki6MSGeBjU3bJ3R0vDi-W6SBUNmcDzJu5kC-2ItGmq4sN8fq06XJMSwVTmfDAyfHOluWHOTlL5LV3YVvYZxxgGJ6_ldqdD2HZ0ZW8wuNpfrHTxGLYCHR5EN5ouY5ILx-snrNAfQPQ9Z9Ph0U_4UeCMlODslXyRpueecgOSBJUhwc47xrQ04b-xOJz_01EWEA61x=w1452-h720-no&#34; alt=&#34;constraintlayout-image&#34; width=&#34;600px&#34;/&gt;&lt;/p&gt;

&lt;p&gt;ç°¡å˜ã«èª¬æ˜ã™ã‚‹ã¨ã€&lt;code&gt;Space&lt;/code&gt;ã«15pxã‚’æŒ‡å®šã—ã¦ã€bottom, endã«å¯¾ã—ã¦constraintã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€ãƒã‚¬ãƒ†ã‚£ãƒ–ãƒãƒ¼ã‚¸ãƒ³ã‚’é”æˆã—ã¦ã„ã¾ã™ã€‚
ä¸Šè¨˜ã®ä¾‹ã ã¨ã€&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;android:layout_marginStart=&amp;quot;-15px&amp;quot;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;android:layout_marginTop=&amp;quot;-15px&amp;quot;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ã¨åŒç­‰ã®æŒ¯ã‚‹èˆã„ã‚’ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ã¾ã¨ã‚&#34;&gt;ã¾ã¨ã‚&lt;/h2&gt;

&lt;p&gt;ConstraintLayoutã§ã¯ãƒã‚¤ãƒ†ã‚£ãƒ–ã§ãƒã‚¬ãƒ†ã‚£ãƒ–ãƒãƒ¼ã‚¸ãƒ³ã«å¯¾å¿œã—ã¦ã„ãªã„ãŸã‚ã€&lt;code&gt;Space&lt;/code&gt;ã‚’ä½¿ã£ãŸã€ã‚„ã‚„ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«ãªæ–¹æ³•ã§å®Ÿç¾ã™ã‚‹ã®ãŒè‰¯ã„ã¨æ€ã‚ã‚Œã¾ã™ã€‚&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Kotlin: typealiasã‚’ä½¿ã£ã¦ã‚ã‚“ã©ã†ãªã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’çœç•¥ã™ã‚‹</title>
      <link>https://satoshun.github.io/2018/07/typealias_omit_annotation/</link>
      <pubDate>Thu, 12 Jul 2018 00:00:00 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2018/07/typealias_omit_annotation/</guid>
      <description>&lt;p&gt;Kotlinã§ã¯typealiasã¨å‘¼ã°ã‚Œã‚‹ã€æ—¢å­˜ã®ã‚¿ã‚¤ãƒ—ã«å¯¾ã—ã¦åˆ¥åã‚’ã¤ã‘ã‚‹æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚
&lt;a href=&#34;https://kotlinlang.org/docs/reference/type-aliases.html&#34;&gt;https://kotlinlang.org/docs/reference/type-aliases.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;å…¸å‹çš„ãªä½¿ã„æ–¹ã¨ã—ã¦ã€ä¸‹ã®ã‚ˆã†ãªè¤‡é›‘ãªå‹ã«åå‰ã‚’ã¤ã‘ã‚‹ã¨å¯èª­æ€§ãŒé«˜ããªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;typealias MyHandler = (Int, String, Any) -&amp;gt; Unit
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã•ã‚‰ã«typealiasã¯ã€ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã¤ã‘ã‚‹ã“ã¨ã‚‚å‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;typealias NonWildcardList&amp;lt;T&amp;gt; = List&amp;lt;@JvmSuppressWildcards T&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;JvmSuppressWildcards&lt;/code&gt;ã¯Dagger(&lt;a href=&#34;https://github.com/google/dagger/issues/668&#34;&gt;å‚è€ƒãƒªãƒ³ã‚¯&lt;/a&gt;)ã‚„retrofit(&lt;a href=&#34;https://github.com/square/retrofit/issues/1805&#34;&gt;å‚è€ƒãƒªãƒ³ã‚¯&lt;/a&gt;)ã‚’ä½¿ã£ã¦ã„ã‚‹ã¨ã€ä½¿ã‚ã–ã‚‹ã‚’ãˆãªã„ã‚±ãƒ¼ã‚¹ãŒã‚ã‚‹ã®ã§ã€typealiasã§å®šç¾©ã—ã¦ã„ãŠã‘ã°å¯èª­æ€§é«˜ãã€æ¥½ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Dagger-Androidã§UserScopeã®ã‚ˆã†ãªã‚«ã‚¹ã‚¿ãƒ ã®Scopeã‚’ä½¿ã„ã€ç‰¹å®šã®Activityé–“ã®ã¿ã§åŒä¸€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½¿ã†æ–¹æ³•</title>
      <link>https://satoshun.github.io/2018/06/dagger-android-with_custom_scope/</link>
      <pubDate>Tue, 26 Jun 2018 00:00:00 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2018/06/dagger-android-with_custom_scope/</guid>
      <description>

&lt;p&gt;&lt;a href=&#34;https://github.com/google/dagger&#34;&gt;Dagger&lt;/a&gt;ã‚’ä½¿ã„ã€è¤‡æ•°ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹é–“ã§åŒä¸€ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½¿ã†æ™‚ã¯ã€ã‚¹ã‚³ãƒ¼ãƒ—ã‚’ä½¿ã†ã“ã¨ã§å®Ÿç¾ã§ãã¾ã™ã€‚
Androidã§ã¯ã€ã™ã¹ã¦ã®Activityã§å…±é€šã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½¿ã†ã«ã¯ &lt;code&gt;Singleton&lt;/code&gt;ã‚¹ã‚³ãƒ¼ãƒ—ã¨AppComponentã‚’çµ„ã¿åˆã‚ã›ã¦ä½¿ã†æ–¹æ³•ãŒã‚ˆãçŸ¥ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚
ã—ã‹ã—ã€&lt;strong&gt;ç‰¹å®š&lt;/strong&gt;ã®Activityé–“ã§ã®ã¿å…±é€šã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½¿ã„ãŸã„å ´åˆã«ã¯ã“ã®æ–¹æ³•ã¯ä½¿ãˆã¾ã›ã‚“ã€‚Singletonã ã¨&lt;strong&gt;ã™ã¹ã¦&lt;/strong&gt;ã®Activityé–“ã§å…±é€šã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒä½¿ãˆã¦ã—ã¾ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã®è¨˜äº‹ã§ã¯ã€Dagger-Androidã‚’ä½¿ã£ãŸã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’ãƒ™ãƒ¼ã‚¹ã«ã€ã€Œç‰¹å®šã®Activityé–“ã®ã¿ã§åŒä¸€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½¿ã†æ–¹æ³•ã€ã‚’èª¬æ˜ã—ã¾ã™ã€‚
ã¾ãŸã€åŸºæœ¬çš„ãªDaggerã®ä½¿ã„æ–¹ã¯çŸ¥ã£ã¦ã„ã‚‹å‰æã§èª¬æ˜ã—ã¦ã„ãã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯&lt;a href=&#34;https://github.com/satoshun-example/DaggerScopeExample&#34;&gt;ã“ã¡ã‚‰&lt;/a&gt;ã«ãªã‚Šã¾ã™ã€‚
ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã‚‹ã¨ç†è§£ãŒã‚ˆã‚Šæ·±ã¾ã‚‹ã¨æ€ã†ã®ã§ã€ãœã²ã”è¦§ã«ãªã£ã¦ãã ã•ã„ğŸ˜Š&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;ã§ã¯èª¬æ˜ã—ã¦ã„ãã¾ã™ã€‚ä»Šå›ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã®ç›®æŒ‡ã™ã¨ã“ã‚ã¯&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;UserScopeã‚’å®šç¾©ã—ã€MainActivityã€UserScopedActivityã§åŒä¸€ã®&lt;code&gt;UserManager&lt;/code&gt;ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½¿ç”¨ã™ã‚‹&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ã¨ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãšæœ€åˆã«UserScopeã‚’å®šç¾©ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;@Scope
@MustBeDocumented
@Retention(AnnotationRetention.RUNTIME)
annotation class UserScope
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ¬¡ã«UserSubcomponentã‚’ä½œã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;@UserScope
@Subcomponent
interface UserSubcomponent {
  @Subcomponent.Builder
  interface Builder {
    fun build(): UserSubcomponent
  }

  val activityInjector: DispatchingAndroidInjector&amp;lt;Activity&amp;gt;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã“ã§ã¯ã€UserSubcomponentã«&lt;code&gt;UserScope&lt;/code&gt;ã‚¹ã‚³ãƒ¼ãƒ—ã‚’æŒãŸã›ã¦ã„ã¾ã™ã€‚
ã“ã®ã‚ˆã†ã«æ›¸ãã“ã¨ã§ã€Subcomponentã¨Scopeã‚’çµã³ã¤ã‘ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;æ¬¡ã«AppComponentã‚’ä½œã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;@Singleton
@Component(
    modules = [
      AndroidSupportInjectionModule::class
    ]
)
interface AppComponent : AndroidInjector&amp;lt;App&amp;gt; {
  @Component.Builder
  interface Builder {
    @BindsInstance
    fun application(application: App): Builder

    fun build(): AppComponent
  }

  override fun inject(app: App)

  // AppComponentã¨UserSubcomponentã‚’çµã³ã¤ã‘ã‚‹
  val userComponentBuilder: UserSubcomponent.Builder
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã“ã§ã®ãƒã‚¤ãƒ³ãƒˆã¯&lt;code&gt;AppComponent&lt;/code&gt;ã«ã€&lt;code&gt;val userComponentBuilder: UserSubcomponent.Builder&lt;/code&gt;ã‚’å®šç¾©ã™ã‚‹ã“ã¨ã§ã™ã€‚
ã“ã†ã™ã‚‹ã“ã¨ã§ã€&lt;code&gt;AppComponent&lt;/code&gt;ã«&lt;code&gt;UserSubcomponent&lt;/code&gt;ã‚’çµã³ä»˜ã‘ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã‚Œã§åŸºæœ¬çš„ãªéƒ¨åˆ†ã®å®šç¾©ã¯å®Œäº†ã—ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;æ¬¡ã«ã€å„Activityã‚’Componentã«çµã³ã¤ã‘ã¦ã„ãã¾ã™ã€‚
ã‚µãƒ³ãƒ—ãƒ«ã§ã¯MainActivityã€UserScopedActivityã¨NoUserScopedActivityã®3ã¤ã®Activityã‚’å®šç¾©ã—ã¦ãŠã‚Šã€
ãã‚Œãã‚Œã®Activityã¯ä»¥ä¸‹ã®ã‚ˆã†ã«æŒ¯ã‚‹èˆã‚ã›ãŸã„ã¨ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;MainActivityã€UserScopedActivityã¯UserScopeã«å¾“ã„ã€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å…±é€šã§ä½¿ã„ãŸã„&lt;/li&gt;
&lt;li&gt;NoUserScopedActivityã¯UserScopeã«å¾“ã‚ãªã„ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ã—ãŸã„&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;mainactivity-userscopedactivityã‚’usersubcomponentã«å¾“ã‚ã›ã‚‹&#34;&gt;MainActivityã€UserScopedActivityã‚’UserSubcomponentã«å¾“ã‚ã›ã‚‹&lt;/h2&gt;

&lt;p&gt;MainActivityã€UserScopedActivityã‚’&lt;code&gt;UserSubcomponent&lt;/code&gt;ã«å®šç¾©ã™ã‚‹ã“ã¨ã§ã€MainActivityã€UserScopedActivityã‚’&lt;code&gt;UserScope&lt;/code&gt;ã«å¾“ã‚ã›ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
ãªãœãªã‚‰ã€&lt;code&gt;UserSubcomponent&lt;/code&gt;ã¯&lt;code&gt;UserScope&lt;/code&gt;ã«ç´ä»˜ã„ã¦ã„ã‚‹ãŸã‚ã§ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;// UserSubcomponent.kt
@UserScope
@Subcomponent(modules = [
  MainActivityModule::class,
  UserScopedActivityModule::class
])
interface UserSubcomponent {
  @Subcomponent.Builder
  interface Builder {
    fun build(): UserSubcomponent
  }

  val activityInjector: DispatchingAndroidInjector&amp;lt;Activity&amp;gt;
}

// MainActivityModule.kt
@Module
interface MainActivityModule {
  @ContributesAndroidInjector
  fun contributeMainActivity(): MainActivity
}

// UserScopedActivityModule.kt
@Module
interface UserScopedActivityModule {
  @ContributesAndroidInjector
  fun contributeUserScopedActivity(): UserScopedActivity
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;nouserscopedactivityã¯userscopeã«å¾“ã‚ãªã„&#34;&gt;NoUserScopedActivityã¯UserScopeã«å¾“ã‚ãªã„&lt;/h2&gt;

&lt;p&gt;NoUserScopedActivityã‚’&lt;code&gt;AppComponent&lt;/code&gt;ã«å®šç¾©ã™ã‚‹ã“ã¨ã§ã€NoUserScopedActivityã§&lt;code&gt;UserScope&lt;/code&gt;ã‚’ä½¿ã£ã¦ã„ãŸã‚‰ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
&lt;code&gt;AppComponent&lt;/code&gt;ã¯&lt;code&gt;UserScope&lt;/code&gt;ã«ç´ä»˜ã„ã¦ã„ãªã„ãŸã‚ã§ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;// AppComponent.kt
@Singleton
@Component(
    modules = [
      AndroidSupportInjectionModule::class,
      NoUserScopedActivityModule::class
    ]
)
interface AppComponent : AndroidInjector&amp;lt;App&amp;gt; {
  @Component.Builder
  interface Builder {
    @BindsInstance
    fun application(application: App): Builder

    fun build(): AppComponent
  }

  override fun inject(app: App)

  val userComponentBuilder: UserSubcomponent.Builder
}

// NoUserScopedActivityModule.kt
@Module
interface NoUserScopedActivityModule {
  @ContributesAndroidInjector
  fun contributeNoUserScopedActivity(): NoUserScopedActivity
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã‚Œã§ã€å®šç¾©ã¯å®Œäº†ã§ã™ã€‚å®Ÿéš›ã«æ­£ã—ãå‹•ãã‹ã‚’ç¢ºèªã—ã¦ã¿ã¾ã™ã€‚
é©å½“ã«&lt;code&gt;UserScope&lt;/code&gt;ã«å¾“ã†&lt;code&gt;UserManager&lt;/code&gt;ã‚’å®šç¾©ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;// UserManager.kt
@UserScope
class UserManager @Inject constructor() {
  var value = 100
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã‚Œã¯&lt;code&gt;UserScope&lt;/code&gt;ã«å¾“ã†ã®ã§ã€MainActivityã€UserScopedActivityã«ã¯æœŸå¾…é€šã‚ŠåŒä¸€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒ&lt;code&gt;Inject&lt;/code&gt;ã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;// MainActivity.kt
class MainActivity : AppCompatActivity() {

  // ok
  @Inject lateinit var userManager: UserManager

  ...
}
// UserScopedActivity.kt
class UserScopedActivity : AppCompatActivity() {

  // ok: MainActivityã¨åŒã˜ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒæ³¨å…¥ã•ã‚Œã‚‹
  @Inject lateinit var userManager: UserManager

  ...
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã—ã‹ã—ã€NoUserScopedActivityã«&lt;code&gt;Inject&lt;/code&gt;ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;// NoUserScopedActivity.kt
class NoUserScopedActivity : AppCompatActivity() {

  //  ä¸‹ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã‚’å–ã‚‹ã¨ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼
  //  @Inject lateinit var userManager: UserManager
  ...
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;NoUserScopedActivityã‚’&lt;code&gt;UserScope&lt;/code&gt;ã«å¾“ã†å½¢ã§å®šç¾©ã—ã¦ãªã„ãŸã‚ã§ã™ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;MainActivityã€UserScopedActivityã¯UserScopeã«å¾“ã„ã€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å…±é€šã§ä½¿ã„ãŸã„&lt;/li&gt;
&lt;li&gt;NoUserScopedActivityã¯UserScopeã«å¾“ã‚ãªã„ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ã—ãŸã„&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ãŒé”æˆã§ãã¾ã—ãŸã€‚&lt;/p&gt;

&lt;h2 id=&#34;ä½™è«‡&#34;&gt;ä½™è«‡&lt;/h2&gt;

&lt;p&gt;ãã‚‚ãã‚‚ã€&lt;code&gt;ContributesAndroidInjector&lt;/code&gt;å®šç¾©æ™‚ã«ã€&lt;code&gt;UserScope&lt;/code&gt;ã‚¹ã‚³ãƒ¼ãƒ—ã‚’ä»˜ä¸ã—ã¦ã‚ã’ã‚Œã°ã„ã„ã‚“ã˜ã‚ƒãªã„ã‹ã¨æ€ã†ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;// MainActivityModule.kt
@Module
interface MainActivityModule {
  @UserScope
  @ContributesAndroidInjector
  fun contributeMainActivity(): MainActivity
}

// UserScopedActivityModule.kt
@Module
interface UserScopedActivityModule {
  @UserScope
  @ContributesAndroidInjector
  fun contributeUserScopedActivity(): UserScopedActivity
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã®ã‚„ã‚Šæ–¹ã ã¨ã€ä»Šå›ã®ã‚±ãƒ¼ã‚¹ã«ã¯ä¸éƒ½åˆã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;MainActivityã€UserScopedActivityã¯&lt;code&gt;UserScope&lt;/code&gt;ã«å¾“ã†ã®ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã¯é€šã‚Šã¾ã™ã€‚
ã—ã‹ã—ã€MainActivityã€UserScopedActivityã§åŒä¸€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½¿ã†ã“ã¨ã¯å‡ºæ¥ã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;p&gt;ä½•æ•…ã‹ã¨è¨€ã†ã¨ã€&lt;code&gt;ContributesAndroidInjector&lt;/code&gt;ã¯Subcomponentã‚’ä½œã‚‹ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ã‚·ãƒ¥ã‚¬ãƒ¼ã®ã‚ˆã†ãªã‚‚ã®ã§ã™ãŒã€
&lt;code&gt;MainActivityModule&lt;/code&gt;ã¨&lt;code&gt;UserScopedActivityModule&lt;/code&gt;ã¯ãã‚Œãã‚Œç‹¬ç«‹ã—ãŸSubcomponentã‚’ä½œã‚‹ã®ã§ã€ç‹¬ç«‹ã—ãŸComponenté–“ã§åŒä¸€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½¿ã†ã“ã¨ãŒå‡ºæ¥ãªã„ãŸã‚ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ä»Šå›ã®ã‚ˆã†ã«ã€&lt;code&gt;UserSubcomponent&lt;/code&gt;ã‚’å®šç¾©ã—ã¦ã€ãã®Componentã‚’ãƒ™ãƒ¼ã‚¹ã«æ‰€å±ã•ã›ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ã¾ã¨ã‚&#34;&gt;ã¾ã¨ã‚&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;ç‰¹å®šã®Activityã®ã¿ã§å…±é€šã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½¿ã„ãŸã„ã¨ãã¯ã€çµæ§‹ã‚ã‚“ã©ã†

&lt;ul&gt;
&lt;li&gt;å†—é•·ãªæ°—ãŒã™ã‚‹ã®ã§ã€ã‚‚ã£ã¨ã„ã„æ–¹æ³•ãŒã‚ã£ãŸã‚‰æ•™ãˆã¦ãã ã•ã„ğŸ˜‹&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ContributesAndroidInjector&lt;/code&gt;ãŒã©ã†ã„ã†å‹•ä½œã‚’ã™ã‚‹ã®ã‹ã‚’çŸ¥ã£ã¦ãŠãã¨ã€ã„ã–ã¨ã„ã†ã¨ãã«ä¾¿åˆ©&lt;/li&gt;
&lt;li&gt;ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯&lt;a href=&#34;https://github.com/satoshun-example/DaggerScopeExample&#34;&gt;ã“ã¡ã‚‰&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
  </channel>
</rss>