<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
      <title>stsnãƒ–ãƒ­ã‚°</title>
      <generator uri="https://hugo.spf13.com">Hugo</generator>
    <link>https://satoshun.github.io/</link>
    <language>ja</language>
    <author>Sato Shun</author>
    <copyright>2018 Sato Shun</copyright>
    <updated>Tue, 16 Oct 2018 00:00:00 UTC</updated>
    
    
    <item>
      <title>Kotlinã§3ã¤ã®é–¢æ•°ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’çœç•¥ã™ã‚‹</title>
      <link>https://satoshun.github.io/2018/10/kotlin-decrease-function_params/</link>
      <pubDate>Tue, 16 Oct 2018 00:00:00 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2018/10/kotlin-decrease-function_params/</guid>
      <description>

&lt;p&gt;Kotlinã§ã¯æ‹¡å¼µé–¢æ•°ãŒå®šç¾©ã•ã‚Œã¦ãŠã‚Šã€æ‹¡å¼µé–¢æ•°ã‚’ä½¿ã†ã“ã¨ã§1ã¤é–¢æ•°ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’çœç•¥ã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;fun hoge(a: String) {
  println(a)
}

-&amp;gt;

fun String.hoge() {
  println(this)
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ¬¡ã«ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆã‚¯ãƒ©ã‚¹ï¼‰å†…ã§æ‹¡å¼µé–¢æ•°ã‚’å®šç¾©ã™ã‚‹ã“ã¨ã§ã€ã•ã‚‰ã«1ã¤ã®é–¢æ•°ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’çœç•¥ã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;interface User

fun hoge(a: String, b: User) {
  println(a)
  println(b)
}

-&amp;gt;

interface User {
  fun String.hoge() {
    println(this)
    println(this@User)
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã•ã‚‰ã«ã€reified type parameterã‚’ä½¿ã†ã“ã¨ã§ã€é–¢æ•°ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’çœç•¥ã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;fun &amp;lt;T&amp;gt; hoge(a: String, b: User, c: Class&amp;lt;T&amp;gt;) {
  println(a)
  println(b)
  println(c)
}

-&amp;gt;

class User {
  inline fun &amp;lt;reified T&amp;gt; String.hoge() {
    println(this)
    println(this@User)
    println(T::class)
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;interfaceã ã¨ã€inlineé–¢æ•°ãŒä½¿ãˆãªã„ã®ã§ã‚¯ãƒ©ã‚¹ã§å®šç¾©ã—ã¦ã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ã¾ã¨ã‚&#34;&gt;ã¾ã¨ã‚&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;Kotlinã®æ‹¡å¼µé–¢æ•°ã€reifiedä¾¿åˆ©ğŸ˜Š&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Unitãƒ†ã‚¹ãƒˆã§ViewModelã®onClearedã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹</title>
      <link>https://satoshun.github.io/2018/10/unittest-viewodel_oncleared/</link>
      <pubDate>Sun, 14 Oct 2018 00:00:00 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2018/10/unittest-viewodel_oncleared/</guid>
      <description>

&lt;p&gt;ãµã¨AACã®&lt;a href=&#34;https://developer.android.com/reference/androidx/lifecycle/ViewModel&#34;&gt;ViewModel&lt;/a&gt;ã®onClearedãƒ¡ã‚½ãƒƒãƒ‰ã‚’ãƒ†ã‚¹ãƒˆã—ãŸããªã£ãŸã®ã§ã€ 2ã¤ã®ã‚„ã‚Šã‹ãŸã‚’ç´¹ä»‹ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ç’°å¢ƒã¯&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;quot;junit:junit:4.12&amp;quot;
&amp;quot;androidx.test:rules:1.1.0-beta02&amp;quot;
&amp;quot;androidx.test:runner:1.1.0-beta02&amp;quot;
&amp;quot;androidx.test.ext:junit:1.0.0-beta02&amp;quot;
&amp;quot;com.nhaarman:mockito-kotlin-kt1.1:1.5.0&amp;quot;
&amp;quot;org.robolectric:robolectric:4.0-beta-1&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãŸã€ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯ &lt;a href=&#34;https://github.com/satoshun-android-example/Tests/blob/master/app/src/test/java/com/github/satoshun/example/architectures/BaseViewModelTest.kt&#34;&gt;GitHub&lt;/a&gt;ã«ã‚ã‚‹ã®ã§ã€å‚è€ƒã—ã¦ãã ã•ã„ğŸ˜Š&lt;/p&gt;

&lt;h3 id=&#34;1-viewmodelstore-ã‚’ä½¿ã†&#34;&gt;1. &lt;code&gt;ViewModelStore&lt;/code&gt;ã‚’ä½¿ã†&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;ViewModelProviders.of(activity).get(class)&lt;/code&gt;ã‹ã‚‰ViewModelã‚’å–å¾—ã—ãŸã¨ãã«ã€å–å¾—ã—ãŸViewModelã¯&lt;a href=&#34;https://developer.android.com/reference/androidx/lifecycle/ViewModelStore&#34;&gt;ViewModelStore&lt;/a&gt;ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã¾ã™ã€‚ã“ã®ViewModelStoreã¯FragmentActivityã‹ã‚‰å–å¾—ã§ãã‚‹ã®ã§ã€æ¬¡ã®ã‚ˆã†ã«æ›¸ãã“ã¨ã§ViewModelã®onClearedã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;@RunWith(AndroidJUnit4::class)
class BaseViewModelTest {
  @get:Rule val activityRule = ActivityTestRule(FragmentActivity::class.java)

  @Test
  fun `dispose a coroutine when finished lifecycle of ViewModel`() {
    activityRule.activity.viewModelStore.clear() // ViewModelãŒé–‹æ”¾ã•ã‚Œã‚‹
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã®ãƒ†ã‚¹ãƒˆã¯ã‚³ãƒ¼ãƒ‰çš„ã«ã¯ç°¡å˜ã§ã™ãŒã€ViewModelStoreãŒViewModelã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚’ç®¡ç†ã—ã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ã‚’çŸ¥ã£ã¦ã„ã‚‹ã€å†…éƒ¨å®Ÿè£…ã®è©³ç´°ã¾ã§çŸ¥ã£ã¦ã„ã‚‹ãŸã‚ã€ãƒ†ã‚¹ãƒˆã¨ã—ã¦ãµã•ã‚ã—ããªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ãªã®ã§ã€ç´ ç›´ã«onDestroyã‚’ã‚³ãƒ¼ãƒ«ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚‚æ›¸ã„ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;

&lt;h3 id=&#34;2-instrumentation-callactivityondestroy-ã‚’ä½¿ã†&#34;&gt;2. &lt;code&gt;Instrumentation.callActivityOnDestroy&lt;/code&gt;ã‚’ä½¿ã†&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;Instrumentation&lt;/code&gt;ã‚¯ãƒ©ã‚¹ã‚’ä½¿ã†ã“ã¨ã§Activityã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
&lt;code&gt;Instrumentation&lt;/code&gt;ã¯&lt;code&gt;InstrumentationRegistry&lt;/code&gt;ã‚¯ãƒ©ã‚¹ã‹ã‚‰å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã€æ¬¡ã®ã‚ˆã†ã«æ›¸ãã“ã¨ã§ã€&lt;code&gt;onDestroy&lt;/code&gt;ã‚’ã‚³ãƒ¼ãƒ«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;@Test
fun `dispose a coroutine when finished lifecycle of ViewModel 2`() {
  // onDestroyãŒã‚³ãƒ¼ãƒ«ã•ã‚ŒViewModelãŒé–‹æ”¾ã•ã‚Œã‚‹
  InstrumentationRegistry.getInstrumentation().callActivityOnDestroy(activityRule.activity)
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã‚Œã§ã€Unitãƒ†ã‚¹ãƒˆã§&lt;code&gt;ViewModel.onCleared&lt;/code&gt;ã®ãƒ†ã‚¹ãƒˆã‚’ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ä»¥ä¸Šã§ã™ã€‚Happy Testingâ˜†å½¡&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/satoshun-android-example/Tests/blob/master/app/src/test/java/com/github/satoshun/example/architectures/BaseViewModelTest.kt&#34;&gt;ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Inline classesã¨Gsonã§primitiveå‹ã‚’ã‚¯ãƒ©ã‚¹ã§å—ã‘ã¨ã‚‹</title>
      <link>https://satoshun.github.io/2018/09/android-gson-inlineclasses/</link>
      <pubDate>Mon, 17 Sep 2018 00:00:00 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2018/09/android-gson-inlineclasses/</guid>
      <description>&lt;p&gt;ï¼ˆã“ã®è¨˜äº‹ã¯1.3-M2ã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚ï¼‰&lt;/p&gt;

&lt;p&gt;Kotlin 1.3ã§Inline classesãŒå…¥ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«å½±éŸ¿ã‚’ä¸ãˆãšã«ã€å€¤ã®ãƒ©ãƒƒãƒ‘ãƒ¼ã‚¯ãƒ©ã‚¹ã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ä¾‹ãˆã°ã€æ¬¡ã®ã‚ˆã†ã«æ›¸ãã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;inline class UserId(val id: String) {
    val url get() = &amp;quot;http://$id&amp;quot;
}

val userId = UserId(&amp;quot;user-dayo&amp;quot;)
println(userId.url)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ä¸€è¦‹ã€UserIdã‚¯ãƒ©ã‚¹ãŒç”Ÿæˆã•ã‚Œãã†ã§ã™ã€‚ã—ã‹ã—ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã§ã¯UserIdã‚¯ãƒ©ã‚¹ã¯ç”Ÿæˆã•ã‚Œã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public static final class UserId$Erased {
    ...

    @NotNull
    public static final String getUrl(String $this) {
        return &amp;quot;http://&amp;quot; + $this;
    }

    ...
}

String userId = &amp;quot;user-dayo&amp;quot;;
String var1 = UserId$Erased.getUrl(userId);
System.out.println(var1);
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;UserIdã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œã‚‰ãšã«ã€Stringã‚’ãã®ã¾ã¾ä½¿ã£ã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚ãã—ã¦è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸ&lt;code&gt;UserId$Erased&lt;/code&gt;ã‚¯ãƒ©ã‚¹ã«ã‚ã‚‹staticãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã„ã¾ã™ã€‚Inline classesã§ã¯ã€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã›ãšã«staticãƒ¡ã‚½ãƒƒãƒ‰ã‚’ã‚³ãƒ¼ãƒ«ã™ã‚‹ã“ã¨ã§ã€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ç”Ÿæˆã®ã‚³ã‚¹ãƒˆã‚’æŠ‘ãˆã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã“ã‹ã‚‰ãŒæœ¬é¡Œã§ã™ã€‚
Inline classesãŒAndroidé–‹ç™ºã®ã©ã“ã§å½¹ç«‹ã¤ã®ã‹ã‚’è€ƒãˆãŸã¨ãã«ã€ Gsonãªã©ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã‚ˆã£ã¦deserialize/serializeã•ã‚Œã‚‹ã‚¯ãƒ©ã‚¹ã§æœ‰åŠ¹ä½¿ãˆã‚‹ã¨æ€ã„ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ä¾‹ãˆã°ã€æ¬¡ã®ã‚³ãƒ¼ãƒ‰ãŒã‚ã£ãŸã¨ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;data class Response(
    @SerializedName(&amp;quot;user_id&amp;quot;) val userId: String,
    @SerializedName(&amp;quot;friend_id&amp;quot;) val friendId: String
)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã‚Œã¯userIdã¨friendIdã‚’Stringã§å—ã‘å–ã£ã¦ãŠã‚Šã€ã“ã®StringãŒä½•ã®Stringã‹ã®æƒ…å ±ãŒæ¬ è½ã—ã¦ã„ã¾ã™ã€‚å‹ã«ã‚ˆã‚‹åˆ†é¡ãŒå‡ºæ¥ã¦ãªã„çŠ¶æ…‹ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã‚Œã«Inline classesã‚’ä½¿ã£ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;inline class UserId(private val id: String) {
    val url get() = &amp;quot;http://my/$id&amp;quot;
}

inline class FriendId(private val id: String) {
    val url get() = &amp;quot;http://friend/$id&amp;quot;
}

data class Response(
    @SerializedName(&amp;quot;user_id&amp;quot;) val userId: UserId,
    @SerializedName(&amp;quot;friend_id&amp;quot;) val friendId: FriendId
)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;UserIdã¨FriendIdã‚¯ãƒ©ã‚¹ã§å—ã‘å–ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚Inline classesãŒã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã•ã‚Œã‚‹ã¨ã€wrapã•ã‚ŒãŸå€¤ã®å‹ãŒå±•é–‹ã•ã‚Œã‚‹ãŸã‚ã§ã™ã€‚UserIdã€FriendIdã®wrapã•ã‚ŒãŸå€¤ã¯Stringãªã®ã§ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«å¾Œã¯StringãŒå±•é–‹ã•ã‚Œã€Stringã§deserialize/serializeã•ã‚Œã¾ã™ã€‚ã—ã‹ã—ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã•ã‚Œã‚‹å‰ã¾ã§ã¯å‹å®‰å…¨ã®æ©æµã‚’å—ã‘å–ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;Inline classesã‚’ä½¿ãˆã°ã€Adapterã‚’ä½œæˆã™ã‚‹ã“ã¨ãªãã€ã‚«ã‚¹ã‚¿ãƒ ã®ã‚¯ãƒ©ã‚¹ã§å—ã‘å–ã‚Œã‚‹ãŸã‚éå¸¸ã«ä¾¿åˆ©ã§ã™(ãƒ»oãƒ»)&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Daggerã§private valã§ä¾å­˜é–¢ä¿‚ã‚’å–å¾—ã—ãŸã‹ã£ãŸ</title>
      <link>https://satoshun.github.io/2018/09/android-dagger-simple-example/</link>
      <pubDate>Fri, 07 Sep 2018 00:00:00 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2018/09/android-dagger-simple-example/</guid>
      <description>

&lt;p&gt;ã¿ãªã•ã‚“ã“ã‚“ã«ã¡ã¯&lt;/p&gt;

&lt;p&gt;ä»Šå›ã¯Daggerã®è©±ã‚’ã—ã¾ã™ã€‚Dagger + Kotlinã®1ã¤æ°—ã«ãªã‚‹ç‚¹ã¨ã—ã¦&lt;code&gt;@Inject lateinit var&lt;/code&gt; ã«ãªã£ã¦ã—ã¾ã†ã¨ã“ã‚ãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;class HogeActivity {
    @Inject lateinit var hoge: Hoge
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã‚Œã‚’ãªã‚“ã¨ã‹å‡ºæ¥ãªã„ã‹ãªã¨æ€ã£ã¦è€ƒãˆã¦ã¿ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;çµè«–ã‹ã‚‰è¨€ã†ã¨æœ€çµ‚å½¢ã¯ã“ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;class HogeActivity {
    private val hoge: Hoge by inject()
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;private valã«ãªã‚Šã¾ã—ãŸã€‚ã“ã‚Œã‚’ã©ã®ã‚ˆã†ã«å®Ÿç¾ã—ãŸã‹ã«ã¤ã„ã¦èª¬æ˜ã—ã¦ãã¾ã™ã€‚ã¡ãªã¿ã«ã§ã™ãŒã€ã“ã‚Œã¯ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã«è€ãˆã‚Œã‚‹ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã”äº†æ‰¿ãã ã•ã„ã€‚&lt;/p&gt;

&lt;p&gt;ä»Šå›ã¯&lt;code&gt;IntoMap&lt;/code&gt;ã‚’ä½¿ã£ã¦å®Ÿè£…ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;IntoMap&lt;/code&gt;ã¨ã¯ãã®åã®é€šã‚ŠMapã«ãƒã‚¤ãƒ³ãƒ‰ã™ã‚‹ãŸã‚ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚
è©³ã—ãã¯&lt;a href=&#34;https://google.github.io/dagger/multibindings.html&#34;&gt;ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ&lt;/a&gt;ã‚’è¦‹ã¦ãã ã•ã„ã€‚&lt;/p&gt;

&lt;p&gt;ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã§èª¬æ˜ã—ã¦ã„ãã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãšã¯IntoMapã‚’ä½¿ã„ã€Mapã¸ã®ãƒã‚¤ãƒ³ãƒ‰ã‚’Moduleã«å®šç¾©ã—ã¦ã„ãã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;@Module
interface HogeModule {
    @Binds @IntoMap @ClassKey(Hoge1::class) fun bindHoge1(hoge: Hoge1): Any
    @Binds @IntoMap @ClassKey(Hoge2::class) fun bindHoge2(hoge: Hoge2): Any
}

class Hoge1 @Inject constructor()
class Hoge2 @Inject constructor()

@MustBeDocumented
@Retention(AnnotationRetention.RUNTIME)
@MapKey
annotation class ClassKey(val value: KClass&amp;lt;out Any&amp;gt;)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Mapã«ã¯å½“ç„¶ã€valueã«å¯¾å¿œã™ã‚‹keyãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚Daggerã§ã¯MapKeyã‚’ä½¿ã†ã“ã¨ã§ã€valueã¨keyã‚’ç´ã¥ã‘ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ä½œã£ãŸModuleã‚’Componentã«çµ„ã¿è¾¼ã¿ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;@Component(modules = [HogeModule::class])
interface AppComponent {
    val values: Map&amp;lt;Class&amp;lt;out Any&amp;gt;, @JvmSuppressWildcards Provider&amp;lt;Any&amp;gt;&amp;gt;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ãã—ã¦ã€Applicationã§AppComponentã‚’ç”Ÿæˆã—ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;class App : Application() {
    val values: Map&amp;lt;Class&amp;lt;out Any&amp;gt;, @JvmSuppressWildcards Provider&amp;lt;Any&amp;gt;&amp;gt; by lazy {
    DaggerAppComponent.builder().build().values
    }

    inline fun &amp;lt;reified T&amp;gt; get(): T = values[T::class.java]!!.get() as T
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ãã—ã¦ã€Activityç”¨ã«æ‹¡å¼µé–¢æ•°ã‚’å®šç¾©ã—ã¦ã€&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;inline fun &amp;lt;reified T&amp;gt; Activity.inject() = lazy { get&amp;lt;T&amp;gt;() }

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å®Œæˆã§ã™!&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;class HogeActivity : AppCompatActivity {
    private val hoge: Hoge by inject()
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;ã¾ã¨ã‚&#34;&gt;ã¾ã¨ã‚&lt;/h2&gt;

&lt;p&gt;ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã®å•é¡Œç‚¹ã¯ã€ã¨ã„ã†ã‹å•é¡Œç‚¹ã—ã‹ãªã„ã‚“ã§ã™ã‘ã©ã€&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã§è½ã¡ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹

&lt;ul&gt;
&lt;li&gt;Daggerã®è‰¯ã•ã§ã‚ã‚‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³æ™‚ã®ãƒã‚§ãƒƒã‚¯ãŒæ¶ˆãˆå»ã‚‹&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Scopeã¨ã‹Subcomponentã¨ã‹ã®å¯¾å¿œæ–¹æ³•ãŒè‰¯ãåˆ†ã‹ã‚“ãªã„

&lt;ul&gt;
&lt;li&gt;ã¾ã‚ã“ã‚Œã¯è€ƒãˆã¦ã„ãªã„ã ã‘ãªã®ã§ã€ã‚‚ã—ã‹ã—ãŸã‚‰ã„ã„æ–¹æ³•ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œãªã„&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;ã„ã‚ã‚†ã‚‹Service Locatorãƒ‘ã‚¿ãƒ¼ãƒ³ã«ãªã£ã¦ã—ã¾ã„å¾®å¦™&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯ &lt;a href=&#34;https://github.com/satoshun-android-example/SimpleDaggerExample&#34;&gt;https://github.com/satoshun-android-example/SimpleDaggerExample&lt;/a&gt; ã«ã‚ã‚Šã¾ã™ã€‚ã‚ˆã‹ã£ãŸã‚‰è¦‹ã¦ãã ã•ã„ğŸ˜ƒ&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>RxAndroidã®asyncãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è©¦ã—ã¦ã¿ãŸ</title>
      <link>https://satoshun.github.io/2018/08/rx-android-async-parameter/</link>
      <pubDate>Tue, 21 Aug 2018 00:00:00 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2018/08/rx-android-async-parameter/</guid>
      <description>

&lt;p&gt;RxAndroid 2.1.0ã§æ–°ã—ãasyncãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚ã“ã‚Œã¯&lt;code&gt;Message#setAsynchronous&lt;/code&gt;ã‚’ä½¿ã†ã“ã¨ã§ã€UIã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Šã‚’ç‹™ã£ãŸæ©Ÿèƒ½ã§ã™ã€‚
ä¸‹ã®ãƒªãƒ³ã‚¯ã«è©³ç´°ãªå†…å®¹ãŒæ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://medium.com/@sweers/rxandroids-new-async-api-4ab5b3ad3e93&#34;&gt;RxAndroidâ€™s New Async API&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ã“ã®è¨˜äº‹ã§ã¯ã€asyncãŒfalseã®å ´åˆã¨trueã®å ´åˆã§ã©ã‚Œãã‚‰ã„ã®å·®ãŒå‡ºã‚‹ã‹ã‚’æ¤œè¨¼ã—ã¦ã¿ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;æ¤œè¨¼ã«ä½¿ç”¨ã—ãŸã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ä»¥ä¸‹ã«ãªã‚Šã¾ã™ã€‚
&lt;a href=&#34;https://github.com/satoshun-android-example/RxAndroidExample&#34;&gt;https://github.com/satoshun-android-example/RxAndroidExample&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‹ã„ã¤ã¾ã‚“ã§èª¬æ˜ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãš2ã¤ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ã‚’ä½œæˆã—ã€&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;private val mainScheduler = AndroidSchedulers.from(Looper.getMainLooper(), false)
private val asyncMainScheduler = AndroidSchedulers.from(Looper.getMainLooper(), true)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä½œã£ãŸã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ã‚’ä½¿ã£ãŸã‚¹ãƒˆãƒªãƒ¼ãƒ ã§å®Ÿè¡Œå®Œäº†æ™‚é–“ã«å·®ãŒå‡ºã‚‹ã‹ã‚’è©¦ã—ã¦ã¿ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;// asyncãŒfalseã®å ´åˆ
Observable
    .fromCallable { System.currentTimeMillis() }
    .delay(index, TimeUnit.MILLISECONDS)
    .observeOn(mainScheduler)
    .subscribe(...)

// asyncãŒtrueã®å ´åˆ
Observable
    .fromCallable { System.currentTimeMillis() }
    .delay(index, TimeUnit.MILLISECONDS)
    .observeOn(asyncMainScheduler)
    .subscribe(...)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ãƒ•ãƒ«ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã«ãªã‚Šã¾ã™ã€‚
&lt;a href=&#34;https://github.com/satoshun-android-example/RxAndroidExample/blob/master/app/src/main/java/com/github/satoshun/example/rxandroidexample/MainActivity.kt&#34;&gt;https://github.com/satoshun-android-example/RxAndroidExample/blob/master/app/src/main/java/com/github/satoshun/example/rxandroidexample/MainActivity.kt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;çµæœã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;// API27 ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿
main=130988ms, async=126713msã€€// forã§500å›ãƒ«ãƒ¼ãƒ—ã•ã›ãŸå®Ÿè¡Œæ™‚é–“ã®ç·å’Œ
main=130857ms, async=126582ms
main=131401ms, async=126909ms
main=130763ms, async=126504ms
main=132758ms, async=127972ms

// API21 ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿
main=129869ms, async=125795ms
main=130050ms, async=125888ms
main=129935ms, async=125853ms
main=129908ms, async=125838ms
main=129927ms, async=125824ms
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;asyncãŒtrueã®å ´åˆã€æ˜ã‚‰ã‹ã«å®Ÿè¡Œå®Œäº†æ™‚é–“ãŒçŸ­ããªã‚Šã¾ã—ãŸã€‚å°å…¥ã™ã‚‹ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚Šãã†ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ãŸã æ³¨æ„ç‚¹ã¨ã—ã¦ã€ã“ã®æ©Ÿèƒ½ã¯å‰¯ä½œç”¨ãŒã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™(ãªã®ã§ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯asyncã¯fasle)ã€‚ãŸã ã€Uberã§1å¹´é–“ã€ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã§é‹ç”¨ã—ãŸã¨ã“ã‚ã€ç‰¹ã«å¤§ããªå•é¡Œã¯èµ·ããªã‹ã£ãŸã‚‰ã—ã„ã®ã§  &lt;a href=&#34;https://github.com/ReactiveX/RxAndroid/pull/416&#34;&gt;https://github.com/ReactiveX/RxAndroid/pull/416&lt;/a&gt; ã€ã»ã¼å®‰å…¨ã¨è€ƒãˆã¦è‰¯ã•ãã†ã§ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ã¾ã¨ã‚&#34;&gt;ã¾ã¨ã‚&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã§æ¤œè¨¼ã—ãŸçµæœã€async=trueã§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®å‘ä¸ŠãŒå¾—ã‚‰ã‚Œãã†&lt;/li&gt;
&lt;li&gt;å°å…¥ã¯ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã™ã‚‹ã ã‘ãªã®ã§ã€ã¨ã¦ã‚‚ç°¡å˜&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;RxAndroidPlugins.setInitMainThreadSchedulerHandler {
    AndroidSchedulers.from(Looper.getMainLooper(), true)
}
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Android: Dagger 2.17ã®fastInitã‚’è©¦ã—ã¦ã¿ãŸ</title>
      <link>https://satoshun.github.io/2018/08/android-dagger__fastinit_mode/</link>
      <pubDate>Wed, 08 Aug 2018 00:00:00 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2018/08/android-dagger__fastinit_mode/</guid>
      <description>

&lt;p&gt;Dagge 2.17ã§fastInitã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚
&lt;a href=&#34;https://google.github.io/dagger/compiler-options&#34;&gt;https://google.github.io/dagger/compiler-options&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ã“ã‚Œã¯ã€startup timeã‚’æ”¹å–„ã™ã‚‹ãŸã‚ã®æ©Ÿèƒ½ã§ã™ã€‚ã©ã‚Œãã‚‰ã„å·®ãŒã‚ã‚‹ã‹ã‚’æ‹…å½“ã‚¢ãƒ—ãƒªã§å®Ÿéš›ã«èª¿ã¹ã¦ã¿ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ç¢ºèªã«ä½¿ç”¨ã—ãŸç«¯æœ«ã¯Android8ç³»ã®Galaxyã¨ã€Android7ç³»ã®Xperiaã®è¨ˆ2å°ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ç¢ºèªã«ä½¿ç”¨ã—ãŸã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆ&#34;&gt;ç¢ºèªã«ä½¿ç”¨ã—ãŸã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆ&lt;/h2&gt;

&lt;p&gt;adb shellã‚³ãƒãƒ³ãƒ‰ã‹ã‚‰èµ·å‹•æ™‚é–“ã‚’èª¿ã¹ã‚‹ã‚³ãƒãƒ³ãƒ‰ã§ã™ã€‚è¨ˆ11å›startup timeã‚’ç¢ºèªã™ã‚‹äº‹ãŒã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;for i in {0..10}
do
    adb shell am start -S -W jp.hoge/.ui.main.MainActivity -c android.intent.category.LAUNCHER -a android.intent.action.MAIN &amp;gt;&amp;gt; hoge.txt
    sleep 10
done
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸‹è¨˜ã‚’å‚è€ƒã«ã—ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.android.com/topic/performance/vitals/launch-time&#34;&gt;https://developer.android.com/topic/performance/vitals/launch-time&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;fastinitæœ‰åŠ¹ã®å ´åˆ&#34;&gt;fastInitæœ‰åŠ¹ã®å ´åˆ&lt;/h2&gt;

&lt;p&gt;ä¸‹è¨˜ã‚’build.gradleã«è¿½åŠ ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-groovy&#34;&gt;kapt {
    javacOptions {
        option(&amp;quot;-Adagger.fastInit=enabled&amp;quot;)
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;çµæœ:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;å¹³å‡: 1609ms
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;fastinitç„¡åŠ¹ã®å ´åˆ&#34;&gt;fastInitç„¡åŠ¹ã®å ´åˆ&lt;/h2&gt;

&lt;p&gt;çµæœ:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;å¹³å‡: 1607ms
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;ã¾ã¨ã‚&#34;&gt;ã¾ã¨ã‚&lt;/h2&gt;

&lt;p&gt;ã»ã¼å¤‰ã‚ã‚‰ãªã„æ•°å­—ãŒå‡ºã¦ãã¦ã—ã¾ã„ã¾ã—ãŸã€‚æ‚²ã—ã„ã€‚
Daggerç”Ÿæˆã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã‚‹é™ã‚Šã ã¨ã€æœ€åˆã®Componentã®createã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ComponentãŒæŒã£ã¦ã„ã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®åˆæœŸåŒ–ãŒè¡Œã‚ã‚Œã¦ã„ãªã‹ã£ãŸã®ã§ã€æ—©ããªã‚Šãã†ã ãªã¨æ€ã£ãŸã‚“ã§ã™ãŒã€å®Ÿéš›ã«ã¯ã»ã¼å¤‰ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;èŠ³ã—ããªã„çµæœã«ãªã£ãŸæ¨æ¸¬ã¨ã—ã¦&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;æ‹…å½“ã‚¢ãƒ—ãƒªã®Daggerã®æ›¸ãæ–¹ãŒæ­£ã—ããªã„ã‹ã‚‰ã“ã®çµæœã«ãªã£ãŸ?

&lt;ul&gt;
&lt;li&gt;è¦èª¿æŸ»ã€ã—ã‹ã—ä¸€èˆ¬çš„ãªAndroid-Daggerã‚’ä½¿ã£ãŸæ›¸ãæ–¹ã‚’ã—ã¦ã„ã‚‹ã®ã§æ­£ã—ã„ã¯ãš&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;ç¢ºèªã«ä½¿ç”¨ã—ãŸã‚³ãƒãƒ³ãƒ‰ãŒè‰¯ããªã„ã®ã‹ã‚‚?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ãªã«ã‹åˆ†ã‹ã£ãŸã‚‰è¿½è¨˜ã—ã¾ã™ã€ã‚‚ã—ãã¯é–“é•ã£ã¦ã„ã‚‹ç‚¹ãŒã‚ã‚Œã°ã”æŒ‡æ‘˜ã„ãŸã ã‘ã‚Œã°å¹¸ã„ã§ã™ğŸ˜Š&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Kotlin: Inline Functionã ã‘ã§ã¯ãƒ¡ã‚½ãƒƒãƒ‰ã‚«ã‚¦ãƒ³ãƒˆã¯æ¸›ã‚‰ãªã„</title>
      <link>https://satoshun.github.io/2018/08/inline_function_decrease_method_count/</link>
      <pubDate>Thu, 02 Aug 2018 00:00:00 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2018/08/inline_function_decrease_method_count/</guid>
      <description>

&lt;h2 id=&#34;çµè«–&#34;&gt;çµè«–&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;R8/Proguardã‚’ã¡ã‚ƒã‚“ã¨ä½¿ã†&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;èƒŒæ™¯&#34;&gt;èƒŒæ™¯&lt;/h2&gt;

&lt;p&gt;Inline Functionã‚’ä½¿ã†ã¨ã€é–¢æ•°ãŒã‚¤ãƒ³ãƒ©ã‚¤ãƒ³åŒ–ã•ã‚Œã‚‹ã®ã§ã€è‡ªå‹•çš„ã«ãƒ¡ã‚½ãƒƒãƒ‰æ•°ãŒ1æ¸›ã‚‹ã¨æ€ã£ã¦ã„ã¾ã—ãŸã€‚ã‘ã©ã€ãã‚“ãªã“ã¨ã¯ãªã‹ã£ãŸã¨ã„ã†è©±ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;å®Ÿéš›ã«å‹•ã‹ã—ã¦ç¢ºèªã—ã¦ã¿ã¾ã™ã€‚ä¸‹è¨˜ã®é–¢æ•°ã‚’è¿½åŠ ã—ã€Build APK â†’ Analyze APKã§classes.dexã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚«ã‚¦ãƒ³ãƒˆã‚’èª¿ã¹ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãšã¯ã€R8ç„¡ã—ã§èª¿ã¹ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;fun hoge() {
    println(&amp;quot;hogehoge&amp;quot;)
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å½“ç„¶ãƒ¡ã‚½ãƒƒãƒ‰ã‚«ã‚¦ãƒ³ãƒˆãŒ1å¢—ãˆã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;æ¬¡ã«ã€inlineã‚’ä»˜ã‘ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;inline fun hoge() {
    println(&amp;quot;hogehoge&amp;quot;)
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã¡ã‚‰ã‚‚ãƒ¡ã‚½ãƒƒãƒ‰ã‚«ã‚¦ãƒ³ãƒˆãŒ1å¢—ãˆã¾ã—ãŸã€‚
show Kotlin Bytecode â†’ Decompileã‚’ä½¿ã„ã€decompileã•ã‚ŒãŸJavaãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¦‹ã‚‹ã¨ã€inline hogeãƒ¡ã‚½ãƒƒãƒ‰ã«å¯¾å¿œã—ãŸãƒ¡ã‚½ãƒƒãƒ‰ãŒç”Ÿæˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã—ãŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;@Metadata(
    mv = {1, 1, 10},
    bv = {1, 0, 2},
    k = 2,
    d1 = {&amp;quot;\u0000\b\n\u0000\n\u0002\u0010\u0002\n\u0000\u001a\t\u0010\u0000\u001a\u00020\u0001H\u0086\bÂ¨\u0006\u0002&amp;quot;},
    d2 = {&amp;quot;hoge&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;production sources for module app&amp;quot;}
)
public final class MainActivityKt {
    public static final void hoge() {
        String var1 = &amp;quot;hogehoge&amp;quot;;
        System.out.println(var1);
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ãŸã ã—ã€ã“ã“ã§é‡è¦ãªã®ã¯ã€inlineã‚’ã¤ã‘ãŸãƒ¡ã‚½ãƒƒãƒ‰ã¯ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³åŒ–ã•ã‚Œã‚‹ãŸã‚ã€ä¸Šè¨˜ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ç”Ÿæˆã•ã‚Œã‚‹ã‘ã©ã€å®Ÿéš›ã«ã¯ã‚³ãƒ¼ãƒ«ã•ã‚Œãªã„ç‚¹ã§ã™ã€‚
ã‚³ãƒ¼ãƒ«ã•ã‚Œãªã„ã€å‚ç…§ãŒãªã„ã®ã§R8ã§å‰Šé™¤ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;å®Ÿéš›ã«R8/Proguardã‚’æœ‰åŠ¹ã«ã—ã¦Build APK â†’ Analyze APKã§ç¢ºèªã—ãŸã¨ã“ã‚ã€inlineã‚’ã¤ã‘ãŸå ´åˆã¯ãƒ¡ã‚½ãƒƒãƒ‰ã‚«ã‚¦ãƒ³ãƒˆãŒå¢—ãˆã¦ã„ãªã„ã“ã¨ãŒç¢ºèªã§ãã¾ã—ãŸã€‚&lt;/p&gt;

&lt;h2 id=&#34;ã¾ã¨ã‚&#34;&gt;ã¾ã¨ã‚&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;Inlineãƒ¡ã‚½ãƒƒãƒ‰ã¯R8/Proguardã¨çµ„ã¿åˆã‚ã›ã‚Œã°ãƒ¡ã‚½ãƒƒãƒ‰ã‚«ã‚¦ãƒ³ãƒˆã‚’æ¸›ã‚‰ã™åŠ¹æœãŒã‚ã‚‹

&lt;ul&gt;
&lt;li&gt;ã¨ã¯ã„ãˆã€5.0(ART)ã‹ã‚‰ã¯runtimeã‹ã‚‰multidexã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã®ã§ã€æ˜”ã»ã©ãƒ¡ã‚½ãƒƒãƒ‰ã‚«ã‚¦ãƒ³ãƒˆã‚’æ„è­˜ã™ã‚‹å¿…è¦ã¯ãªã„ã¨æ€ã†&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Android: ContraintLayoutã§ãƒã‚¬ãƒ†ã‚£ãƒ–ãƒãƒ¼ã‚¸ãƒ³ã‚’å®Ÿç¾ã™ã‚‹</title>
      <link>https://satoshun.github.io/2018/07/constraintlayout-negative_margin/</link>
      <pubDate>Wed, 25 Jul 2018 00:00:00 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2018/07/constraintlayout-negative_margin/</guid>
      <description>

&lt;p&gt;ConstraintLayoutã¯ãƒã‚¬ãƒ†ã‚£ãƒ–ãƒãƒ¼ã‚¸ãƒ³ã«å¯¾å¿œã—ã¦ã„ãªã„ãŸã‚ã€å°‘ã—ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚’ä½¿ã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ã“ã®è¨˜äº‹ã§ã¯&lt;a href=&#34;https://developer.android.com/reference/android/widget/Space&#34;&gt;Space&lt;/a&gt;ã‚’ä½¿ã£ãŸãƒã‚¬ãƒ†ã‚£ãƒ–ãƒãƒ¼ã‚¸ãƒ³ã®å®Ÿç¾ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ä¾‹&#34;&gt;ä¾‹&lt;/h2&gt;

&lt;p&gt;ãƒã‚¬ãƒ†ã‚£ãƒ–ãƒãƒ¼ã‚¸ãƒ³ã¨åŒç­‰ã®å¤§ãã•ã‚’æŒã£ãŸ&lt;code&gt;Space&lt;/code&gt;ã‚’å®šç¾©ã—ã¦ã€ãã“ã«Constraintã‚’è¨­å®šã™ã‚‹ã ã‘ã§ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;androidx.constraintlayout.widget.ConstraintLayout
    xmlns:android=&amp;quot;http://schemas.android.com/apk/res/android&amp;quot;
    xmlns:app=&amp;quot;http://schemas.android.com/apk/res-auto&amp;quot;
    xmlns:tools=&amp;quot;http://schemas.android.com/tools&amp;quot;
    android:layout_width=&amp;quot;match_parent&amp;quot;
    android:layout_height=&amp;quot;match_parent&amp;quot;
    android:clipToPadding=&amp;quot;false&amp;quot;
    android:padding=&amp;quot;80dp&amp;quot;&amp;gt;

  &amp;lt;Space
      android:id=&amp;quot;@+id/negative&amp;quot;
      android:layout_width=&amp;quot;15dp&amp;quot;
      android:layout_height=&amp;quot;15dp&amp;quot;
      app:layout_constraintStart_toStartOf=&amp;quot;parent&amp;quot;
      app:layout_constraintTop_toTopOf=&amp;quot;parent&amp;quot; /&amp;gt;

  &amp;lt;ImageView
      android:id=&amp;quot;@+id/icon&amp;quot;
      android:layout_width=&amp;quot;30dp&amp;quot;
      android:layout_height=&amp;quot;30dp&amp;quot;
      android:contentDescription=&amp;quot;icon&amp;quot;
      app:layout_constraintBottom_toBottomOf=&amp;quot;@id/negative&amp;quot;
      app:layout_constraintEnd_toEndOf=&amp;quot;@id/negative&amp;quot;
      tools:src=&amp;quot;@tools:sample/avatars&amp;quot; /&amp;gt;
&amp;lt;/androidx.constraintlayout.widget.ConstraintLayout&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;https://lh3.googleusercontent.com/LQrkHsAeTBvqlZWuw1Ccpm_dvrnCsdK7aH2rMB6HYakF_jv3q6Zf_-QBtfOo1eD0EjLBOjxy11nx2TAlZstr354XRiSXt7HUxENJXji8ZxWNxeJUTe8g9jIstSO1PRMsw7f8O5xuCakktrJLSUPLk01CI1N6OJ9MGMvsSbSDO6o4t7oeipkV9f7klqmzdxtoxESyDzoEI5SfeMOxynhmTGLwv6RnaASEOzVyL2xEW8eq63erAiu6ptdwl-_rQkxAnAIhYpSuPZjweCPBzf3GiMJi5gx_Ciz348GmoSaTIhuGM6grHd181fBGkZQkbvgg5ggrk5pLlja1N4eZA54n5rgzKs5gT36fA8K_ZFrAQI0H50cvAbesIeDVb05MZ2pP592Kwb8moTt6xp0TTFYrJf-c-MVljio-JvAKuUC0fPWPpdgMyxkJHW4AzK9l-Yo4f2-dUdfEf06J6ktMOsld0Yzsyu07Hki6MSGeBjU3bJ3R0vDi-W6SBUNmcDzJu5kC-2ItGmq4sN8fq06XJMSwVTmfDAyfHOluWHOTlL5LV3YVvYZxxgGJ6_ldqdD2HZ0ZW8wuNpfrHTxGLYCHR5EN5ouY5ILx-snrNAfQPQ9Z9Ph0U_4UeCMlODslXyRpueecgOSBJUhwc47xrQ04b-xOJz_01EWEA61x=w1452-h720-no&#34; alt=&#34;constraintlayout-image&#34; width=&#34;600px&#34;/&gt;&lt;/p&gt;

&lt;p&gt;ç°¡å˜ã«èª¬æ˜ã™ã‚‹ã¨ã€&lt;code&gt;Space&lt;/code&gt;ã«15pxã‚’æŒ‡å®šã—ã¦ã€bottom, endã«å¯¾ã—ã¦constraintã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€ãƒã‚¬ãƒ†ã‚£ãƒ–ãƒãƒ¼ã‚¸ãƒ³ã‚’é”æˆã—ã¦ã„ã¾ã™ã€‚
ä¸Šè¨˜ã®ä¾‹ã ã¨ã€&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;android:layout_marginStart=&amp;quot;-15px&amp;quot;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;android:layout_marginTop=&amp;quot;-15px&amp;quot;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ã¨åŒç­‰ã®æŒ¯ã‚‹èˆã„ã‚’ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ã¾ã¨ã‚&#34;&gt;ã¾ã¨ã‚&lt;/h2&gt;

&lt;p&gt;ConstraintLayoutã§ã¯ãƒã‚¤ãƒ†ã‚£ãƒ–ã§ãƒã‚¬ãƒ†ã‚£ãƒ–ãƒãƒ¼ã‚¸ãƒ³ã«å¯¾å¿œã—ã¦ã„ãªã„ãŸã‚ã€&lt;code&gt;Space&lt;/code&gt;ã‚’ä½¿ã£ãŸã€ã‚„ã‚„ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«ãªæ–¹æ³•ã§å®Ÿç¾ã™ã‚‹ã®ãŒè‰¯ã„ã¨æ€ã‚ã‚Œã¾ã™ã€‚&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Kotlin: typealiasã‚’ä½¿ã£ã¦ã‚ã‚“ã©ã†ãªã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’çœç•¥ã™ã‚‹</title>
      <link>https://satoshun.github.io/2018/07/typealias_omit_annotation/</link>
      <pubDate>Thu, 12 Jul 2018 00:00:00 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2018/07/typealias_omit_annotation/</guid>
      <description>&lt;p&gt;Kotlinã§ã¯typealiasã¨å‘¼ã°ã‚Œã‚‹ã€æ—¢å­˜ã®ã‚¿ã‚¤ãƒ—ã«å¯¾ã—ã¦åˆ¥åã‚’ã¤ã‘ã‚‹æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚
&lt;a href=&#34;https://kotlinlang.org/docs/reference/type-aliases.html&#34;&gt;https://kotlinlang.org/docs/reference/type-aliases.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;å…¸å‹çš„ãªä½¿ã„æ–¹ã¨ã—ã¦ã€ä¸‹ã®ã‚ˆã†ãªè¤‡é›‘ãªå‹ã«åå‰ã‚’ã¤ã‘ã‚‹ã¨å¯èª­æ€§ãŒé«˜ããªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;typealias MyHandler = (Int, String, Any) -&amp;gt; Unit
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã•ã‚‰ã«typealiasã¯ã€ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã¤ã‘ã‚‹ã“ã¨ã‚‚å‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;typealias NonWildcardList&amp;lt;T&amp;gt; = List&amp;lt;@JvmSuppressWildcards T&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;JvmSuppressWildcards&lt;/code&gt;ã¯Dagger(&lt;a href=&#34;https://github.com/google/dagger/issues/668&#34;&gt;å‚è€ƒãƒªãƒ³ã‚¯&lt;/a&gt;)ã‚„retrofit(&lt;a href=&#34;https://github.com/square/retrofit/issues/1805&#34;&gt;å‚è€ƒãƒªãƒ³ã‚¯&lt;/a&gt;)ã‚’ä½¿ã£ã¦ã„ã‚‹ã¨ã€ä½¿ã‚ã–ã‚‹ã‚’ãˆãªã„ã‚±ãƒ¼ã‚¹ãŒã‚ã‚‹ã®ã§ã€typealiasã§å®šç¾©ã—ã¦ã„ãŠã‘ã°å¯èª­æ€§é«˜ãã€æ¥½ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Dagger-Androidã§UserScopeã®ã‚ˆã†ãªã‚«ã‚¹ã‚¿ãƒ ã®Scopeã‚’ä½¿ã„ã€ç‰¹å®šã®Activityé–“ã®ã¿ã§åŒä¸€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½¿ã†æ–¹æ³•</title>
      <link>https://satoshun.github.io/2018/06/dagger-android-with_custom_scope/</link>
      <pubDate>Tue, 26 Jun 2018 00:00:00 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2018/06/dagger-android-with_custom_scope/</guid>
      <description>

&lt;p&gt;&lt;a href=&#34;https://github.com/google/dagger&#34;&gt;Dagger&lt;/a&gt;ã‚’ä½¿ã„ã€è¤‡æ•°ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹é–“ã§åŒä¸€ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½¿ã†æ™‚ã¯ã€ã‚¹ã‚³ãƒ¼ãƒ—ã‚’ä½¿ã†ã“ã¨ã§å®Ÿç¾ã§ãã¾ã™ã€‚
Androidã§ã¯ã€ã™ã¹ã¦ã®Activityã§å…±é€šã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½¿ã†ã«ã¯ &lt;code&gt;Singleton&lt;/code&gt;ã‚¹ã‚³ãƒ¼ãƒ—ã¨AppComponentã‚’çµ„ã¿åˆã‚ã›ã¦ä½¿ã†æ–¹æ³•ãŒã‚ˆãçŸ¥ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚
ã—ã‹ã—ã€&lt;strong&gt;ç‰¹å®š&lt;/strong&gt;ã®Activityé–“ã§ã®ã¿å…±é€šã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½¿ã„ãŸã„å ´åˆã«ã¯ã“ã®æ–¹æ³•ã¯ä½¿ãˆã¾ã›ã‚“ã€‚Singletonã ã¨&lt;strong&gt;ã™ã¹ã¦&lt;/strong&gt;ã®Activityé–“ã§å…±é€šã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒä½¿ãˆã¦ã—ã¾ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã®è¨˜äº‹ã§ã¯ã€Dagger-Androidã‚’ä½¿ã£ãŸã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’ãƒ™ãƒ¼ã‚¹ã«ã€ã€Œç‰¹å®šã®Activityé–“ã®ã¿ã§åŒä¸€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½¿ã†æ–¹æ³•ã€ã‚’èª¬æ˜ã—ã¾ã™ã€‚
ã¾ãŸã€åŸºæœ¬çš„ãªDaggerã®ä½¿ã„æ–¹ã¯çŸ¥ã£ã¦ã„ã‚‹å‰æã§èª¬æ˜ã—ã¦ã„ãã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯&lt;a href=&#34;https://github.com/satoshun-example/DaggerScopeExample&#34;&gt;ã“ã¡ã‚‰&lt;/a&gt;ã«ãªã‚Šã¾ã™ã€‚
ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã‚‹ã¨ç†è§£ãŒã‚ˆã‚Šæ·±ã¾ã‚‹ã¨æ€ã†ã®ã§ã€ãœã²ã”è¦§ã«ãªã£ã¦ãã ã•ã„ğŸ˜Š&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;ã§ã¯èª¬æ˜ã—ã¦ã„ãã¾ã™ã€‚ä»Šå›ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã®ç›®æŒ‡ã™ã¨ã“ã‚ã¯&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;UserScopeã‚’å®šç¾©ã—ã€MainActivityã€UserScopedActivityã§åŒä¸€ã®&lt;code&gt;UserManager&lt;/code&gt;ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½¿ç”¨ã™ã‚‹&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ã¨ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãšæœ€åˆã«UserScopeã‚’å®šç¾©ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;@Scope
@MustBeDocumented
@Retention(AnnotationRetention.RUNTIME)
annotation class UserScope
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ¬¡ã«UserSubcomponentã‚’ä½œã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;@UserScope
@Subcomponent
interface UserSubcomponent {
  @Subcomponent.Builder
  interface Builder {
    fun build(): UserSubcomponent
  }

  val activityInjector: DispatchingAndroidInjector&amp;lt;Activity&amp;gt;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã“ã§ã¯ã€UserSubcomponentã«&lt;code&gt;UserScope&lt;/code&gt;ã‚¹ã‚³ãƒ¼ãƒ—ã‚’æŒãŸã›ã¦ã„ã¾ã™ã€‚
ã“ã®ã‚ˆã†ã«æ›¸ãã“ã¨ã§ã€Subcomponentã¨Scopeã‚’çµã³ã¤ã‘ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;æ¬¡ã«AppComponentã‚’ä½œã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;@Singleton
@Component(
    modules = [
      AndroidSupportInjectionModule::class
    ]
)
interface AppComponent : AndroidInjector&amp;lt;App&amp;gt; {
  @Component.Builder
  interface Builder {
    @BindsInstance
    fun application(application: App): Builder

    fun build(): AppComponent
  }

  override fun inject(app: App)

  // AppComponentã¨UserSubcomponentã‚’çµã³ã¤ã‘ã‚‹
  val userComponentBuilder: UserSubcomponent.Builder
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã“ã§ã®ãƒã‚¤ãƒ³ãƒˆã¯&lt;code&gt;AppComponent&lt;/code&gt;ã«ã€&lt;code&gt;val userComponentBuilder: UserSubcomponent.Builder&lt;/code&gt;ã‚’å®šç¾©ã™ã‚‹ã“ã¨ã§ã™ã€‚
ã“ã†ã™ã‚‹ã“ã¨ã§ã€&lt;code&gt;AppComponent&lt;/code&gt;ã«&lt;code&gt;UserSubcomponent&lt;/code&gt;ã‚’çµã³ä»˜ã‘ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã‚Œã§åŸºæœ¬çš„ãªéƒ¨åˆ†ã®å®šç¾©ã¯å®Œäº†ã—ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;æ¬¡ã«ã€å„Activityã‚’Componentã«çµã³ã¤ã‘ã¦ã„ãã¾ã™ã€‚
ã‚µãƒ³ãƒ—ãƒ«ã§ã¯MainActivityã€UserScopedActivityã¨NoUserScopedActivityã®3ã¤ã®Activityã‚’å®šç¾©ã—ã¦ãŠã‚Šã€
ãã‚Œãã‚Œã®Activityã¯ä»¥ä¸‹ã®ã‚ˆã†ã«æŒ¯ã‚‹èˆã‚ã›ãŸã„ã¨ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;MainActivityã€UserScopedActivityã¯UserScopeã«å¾“ã„ã€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å…±é€šã§ä½¿ã„ãŸã„&lt;/li&gt;
&lt;li&gt;NoUserScopedActivityã¯UserScopeã«å¾“ã‚ãªã„ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ã—ãŸã„&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;mainactivity-userscopedactivityã‚’usersubcomponentã«å¾“ã‚ã›ã‚‹&#34;&gt;MainActivityã€UserScopedActivityã‚’UserSubcomponentã«å¾“ã‚ã›ã‚‹&lt;/h2&gt;

&lt;p&gt;MainActivityã€UserScopedActivityã‚’&lt;code&gt;UserSubcomponent&lt;/code&gt;ã«å®šç¾©ã™ã‚‹ã“ã¨ã§ã€MainActivityã€UserScopedActivityã‚’&lt;code&gt;UserScope&lt;/code&gt;ã«å¾“ã‚ã›ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
ãªãœãªã‚‰ã€&lt;code&gt;UserSubcomponent&lt;/code&gt;ã¯&lt;code&gt;UserScope&lt;/code&gt;ã«ç´ä»˜ã„ã¦ã„ã‚‹ãŸã‚ã§ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;// UserSubcomponent.kt
@UserScope
@Subcomponent(modules = [
  MainActivityModule::class,
  UserScopedActivityModule::class
])
interface UserSubcomponent {
  @Subcomponent.Builder
  interface Builder {
    fun build(): UserSubcomponent
  }

  val activityInjector: DispatchingAndroidInjector&amp;lt;Activity&amp;gt;
}

// MainActivityModule.kt
@Module
interface MainActivityModule {
  @ContributesAndroidInjector
  fun contributeMainActivity(): MainActivity
}

// UserScopedActivityModule.kt
@Module
interface UserScopedActivityModule {
  @ContributesAndroidInjector
  fun contributeUserScopedActivity(): UserScopedActivity
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;nouserscopedactivityã¯userscopeã«å¾“ã‚ãªã„&#34;&gt;NoUserScopedActivityã¯UserScopeã«å¾“ã‚ãªã„&lt;/h2&gt;

&lt;p&gt;NoUserScopedActivityã‚’&lt;code&gt;AppComponent&lt;/code&gt;ã«å®šç¾©ã™ã‚‹ã“ã¨ã§ã€NoUserScopedActivityã§&lt;code&gt;UserScope&lt;/code&gt;ã‚’ä½¿ã£ã¦ã„ãŸã‚‰ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
&lt;code&gt;AppComponent&lt;/code&gt;ã¯&lt;code&gt;UserScope&lt;/code&gt;ã«ç´ä»˜ã„ã¦ã„ãªã„ãŸã‚ã§ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;// AppComponent.kt
@Singleton
@Component(
    modules = [
      AndroidSupportInjectionModule::class,
      NoUserScopedActivityModule::class
    ]
)
interface AppComponent : AndroidInjector&amp;lt;App&amp;gt; {
  @Component.Builder
  interface Builder {
    @BindsInstance
    fun application(application: App): Builder

    fun build(): AppComponent
  }

  override fun inject(app: App)

  val userComponentBuilder: UserSubcomponent.Builder
}

// NoUserScopedActivityModule.kt
@Module
interface NoUserScopedActivityModule {
  @ContributesAndroidInjector
  fun contributeNoUserScopedActivity(): NoUserScopedActivity
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã‚Œã§ã€å®šç¾©ã¯å®Œäº†ã§ã™ã€‚å®Ÿéš›ã«æ­£ã—ãå‹•ãã‹ã‚’ç¢ºèªã—ã¦ã¿ã¾ã™ã€‚
é©å½“ã«&lt;code&gt;UserScope&lt;/code&gt;ã«å¾“ã†&lt;code&gt;UserManager&lt;/code&gt;ã‚’å®šç¾©ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;// UserManager.kt
@UserScope
class UserManager @Inject constructor() {
  var value = 100
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã‚Œã¯&lt;code&gt;UserScope&lt;/code&gt;ã«å¾“ã†ã®ã§ã€MainActivityã€UserScopedActivityã«ã¯æœŸå¾…é€šã‚ŠåŒä¸€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒ&lt;code&gt;Inject&lt;/code&gt;ã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;// MainActivity.kt
class MainActivity : AppCompatActivity() {

  // ok
  @Inject lateinit var userManager: UserManager

  ...
}
// UserScopedActivity.kt
class UserScopedActivity : AppCompatActivity() {

  // ok: MainActivityã¨åŒã˜ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒæ³¨å…¥ã•ã‚Œã‚‹
  @Inject lateinit var userManager: UserManager

  ...
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã—ã‹ã—ã€NoUserScopedActivityã«&lt;code&gt;Inject&lt;/code&gt;ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;// NoUserScopedActivity.kt
class NoUserScopedActivity : AppCompatActivity() {

  //  ä¸‹ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã‚’å–ã‚‹ã¨ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼
  //  @Inject lateinit var userManager: UserManager
  ...
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;NoUserScopedActivityã‚’&lt;code&gt;UserScope&lt;/code&gt;ã«å¾“ã†å½¢ã§å®šç¾©ã—ã¦ãªã„ãŸã‚ã§ã™ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;MainActivityã€UserScopedActivityã¯UserScopeã«å¾“ã„ã€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å…±é€šã§ä½¿ã„ãŸã„&lt;/li&gt;
&lt;li&gt;NoUserScopedActivityã¯UserScopeã«å¾“ã‚ãªã„ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ã—ãŸã„&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ãŒé”æˆã§ãã¾ã—ãŸã€‚&lt;/p&gt;

&lt;h2 id=&#34;ä½™è«‡&#34;&gt;ä½™è«‡&lt;/h2&gt;

&lt;p&gt;ãã‚‚ãã‚‚ã€&lt;code&gt;ContributesAndroidInjector&lt;/code&gt;å®šç¾©æ™‚ã«ã€&lt;code&gt;UserScope&lt;/code&gt;ã‚¹ã‚³ãƒ¼ãƒ—ã‚’ä»˜ä¸ã—ã¦ã‚ã’ã‚Œã°ã„ã„ã‚“ã˜ã‚ƒãªã„ã‹ã¨æ€ã†ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;// MainActivityModule.kt
@Module
interface MainActivityModule {
  @UserScope
  @ContributesAndroidInjector
  fun contributeMainActivity(): MainActivity
}

// UserScopedActivityModule.kt
@Module
interface UserScopedActivityModule {
  @UserScope
  @ContributesAndroidInjector
  fun contributeUserScopedActivity(): UserScopedActivity
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã®ã‚„ã‚Šæ–¹ã ã¨ã€ä»Šå›ã®ã‚±ãƒ¼ã‚¹ã«ã¯ä¸éƒ½åˆã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;MainActivityã€UserScopedActivityã¯&lt;code&gt;UserScope&lt;/code&gt;ã«å¾“ã†ã®ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã¯é€šã‚Šã¾ã™ã€‚
ã—ã‹ã—ã€MainActivityã€UserScopedActivityã§åŒä¸€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½¿ã†ã“ã¨ã¯å‡ºæ¥ã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;p&gt;ä½•æ•…ã‹ã¨è¨€ã†ã¨ã€&lt;code&gt;ContributesAndroidInjector&lt;/code&gt;ã¯Subcomponentã‚’ä½œã‚‹ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ã‚·ãƒ¥ã‚¬ãƒ¼ã®ã‚ˆã†ãªã‚‚ã®ã§ã™ãŒã€
&lt;code&gt;MainActivityModule&lt;/code&gt;ã¨&lt;code&gt;UserScopedActivityModule&lt;/code&gt;ã¯ãã‚Œãã‚Œç‹¬ç«‹ã—ãŸSubcomponentã‚’ä½œã‚‹ã®ã§ã€ç‹¬ç«‹ã—ãŸComponenté–“ã§åŒä¸€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½¿ã†ã“ã¨ãŒå‡ºæ¥ãªã„ãŸã‚ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ä»Šå›ã®ã‚ˆã†ã«ã€&lt;code&gt;UserSubcomponent&lt;/code&gt;ã‚’å®šç¾©ã—ã¦ã€ãã®Componentã‚’ãƒ™ãƒ¼ã‚¹ã«æ‰€å±ã•ã›ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ã¾ã¨ã‚&#34;&gt;ã¾ã¨ã‚&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;ç‰¹å®šã®Activityã®ã¿ã§å…±é€šã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½¿ã„ãŸã„ã¨ãã¯ã€çµæ§‹ã‚ã‚“ã©ã†

&lt;ul&gt;
&lt;li&gt;å†—é•·ãªæ°—ãŒã™ã‚‹ã®ã§ã€ã‚‚ã£ã¨ã„ã„æ–¹æ³•ãŒã‚ã£ãŸã‚‰æ•™ãˆã¦ãã ã•ã„ğŸ˜‹&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ContributesAndroidInjector&lt;/code&gt;ãŒã©ã†ã„ã†å‹•ä½œã‚’ã™ã‚‹ã®ã‹ã‚’çŸ¥ã£ã¦ãŠãã¨ã€ã„ã–ã¨ã„ã†ã¨ãã«ä¾¿åˆ©&lt;/li&gt;
&lt;li&gt;ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯&lt;a href=&#34;https://github.com/satoshun-example/DaggerScopeExample&#34;&gt;ã“ã¡ã‚‰&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Android: Navigationã®safeargs Gradle pluginã ã‘ã‚’ä½¿ã£ã¦ã‚‚ã„ã„ã‹ã‚‚ã—ã‚Œãªã„</title>
      <link>https://satoshun.github.io/2018/05/navigation-only_use_safe_args/</link>
      <pubDate>Sun, 20 May 2018 00:00:00 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2018/05/navigation-only_use_safe_args/</guid>
      <description>

&lt;p&gt;Google I/O 2018ã§JetpackãŒç™»å ´ã—ã€æ–°ãŸã«Navigationãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒå°å…¥ã•ã‚Œã¾ã—ãŸã€‚
ã–ã£ãã‚Šã¨èª¬æ˜ã™ã‚‹ã¨ã€ç”»é¢ã®é·ç§»ã®å®Ÿè£…ã‚’åŠ©ã‘ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ãªã£ã¦ã„ã¾ã™ã€‚å®Ÿè£…çš„ã«ã¯ã€FragmentTransactionã‚’ç›´æ¥ã„ã˜ã‚‹ã“ã¨ãŒãªããªã‚‹ã¨ã„ã£ãŸãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æ©Ÿèƒ½ã«ã€&lt;a href=&#34;https://developer.android.com/topic/libraries/architecture/navigation/navigation-implementing#Safe-args&#34;&gt;safeargs&lt;/a&gt;ã¨ã„ã†ã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚ŒãŒä¾¿åˆ©ã§ã€æœ€åˆã¯ã“ã®æ©Ÿèƒ½ã ã‘ã‚’ä½¿ã†ã®ã‚‚ã„ã„ã®ã§ã¯? ã¨æ€ã£ã¦ã„ã‚‹ã®ã§ãã®ç´¹ä»‹ã§ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;safeargsã‚’ä½¿ã£ã¦ã¿ã‚‹&#34;&gt;safeargsã‚’ä½¿ã£ã¦ã¿ã‚‹&lt;/h2&gt;

&lt;p&gt;ä¸€èˆ¬çš„ã«Fragmentã«é©å½“ãªå€¤ã‚’æ¸¡ã™ã¨ãã¯&lt;code&gt;Bundle&lt;/code&gt;ã‚’é€šã—ã¦æ¸¡ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;// å‘¼ã³å‡ºã—å´
val bundle = Bundle()
bundle.putInt(&amp;quot;step&amp;quot;, 10)

// å‘¼ã³å‡ºã•ã‚Œå´
val step = arguments?.getInt(&amp;quot;step&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã‚Œã®å•é¡Œç‚¹ã¨ã—ã¦ã¯ã€typesafeã§ç„¡ã„ã¨ã“ã‚ã§ã™ã€‚ä¾‹ãˆã°ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ãªã©ã§ã€ç‰‡æ–¹ã®æ–‡å­—åˆ—ã‚’&lt;code&gt;&amp;quot;step2&amp;quot;&lt;/code&gt;ã«ã—ã¦ã—ã¾ã†ã¨ã€ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã‚Œã‚’è§£æ±ºã«ã™ã‚‹ãŸã‚ã«Navigationã§ã¯safe argsã¨ã„ã†æ©Ÿèƒ½ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚
ã“ã‚Œã¯ã€DataBindingã®ã‚ˆã†ã«ã€ã‚¯ãƒ©ã‚¹ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ã§typesafeã‚’å®Ÿç¾ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;navigation xmlns:android=&amp;quot;http://schemas.android.com/apk/res/android&amp;quot;
            xmlns:app=&amp;quot;http://schemas.android.com/apk/res-auto&amp;quot;
            xmlns:tools=&amp;quot;http://schemas.android.com/tools&amp;quot;&amp;gt;
  &amp;lt;fragment
      android:name=&amp;quot;com.example.android.codelabs.navigation.HogeFragment&amp;quot;
      android:label=&amp;quot;Hoge&amp;quot;&amp;gt;

    &amp;lt;argument
        android:name=&amp;quot;step&amp;quot;
        app:type=&amp;quot;integer&amp;quot;
        android:defaultValue=&amp;quot;1&amp;quot;/&amp;gt;
  &amp;lt;/fragment&amp;gt;
&amp;lt;/navigation&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã¨navigationã‚’è¨˜è¿°ã™ã‚‹ã¨ã€&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public class HogeFragmentArgs {
  private int step = 1;

  private HogeFragmentArgs() {
  }

  public static HogeFragmentArgs fromBundle(Bundle bundle) {
    HogeFragmentArgs result = new HogeFragmentArgs();
    if (bundle.containsKey(&amp;quot;step&amp;quot;)) {
      result.step = bundle.getInt(&amp;quot;step&amp;quot;);
    }
    return result;
  }

  public int getStep() {
    return step;
  }

  public Bundle toBundle() {
    Bundle __outBundle = new Bundle();
    __outBundle.putInt(&amp;quot;step&amp;quot;, this.step);
    return __outBundle;
  }

  public static class Builder {
    private int step = 1;

    public Builder(HogeFragmentArgs original) {
      this.step = original.step;
    }

    public Builder() {
    }

    public HogeFragmentArgs build() {
      HogeFragmentArgs result = new HogeFragmentArgs();
      result.step = this.step;
      return result;
    }

    public Builder setStep(int step) {
      this.step = step;
      return this;
    }

    public int getStep() {
      return step;
    }
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸Šè¨˜ã®ã‚¯ãƒ©ã‚¹ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚ã“ã‚Œã‚’ä½¿ã†ã“ã¨ã§typesafeã‚’å®Ÿç¾å‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;// å‘¼ã³å‡ºã—å´
HogeFragmentArgs.Builder()
    .setStep(10)
    .build()
    .toBunble()

// å‘¼ã³å‡ºã•ã‚Œå´
val args = HogeFragmentArgs.fromBundle(arguments)
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;ã¾ã¨ã‚&#34;&gt;ã¾ã¨ã‚&lt;/h2&gt;

&lt;p&gt;Navigationã¯å¤§ãã„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãªã®ã§ã€ã¨ã‚Šã‚ãˆãšã®ç·´ç¿’ã§safe argsã®æ©Ÿèƒ½ã ã‘ã¤ã¾ã¿é£Ÿã„ã™ã‚‹ã®ã¯ã€
å€‹äººçš„ã«ã¯è‰¯ã•ãã†ã ã¨æ€ã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/googlecodelabs/android-navigation&#34;&gt;https://github.com/googlecodelabs/android-navigation&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Android: æ‹¡å¼µé–¢æ•°ã§LiveDataã®Single Eventã‚’æ‰±ã†</title>
      <link>https://satoshun.github.io/2018/05/singlelivedata/</link>
      <pubDate>Sat, 19 May 2018 00:00:00 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2018/05/singlelivedata/</guid>
      <description>

&lt;p&gt;LiveDataã¯æœ€æ–°ã®å€¤ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã™ã‚‹ãŸã‚ã€ã‚¨ãƒ©ãƒ¼å€¤ã®å–æ‰±ãªã©ã«å›°ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚
é©å½“ãªã‚¯ãƒ©ã‚¹ã‚’ä½œã‚‹ã®ã‚‚ã„ã„ã®ã§ã™ãŒã€æ‹¡å¼µé–¢æ•°ã§è¡¨ç¾ã™ã‚‹ã“ã¨ã‚‚å‡ºæ¥ã‚‹ã®ã§ãã®ç´¹ä»‹ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;å®šç¾©ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;fun &amp;lt;T&amp;gt; singleLiveData(): MutableLiveData&amp;lt;T&amp;gt; {
  // skipç”¨ã®åˆæœŸå€¤ã‚’å…¥ã‚Œã¦ãŠã
  return MutableLiveData&amp;lt;T&amp;gt;().also { it.value = null }
}

fun &amp;lt;T&amp;gt; LiveData&amp;lt;T&amp;gt;.observeSingle(owner: LifecycleOwner, observer: ((T?) -&amp;gt; Unit)) {
  // æœ€åˆã®å€¤ã¯å¸¸ã«skipã™ã‚‹ã“ã¨ã§ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ç„¡è¦–ã™ã‚‹
  val firstIgnore = AtomicBoolean(true)
  this.observe(owner, Observer {
    if (firstIgnore.getAndSet(false)) return@Observer
    observer(it)
  })
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä½¿ã†æ™‚ã¯ã“ã‚“ãªæ„Ÿã˜ã§ä½¿ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;// TestViewModel.kt
class TestViewModel: ViewModel() {
  val errorEvent = singleLiveData&amp;lt;String&amp;gt;()
}

// TestActivity.kt
testViewModel = ViewModelProviders.of(this).get(TestViewModel::class.java)
testViewModel.errorEvent.observeSingle(activity) {
  Log.d(&amp;quot;one&amp;quot;, it.toString())
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ãƒ¡ãƒªãƒƒãƒˆã¯ã‚µãƒ–ã‚¯ãƒ©ã‚¹ã‚’ä½œã‚‰ãšã«æ¸ˆã‚€ã¨ã“ã‚ã§ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/googlesamples/android-architecture/blob/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/SingleLiveEvent.java&#34;&gt;https://github.com/googlesamples/android-architecture/blob/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/SingleLiveEvent.java&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://medium.com/@star_zero/singleliveevent-livedata-with-multi-observers-384e17c60a16&#34;&gt;https://medium.com/@star_zero/singleliveevent-livedata-with-multi-observers-384e17c60a16&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>CoroutineBindingãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½œã‚Šã¾ã—ãŸ</title>
      <link>https://satoshun.github.io/2018/05/coroutinebinding-intro/</link>
      <pubDate>Sat, 19 May 2018 00:00:00 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2018/05/coroutinebinding-intro/</guid>
      <description>

&lt;p&gt;CoroutineBindingãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½œã£ãŸã®ã§ãã®ç´¹ä»‹ã§ã™ã€‚
&lt;a href=&#34;https://github.com/satoshun/CoroutineBinding&#34;&gt;https://github.com/satoshun/CoroutineBinding&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Androidé–‹ç™ºã§Coroutineã®æµã‚ŒãŒæ¥ã¦ã„ã‚‹ã¨æ€ã£ã¦ã„ã¦ã€&lt;a href=&#34;https://github.com/JakeWharton/RxBinding&#34;&gt;RxBinding&lt;/a&gt;ã®ã‚ˆã†ãªæ„Ÿã˜ã§ã€
Coroutineãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ã«Viewã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’å—ã‘å–ã‚ŒãŸã‚‰ä¾¿åˆ©ãã†ã ãªã¨æ€ã„ä½œã‚Šã¾ã—ãŸã€‚&lt;/p&gt;

&lt;h2 id=&#34;ä½¿ã„æ–¹&#34;&gt;ä½¿ã„æ–¹&lt;/h2&gt;

&lt;p&gt;ä¾‹ãˆã°clickã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’å—ã‘å–ã‚ŠãŸã„ã¨ã—ã¾ã™ã€‚
CoroutineBindingã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;val root = findViewById&amp;lt;ViewGroup&amp;gt;(R.id.root)
launch(UI) {
    for (click in root.clicks()) {
       Log.d(&amp;quot;clicked&amp;quot;, click.toString())
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;RxBindingã®ã‚ˆã†ã«ä½¿ã†ã“ã¨ãŒå‡ºæ¥ã¾ã™!
ä»–ã®APIã«é–¢ã—ã¦ã‚‚RxBindingã«æº–æ‹ ã—ã¦ã„ã‚‹ãŸã‚ã€RxBindingã‚’ä½¿ã£ãŸã“ã¨ãŒã‚ã‚‹äººã¯è‡ªç„¶ã«ä½¿ãˆã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ã¾ã¨ã‚&#34;&gt;ã¾ã¨ã‚&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;Coroutineã‚’ä½¿ã£ã¦ã„ã‚‹äººãªã‚‰ä¾¿åˆ©ã«ä½¿ãˆã‚‹ã¨æ€ã†ã®ã§ã€ãœã²ä½¿ã£ã¦ä¸‹ã•ã„!&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/satoshun/CoroutineBinding&#34;&gt;https://github.com/satoshun/CoroutineBinding&lt;/a&gt; ä½•ã‹ã‚ã‚Œã°issueã‚„ã€PRã‚’è²°ãˆã‚‹ã¨å¬‰ã—ã„ã§ã™&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>å‹ã®å£°</title>
      <link>https://satoshun.github.io/2018/05/type_feeling/</link>
      <pubDate>Sat, 05 May 2018 03:00:00 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2018/05/type_feeling/</guid>
      <description>&lt;p&gt;Javaãªã©ã®ã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ã®è¨€èªã§ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã¨ãã«ã€å®Ÿè£…ãŒæœ€åˆã«æ€ã„æµ®ã‹ã¶äººã¯å‹ã®å£°ã‚’èã‘ã¦ã„ã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãšã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘è¨€èªã®ãƒ¡ãƒªãƒƒãƒˆã‚’è€ƒãˆã¾ã—ã‚‡ã†ã€‚ãƒ¡ãƒªãƒƒãƒˆã®1ã¤ã«å®Ÿè£…ã§ã¯ãªãã€æŒ¯ã‚‹èˆã„ã«å¯¾ã—ã¦ä¾å­˜ã§ãã‚‹ã¨ã„ã†ã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚ãƒãƒªãƒ¢ãƒ¼ãƒ•ã‚£ã‚ºãƒ ã¨å‘¼ã°ã‚Œã‚‹ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã§ã™ã€‚
æŒ¯ã‚‹èˆã„ã¯æŠ½è±¡ã€å®Ÿè£…ã¯å…·è±¡ã¨è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚å…·è±¡ã¯ç¢ºå®šã™ã‚‹ã“ã¨ã§ã™ã€‚æœªæ¥ã¯ã“ã®ç¬é–“ã«æ±ºã¾ã‚Šã¾ã™ã€‚æŠ½è±¡ã¯ä¿ç•™ã™ã‚‹ã“ã¨ã§ã™ã€‚ç´„æŸã•ã‚ŒãŸæœªæ¥ã¯å¾…ã£ã¦ã„ã¾ã›ã‚“ã€‚ã—ã‹ã—ã€æœŸå¾…ã—ãŸæœªæ¥ã¯ä½œã‚Šå‡ºã™ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;å‹ã¯ç¢ºå®šã§ã¯ãªãã€ãã‚Œãã‚Œã®å ´é¢ã§æœŸå¾…ã—ã¦ã„ã‚‹æœªæ¥ã‚’ä½œã‚Šå‡ºã™ã‚‚ã®ã§ã™ã€‚ãã†ã™ã‚‹ã“ã¨ã§ã€æŸ”è»Ÿæ€§ã‚’å¾—ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;äººã¯å¼±ã„ç”Ÿãç‰©ã§ã™ã€‚æœªæ¥ã‚’ç¢ºå®šã•ã›ãŸããªã‚Šã¾ã™ã€‚ã—ã‹ã—ã€æœªæ¥ã‚’ç¢ºå®šã•ã›ã‚‹ã“ã¨ã¯ã‚ãªãŸã®å‚²æ…¢ã§ã™ã€‚æã‚Œãšã«å‹ã®å£°ã‚’èãã€æŠ½è±¡ã«æ³¨ç›®ã—ã¦ãã ã•ã„ã€‚ãã†ã™ã‚Œã°å‹ã¨ã¤ãªãŒã‚Šã€ä¸–ç•Œã¨ã¤ãªãŒã‚Œã¾ã™ã€‚ã‚ãªãŸã®ã‚³ãƒ¼ãƒ‰ã«æŸ”è»Ÿæ€§ã€æ‹¡å¼µæ€§ã€ãã—ã¦ç„¡é™ã®å¯èƒ½æ€§ãŒã‚„ã©ã‚Šã¾ã™ã€‚ã‚ãªãŸã¯ä¸€äººã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;to be continued.&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Kotlin: ãƒ­ãƒ¼ã‚«ãƒ«ã§æ˜ç¤ºçš„ã«å‹ã‚’å®£è¨€ã™ã‚‹ã“ã¨ã«ã¤ã„ã¦</title>
      <link>https://satoshun.github.io/2018/04/about_writing_type_in_kotlin/</link>
      <pubDate>Mon, 16 Apr 2018 22:50:00 UTC</pubDate>
      <author>Sato Shun</author>
      <guid>https://satoshun.github.io/2018/04/about_writing_type_in_kotlin/</guid>
      <description>

&lt;p&gt;ãƒã‚¨ãƒ ã§ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;çµè«–&#34;&gt;çµè«–&lt;/h2&gt;

&lt;p&gt;åŸºæœ¬çš„ã«ãƒ­ãƒ¼ã‚«ãƒ«ã§æ˜ç¤ºçš„ã«å‹ã‚’å®£è¨€ã™ã‚‹ã®ã¯å¥½ã¾ã—ããªã„&lt;/p&gt;

&lt;h2 id=&#34;å•é¡Œ&#34;&gt;å•é¡Œ&lt;/h2&gt;

&lt;p&gt;Kotlinã§ã¯val(var)ã§å¤‰æ•°å®šç¾©ã™ã‚‹ã“ã¨ãŒã§ãã€å‹å®£è¨€ã‚’çœç•¥ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-kotlin&#34;&gt;val userName = dataSource.getUserName()
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å‹å®£è¨€ã™ã‚‹ã®ã¨ã€çœç•¥ã™ã‚‹ã®ã©ã¡ã‚‰ãŒè‰¯ã„ã®ã‹è€ƒãˆã‚‹ã¨ã€å¤šãã®å ´åˆã€å‹å®£è¨€ã‚’ã—ãªã„ã»ã†ãŒå„ªã‚Œã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã€‚ãªãœã‹ã¨ã„ã†ã¨ã€å‹å®£è¨€ãŒå¿…è¦ã¨ã„ã†ã“ã¨ã¯ã€å‹å®£è¨€ã‚’ã—ãªã„ã¨äººé–“ãŒç†è§£ã§ããªã„ã»ã©è¤‡é›‘ãªã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã„ã‚‹ã“ã¨ã‚’æ„å‘³ã™ã‚‹ã‹ã‚‰ã§ã™ã€‚é©åˆ‡ãªãƒ¡ã‚½ãƒƒãƒ‰ã€é©åˆ‡ãªã‚¯ãƒ©ã‚¹ãŒæ¬ ã‘ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;Kotlinã«ãŠã„ã¦å‹å®£è¨€ã‚’æ›¸ãã“ã¨ã¯ã‚³ãƒ¡ãƒ³ãƒˆã‚’æ›¸ãã“ã¨ã«ç­‰ã—ã„ã¨æ€ã„ã¾ã™ã€‚å¤šãã®å ´åˆã¯å†—é•·ã§ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ã¾ã¨ã‚&#34;&gt;ã¾ã¨ã‚&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;ãƒ­ãƒ¼ã‚«ãƒ«ã§å‹å®£è¨€ãŒæ¬²ã—ããªã‚‹ã‚³ãƒ¼ãƒ‰ãŒã‚ã£ãŸã‚‰ã€ãã‚Œã¯è¤‡é›‘ã™ãã‚‹ã‚³ãƒ¼ãƒ‰ã®åŒ‚ã„ãŒã™ã‚‹&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
  </channel>
</rss>